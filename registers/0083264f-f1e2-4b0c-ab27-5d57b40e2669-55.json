{
  "changes" : [ {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 0,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "b59dba6f-75f8-44fd-9dfb-8c2daf1fba70"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133127,
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "DS_GLOSSARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "Regra de Pre\u00e7o para materiais OPME em que h\u00e1 acordos para valores fixos com determinados fornecedores",
      "old_value" : null
    }, {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133127,
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "07/01/2025 19:54:00",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "07/01/2025 19:54:00",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 1,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "DIC_EXPRESSAO_CUSTOM",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "da2e3314-03a0-4ee3-bb6d-d0231b0a7111"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16516,
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "DS_LAYER",
      "data_type" : "VARCHAR2",
      "new_value" : "CORE.TECHCELL",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133127,
      "old_value" : null
    }, {
      "column_name" : "DS_LOCALE",
      "data_type" : "VARCHAR2",
      "new_value" : "en_US",
      "old_value" : null
    }, {
      "column_name" : "DS_IDIOMA",
      "data_type" : "VARCHAR2",
      "new_value" : "en",
      "old_value" : null
    }, {
      "column_name" : "DS_EXPRESSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "Regra de Pre\u00e7o para Materiais OPME",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16516,
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "07/01/2025 19:54:02",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "07/01/2025 19:54:02",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 50,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "f81cfe12-9a4c-4c37-8e25-7086051f0b85"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133127,
      "old_value" : 1133127
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 51,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO_CUSTOM",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "e2f03d3b-2476-436e-96f9-97bd17b500a1"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16516,
      "old_value" : 16516
    } ],
    "column_values" : [ {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : "A"
    }, {
      "column_name" : "DS_LOCALE",
      "data_type" : "VARCHAR2",
      "new_value" : "pt_BR",
      "old_value" : "en_US"
    }, {
      "column_name" : "DS_IDIOMA",
      "data_type" : "VARCHAR2",
      "new_value" : "pt",
      "old_value" : "en"
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "07/01/2025 19:54:58",
      "old_value" : "07/01/2025 19:54:02"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500002,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "5f603149-af04-40c2-a833-5f4578aca7e1"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_CONSIG",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "IE_SINCRONIZAR",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 14:36:42",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "QT_MAX_REGISTRO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "DS_SHORTNAME",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_RP",
      "old_value" : null
    }, {
      "column_name" : "DS_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "Regra de Pre\u00e7o para Materiais OPME",
      "old_value" : null
    }, {
      "column_name" : "DS_TABLESPACE_IND",
      "data_type" : "VARCHAR2",
      "new_value" : "TASY_INDEX",
      "old_value" : null
    }, {
      "column_name" : "IE_GERA_DEFINICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_CONSIG",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 14:36:18",
      "old_value" : null
    }, {
      "column_name" : "DS_TABLESPACE_TAB",
      "data_type" : "VARCHAR2",
      "new_value" : "TASY_DATA",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "QT_REGISTROS_PREVISTO",
      "data_type" : "NUMBER",
      "new_value" : "100",
      "old_value" : null
    }, {
      "column_name" : "QT_FATOR_CONVERSAO",
      "data_type" : "NUMBER",
      "new_value" : "1",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_CALCULO",
      "data_type" : "VARCHAR2",
      "new_value" : "R",
      "old_value" : null
    }, {
      "column_name" : "QT_REGISTROS_ATUAL",
      "data_type" : "NUMBER",
      "new_value" : "100",
      "old_value" : null
    }, {
      "column_name" : "IE_RESTRINGE_ESTAB",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CADASTRO_GERAL",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TROCA_CAMPO_GRID",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_RESTRINGE_EMPRESA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "QT_MAX_CAMPO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_ALTURA_PANEL",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_LARGURA_PANEL",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_POS_ESQUERDA",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_POS_TOPO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_INTERVALO_CAMPO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "IE_LIMPAR_LOG",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TEMPORARIA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_EXPORTAR",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_CADASTRO",
      "data_type" : "NUMBER",
      "new_value" : 1133127,
      "old_value" : null
    }, {
      "column_name" : "IE_CALLSTACK",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIA_LOG_LOCAL",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_TABELA",
      "data_type" : "NUMBER",
      "new_value" : 1133127,
      "old_value" : null
    },{
      "column_name":"NR_SEQ_MODULO",
      "data_type":"NUMBER",
      "new_value":"37",
      "old_value":null
    }, {
      "column_name":"DS_APLICACAO",
      "data_type":"VARCHAR2",
      "new_value":"Tasy",
      "old_value":null
    }, {
      "column_name" : "DS_LAYER",
      "data_type" : "VARCHAR2",
      "new_value" : "CORE.TECHCELL",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500003,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "DELETE",
      "table_name" : "TABELA_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "317a259f-a0ff-45ff-b3ae-4882fe87a9fc"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "TCEL_REGRA_PRECO_ITEM_CONSIG"
    } ],
    "column_values" : [ {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : null,
      "old_value" : "08/01/2025 14:36:42"
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "A"
    }, {
      "column_name" : "DS_SHORTNAME",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "TCEL_RP"
    }, {
      "column_name" : "DS_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "Regra de Pre\u00e7o para Materiais OPME"
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "TCEL_REGRA_PRECO_ITEM_CONSIG"
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : null,
      "old_value" : "08/01/2025 14:36:18"
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "dgalvan"
    }, {
      "column_name" : "IE_REGRA_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    }, {
      "column_name" : "IE_CADASTRO_GERAL",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    }, {
      "column_name" : "IE_TEMPORARIA",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    }, {
      "column_name" : "IE_REGRA_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "dgalvan"
    }, {
      "column_name" : "CD_EXP_CADASTRO",
      "data_type" : "NUMBER",
      "new_value" : null,
      "old_value" : 1133127
    }, {
      "column_name" : "IE_CALLSTACK",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    }, {
      "column_name" : "IE_CRIA_LOG_LOCAL",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    }, {
      "column_name" : "CD_EXP_TABELA",
      "data_type" : "NUMBER",
      "new_value" : null,
      "old_value" : 1133127
    },{
      "column_name":"NR_SEQ_MODULO",
      "data_type":"NUMBER",
      "new_value":null,
      "old_value":"37"
    }, {
      "column_name":"DS_APLICACAO",
      "data_type":"VARCHAR2",
      "new_value":null,
      "old_value":"Tasy"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500004,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "d01ce315-514d-4257-913b-826b8da46b17"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "IE_SINCRONIZAR",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 14:40:33",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "QT_MAX_REGISTRO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "DS_SHORTNAME",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_RP",
      "old_value" : null
    }, {
      "column_name" : "DS_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "Regra de Pre\u00e7o para Materiais OPME",
      "old_value" : null
    }, {
      "column_name" : "DS_TABLESPACE_IND",
      "data_type" : "VARCHAR2",
      "new_value" : "TASY_INDEX",
      "old_value" : null
    }, {
      "column_name" : "IE_GERA_DEFINICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 14:40:00",
      "old_value" : null
    }, {
      "column_name" : "DS_TABLESPACE_TAB",
      "data_type" : "VARCHAR2",
      "new_value" : "TASY_DATA",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "QT_REGISTROS_PREVISTO",
      "data_type" : "NUMBER",
      "new_value" : "100",
      "old_value" : null
    }, {
      "column_name" : "QT_FATOR_CONVERSAO",
      "data_type" : "NUMBER",
      "new_value" : "1",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_CALCULO",
      "data_type" : "VARCHAR2",
      "new_value" : "R",
      "old_value" : null
    }, {
      "column_name" : "QT_REGISTROS_ATUAL",
      "data_type" : "NUMBER",
      "new_value" : "100",
      "old_value" : null
    }, {
      "column_name" : "IE_RESTRINGE_ESTAB",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CADASTRO_GERAL",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TROCA_CAMPO_GRID",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_RESTRINGE_EMPRESA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "QT_MAX_CAMPO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_ALTURA_PANEL",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_LARGURA_PANEL",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_POS_ESQUERDA",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_POS_TOPO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_INTERVALO_CAMPO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "IE_LIMPAR_LOG",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TEMPORARIA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_EXPORTAR",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_CADASTRO",
      "data_type" : "NUMBER",
      "new_value" : 1133127,
      "old_value" : null
    }, {
      "column_name" : "IE_CALLSTACK",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIA_LOG_LOCAL",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_TABELA",
      "data_type" : "NUMBER",
      "new_value" : 1133127,
      "old_value" : null
    },{
      "column_name":"NR_SEQ_MODULO",
      "data_type":"NUMBER",
      "new_value":"37",
      "old_value":null
    }, {
      "column_name":"DS_APLICACAO",
      "data_type":"VARCHAR2",
      "new_value":"Tasy",
      "old_value":null
    } , {
      "column_name" : "DS_LAYER",
      "data_type" : "VARCHAR2",
      "new_value" : "CORE.TECHCELL",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500005,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "35efa495-0f7d-47cd-a4c1-995334de4736"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NR_SEQUENCIA",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 1,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NR_SEQUENCIA",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 10,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 14:40:29",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "QT_SEQ_INICIO",
      "data_type" : "NUMBER",
      "new_value" : 1,
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "QT_SEQ_INCREMENTO",
      "data_type" : "NUMBER",
      "new_value" : 1,
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NUMBER",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 14:40:29",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 557610,
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500006,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "77097690-b2a4-49ba-9507-ff4d7256bdb8"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "CD_ESTABELECIMENTO",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "VL_DEFAULT",
      "data_type" : "VARCHAR2",
      "new_value" : "@ESTAB",
      "old_value" : null
    }, {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 3,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "CD_ESTABELECIMENTO",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 4,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:33:10",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NUMBER",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:33:10",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 561348,
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500007,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "dca831e3-30c0-404c-b0d0-52a3cf928e47"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NM_USUARIO",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 12,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NM_USUARIO",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 15,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:33:26",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "VARCHAR2",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:33:26",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 557610,
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500008,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "f70c747f-0247-446b-a662-03cb3fd177e5"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NM_USUARIO_NREC",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 14,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NM_USUARIO_NREC",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 15,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:33:26",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "VARCHAR2",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:33:26",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 557610,
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500009,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "11dcdff8-b654-4dd1-8050-6791d671c4b9"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "DT_ATUALIZACAO",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 11,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "DT_ATUALIZACAO",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:33:26",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "DATE",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:33:26",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 557610,
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500010,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "2aea9cb2-5c19-4ca9-a283-8b75ca2c164c"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "DT_ATUALIZACAO_NREC",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 13,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "DT_ATUALIZACAO_NREC",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:33:26",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "DATE",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:33:26",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 557610,
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500011,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "1383f6e5-ec36-41cf-95e9-547cee3f3f8c"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "IE_SITUACAO",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "VL_DEFAULT",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 91,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "IE_SITUACAO",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 1,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:33:37",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "DS_VALORES",
      "data_type" : "VARCHAR2",
      "new_value" : "A,I",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "VARCHAR2",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:33:37",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 561319,
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500012,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "f6630ab7-3fd4-4403-928c-8fabf7149646"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "CD_FORNECEDOR",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 8,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "CD_FORNECEDOR",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 14,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:36:56",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "VARCHAR2",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:36:56",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 290437,
      "old_value" : null
    }, {
      "column_name" : "IE_INFORMACAO_SENSIVEL",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500013,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "28e2ab53-c2e2-4985-a934-2c66edde9881"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "CD_CONVENIO",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 9,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "CD_CONVENIO",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 10,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:37:54",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NUMBER",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:37:54",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 286199,
      "old_value" : null
    }, {
      "column_name" : "IE_INFORMACAO_SENSIVEL",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500014,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "7167fbaf-e3a5-477e-8cdb-ae46d543c4e0"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "CD_PROCEDIMENTO",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 10,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "CD_PROCEDIMENTO",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 15,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:39:12",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NUMBER",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:39:12",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 296422,
      "old_value" : null
    }, {
      "column_name" : "IE_INFORMACAO_SENSIVEL",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500015,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "4ce7304f-bb87-48e8-8c15-7c47c4c8eaa6"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "CD_CATEGORIA",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 11,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "CD_CATEGORIA",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 10,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:40:10",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "VARCHAR2",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:40:10",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 284678,
      "old_value" : null
    }, {
      "column_name" : "IE_INFORMACAO_SENSIVEL",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500016,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "28cd315b-9e6a-48b4-8c2a-139ed3ff0a2e"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "IE_ORIGEM_PROCED",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 12,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "IE_ORIGEM_PROCED",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 10,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:42:06",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NUMBER",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:42:06",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 294966,
      "old_value" : null
    }, {
      "column_name" : "IE_INFORMACAO_SENSIVEL",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500017,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "e872b321-515c-4613-9c27-654bfc1f629a"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "IE_SINCRONIZAR",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "DS_LAYER",
      "data_type" : "VARCHAR2",
      "new_value" : "CORE.TECHCELL",
      "old_value" : null
    } , {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:46:04",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "QT_MAX_REGISTRO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "DS_SHORTNAME",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_RV",
      "old_value" : null
    }, {
      "column_name" : "DS_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "Materialpreis",
      "old_value" : null
    }, {
      "column_name" : "DS_TABLESPACE_IND",
      "data_type" : "VARCHAR2",
      "new_value" : "TASY_INDEX",
      "old_value" : null
    }, {
      "column_name" : "IE_GERA_DEFINICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:45:48",
      "old_value" : null
    }, {
      "column_name" : "DS_TABLESPACE_TAB",
      "data_type" : "VARCHAR2",
      "new_value" : "TASY_DATA",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "QT_REGISTROS_PREVISTO",
      "data_type" : "NUMBER",
      "new_value" : "100",
      "old_value" : null
    }, {
      "column_name" : "QT_FATOR_CONVERSAO",
      "data_type" : "NUMBER",
      "new_value" : "1",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_CALCULO",
      "data_type" : "VARCHAR2",
      "new_value" : "R",
      "old_value" : null
    }, {
      "column_name" : "QT_REGISTROS_ATUAL",
      "data_type" : "NUMBER",
      "new_value" : "100",
      "old_value" : null
    }, {
      "column_name" : "IE_RESTRINGE_ESTAB",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CADASTRO_GERAL",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TROCA_CAMPO_GRID",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_RESTRINGE_EMPRESA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "QT_MAX_CAMPO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_ALTURA_PANEL",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_LARGURA_PANEL",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_POS_ESQUERDA",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_POS_TOPO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_INTERVALO_CAMPO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "IE_LIMPAR_LOG",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TEMPORARIA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_EXPORTAR",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_CADASTRO",
      "data_type" : "NUMBER",
      "new_value" : 631572,
      "old_value" : null
    }, {
      "column_name" : "IE_CALLSTACK",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIA_LOG_LOCAL",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_TABELA",
      "data_type" : "NUMBER",
      "new_value" : 631572,
      "old_value" : null
    } ,{
      "column_name":"NR_SEQ_MODULO",
      "data_type":"NUMBER",
      "new_value":"37",
      "old_value":null
    }, {
      "column_name":"DS_APLICACAO",
      "data_type":"VARCHAR2",
      "new_value":"Tasy",
      "old_value":null
    }]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500018,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "89a6df22-56cb-4c90-8d6c-5b5a8fcf614a"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NR_SEQUENCIA",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 1,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NR_SEQUENCIA",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 10,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:46:00",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "QT_SEQ_INICIO",
      "data_type" : "NUMBER",
      "new_value" : 1,
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "QT_SEQ_INCREMENTO",
      "data_type" : "NUMBER",
      "new_value" : 1,
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NUMBER",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:46:00",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 557610,
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500019,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "a684a590-b79f-471f-9295-7afc39764a2b"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NM_USUARIO",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 12,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NM_USUARIO",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 15,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:46:21",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "VARCHAR2",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:46:21",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 557610,
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500020,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "95aaddd9-5960-423b-8b7e-f8a6660f9eef"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "DT_ATUALIZACAO",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 11,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "DT_ATUALIZACAO",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:46:21",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "DATE",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:46:21",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 557610,
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500021,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "900b2dcc-113a-4bc3-88a6-0e11c757e290"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NM_USUARIO_NREC",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 14,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NM_USUARIO_NREC",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 15,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:46:21",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "VARCHAR2",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:46:21",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 557610,
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500022,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "8027eaa0-7fc1-436a-a82a-e7aef6323b30"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "DT_ATUALIZACAO_NREC",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 13,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "DT_ATUALIZACAO_NREC",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:46:21",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "DATE",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:46:21",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 557610,
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500023,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "9cf49b48-f639-49c5-9a40-398546386f3b"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "CD_MATERIAL",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 6,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "CD_MATERIAL",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 6,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:48:08",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NUMBER",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:48:08",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 292952,
      "old_value" : null
    }, {
      "column_name" : "IE_INFORMACAO_SENSIVEL",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500024,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "9087b275-8726-4fa7-bfeb-ce003b8087d3"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NR_SEQ_REGRA",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 7,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NR_SEQ_REGRA",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 10,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:49:18",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NUMBER",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:49:18",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 306103,
      "old_value" : null
    }, {
      "column_name" : "IE_INFORMACAO_SENSIVEL",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500025,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "3376222b-d224-482d-8dfa-b8e184ae1704"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "VL_UNITARIO_ITEM",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 8,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 4,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "VL_UNITARIO_ITEM",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 17,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:50:25",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGRA_PRECO_ITEM_VALOR",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NUMBER",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:50:25",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 495542,
      "old_value" : null
    }, {
      "column_name" : "IE_INFORMACAO_SENSIVEL",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 1300,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "65a4f243-4981-42f9-b708-27cbb44c114c"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133168,
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "DS_GLOSSARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "Nome da Fun\u00e7\u00e3o customizada para o cliente para realizar novos cadastros ou alterar cadastros da fun\u00e7\u00e3o Cadastros Gerais",
      "old_value" : null
    }, {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133168,
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:58:45",
      "old_value" : null
    }, {
      "column_name" : "DS_EXPRESSAO_BR",
      "data_type" : "VARCHAR2",
      "new_value" : "Gest\u00e3o do Plugin",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:58:45",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 1301,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "DIC_EXPRESSAO_CUSTOM",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "95220abc-81d6-4483-9baf-d0afca63f12a"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16544,
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "DS_LAYER",
      "data_type" : "VARCHAR2",
      "new_value" : "CORE.TECHCELL",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133168,
      "old_value" : null
    }, {
      "column_name" : "DS_LOCALE",
      "data_type" : "VARCHAR2",
      "new_value" : "en_US",
      "old_value" : null
    }, {
      "column_name" : "DS_IDIOMA",
      "data_type" : "VARCHAR2",
      "new_value" : "en",
      "old_value" : null
    }, {
      "column_name" : "DS_EXPRESSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "Gest\u00e3o do Plugin",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16544,
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:58:46",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:58:46",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 1350,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "d7287edb-72b6-475f-8581-c5f1fcec4f30"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133168,
      "old_value" : 1133168
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 1351,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO_CUSTOM",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "bf033f03-8e16-4b5d-89fc-86355c3eae27"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16544,
      "old_value" : 16544
    } ],
    "column_values" : [ {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : "A"
    }, {
      "column_name" : "DS_LOCALE",
      "data_type" : "VARCHAR2",
      "new_value" : "pt_BR",
      "old_value" : "en_US"
    }, {
      "column_name" : "DS_IDIOMA",
      "data_type" : "VARCHAR2",
      "new_value" : "pt",
      "old_value" : "en"
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "08/01/2025 16:59:07",
      "old_value" : "08/01/2025 16:58:46"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 1400,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "85373887-ceea-4d74-bec5-ebf6793cd593"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133303,
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "DS_GLOSSARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "Express\u00e3o utilizada no novo campo IE_APROVAR_AUTOMATICAMENTE no cadastro Regra Ordem Consignado\n",
      "old_value" : null
    }, {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133303,
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "10/01/2025 14:02:22",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "10/01/2025 14:02:22",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 1401,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "DIC_EXPRESSAO_CUSTOM",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "f652cf20-ca99-457b-8981-3fc96f32216f"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16577,
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "DS_LAYER",
      "data_type" : "VARCHAR2",
      "new_value" : "CORE.TECHCELL",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133303,
      "old_value" : null
    }, {
      "column_name" : "DS_LOCALE",
      "data_type" : "VARCHAR2",
      "new_value" : "en_US",
      "old_value" : null
    }, {
      "column_name" : "DS_IDIOMA",
      "data_type" : "VARCHAR2",
      "new_value" : "en",
      "old_value" : null
    }, {
      "column_name" : "DS_EXPRESSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "Aprovar automaticamente",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16577,
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "10/01/2025 14:02:24",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "10/01/2025 14:02:24",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 1450,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "8f49ea20-57d9-45ea-82f0-5c59903cb1ab"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133303,
      "old_value" : 1133303
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 1451,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO_CUSTOM",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "e98b5628-c51f-4c67-a15a-607da85d97b6"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16577,
      "old_value" : 16577
    } ],
    "column_values" : [ {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : "A"
    }, {
      "column_name" : "DS_LOCALE",
      "data_type" : "VARCHAR2",
      "new_value" : "pt_BR",
      "old_value" : "en_US"
    }, {
      "column_name" : "DS_IDIOMA",
      "data_type" : "VARCHAR2",
      "new_value" : "pt",
      "old_value" : "en"
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "10/01/2025 14:02:43",
      "old_value" : "10/01/2025 14:02:24"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500030,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "",
      "guid" : "999b2d35-a29f-416f-a111-94c7986be221"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGORCO",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "IE_SINCRONIZAR",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "24/09/2002 13:56:30",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "QT_MAX_REGISTRO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "DS_SHORTNAME",
      "data_type" : "VARCHAR2",
      "new_value" : "REGORCO008",
      "old_value" : null
    }, {
      "column_name" : "DS_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "Table to parameterize the automatic generation of the purchase order every time a consigned material is consumed.",
      "old_value" : null
    }, {
      "column_name" : "DS_TABLESPACE_IND",
      "data_type" : "VARCHAR2",
      "new_value" : "TASY_INDEX",
      "old_value" : null
    }, {
      "column_name" : "IE_GERA_DEFINICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGORCO",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "10/01/2025 14:17:19",
      "old_value" : null
    }, {
      "column_name" : "DS_TABLESPACE_TAB",
      "data_type" : "VARCHAR2",
      "new_value" : "TASY_DATA",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "Ivan",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "QT_REGISTROS_PREVISTO",
      "data_type" : "NUMBER",
      "new_value" : "100",
      "old_value" : null
    }, {
      "column_name" : "QT_FATOR_CONVERSAO",
      "data_type" : "NUMBER",
      "new_value" : "1",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_CALCULO",
      "data_type" : "VARCHAR2",
      "new_value" : "R",
      "old_value" : null
    }, {
      "column_name" : "QT_REGISTROS_ATUAL",
      "data_type" : "NUMBER",
      "new_value" : "100",
      "old_value" : null
    }, {
      "column_name" : "DS_SQL_LOOKUP",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_RESTRINGE_ESTAB",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_CADASTRO_GERAL",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_TROCA_CAMPO_GRID",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_RESTRINGE_EMPRESA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "QT_MAX_CAMPO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_ALTURA_PANEL",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_LARGURA_PANEL",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_POS_ESQUERDA",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_POS_TOPO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "QT_INTERVALO_CAMPO",
      "data_type" : "NUMBER",
      "new_value" : "0",
      "old_value" : null
    }, {
      "column_name" : "IE_LIMPAR_LOG",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TEMPORARIA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_EXPORTAR",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_CADASTRO",
      "data_type" : "NUMBER",
      "new_value" : 331894,
      "old_value" : null
    }, {
      "column_name" : "IE_CALLSTACK",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_TITULO",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIA_LOG_LOCAL",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_TABELA",
      "data_type" : "NUMBER",
      "new_value" : 838728,
      "old_value" : null
    },{
      "column_name":"NR_SEQ_MODULO",
      "data_type":"NUMBER",
      "new_value":"37",
      "old_value":null
    }, {
      "column_name":"DS_APLICACAO",
      "data_type":"VARCHAR2",
      "new_value":"Tasy",
      "old_value":null
    } , {
      "column_name" : "DS_LAYER",
      "data_type" : "VARCHAR2",
      "new_value" : "CORE.TECHCELL",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 1550,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "e25e203c-ee6f-4fb7-80ca-33ec7703ecb5"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133315,
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "DS_GLOSSARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "Item para ser utlizado no dominio que determina de onde \u00e9 buscado do pre\u00e7o do material na Ordem de Compra",
      "old_value" : null
    }, {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133315,
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "10/01/2025 17:26:10",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "10/01/2025 17:26:10",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 1551,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "DIC_EXPRESSAO_CUSTOM",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "9b4a4995-dced-4158-bef8-a4f73c8d32f7"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16587,
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "DS_LAYER",
      "data_type" : "VARCHAR2",
      "new_value" : "CORE.TECHCELL",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133315,
      "old_value" : null
    }, {
      "column_name" : "DS_LOCALE",
      "data_type" : "VARCHAR2",
      "new_value" : "en_US",
      "old_value" : null
    }, {
      "column_name" : "DS_IDIOMA",
      "data_type" : "VARCHAR2",
      "new_value" : "en",
      "old_value" : null
    }, {
      "column_name" : "DS_EXPRESSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "Tabela de oportunidade\n ",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16587,
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "10/01/2025 17:26:11",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "10/01/2025 17:26:11",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 1600,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "301d158c-1ec3-44e9-92a8-f904c8da81e2"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133315,
      "old_value" : 1133315
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 1601,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO_CUSTOM",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "01fed2c5-957d-49ac-b6d4-03c81ebb2b0c"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16587,
      "old_value" : 16587
    } ],
    "column_values" : [ {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : "A"
    }, {
      "column_name" : "DS_LOCALE",
      "data_type" : "VARCHAR2",
      "new_value" : "pt_BR",
      "old_value" : "en_US"
    }, {
      "column_name" : "DS_IDIOMA",
      "data_type" : "VARCHAR2",
      "new_value" : "pt",
      "old_value" : "en"
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "10/01/2025 17:26:31",
      "old_value" : "10/01/2025 17:26:11"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500033,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "DELETE",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "cad90ac0-6b68-4b18-9222-72a729cf66ca"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM"
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "IE_ORIGEM_PROCED"
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : null,
      "old_value" : 12
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "dgalvan"
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : null,
      "old_value" : 0
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "IE_ORIGEM_PROCED"
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : null,
      "old_value" : 10
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : null,
      "old_value" : "08/01/2025 16:42:06"
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : ""
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "TCEL_REGRA_PRECO_CONSIG_ITEM"
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "NUMBER"
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : null,
      "old_value" : "08/01/2025 16:42:06"
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : null,
      "old_value" : 294966
    }, {
      "column_name" : "IE_INFORMACAO_SENSIVEL",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 34,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "DELETE",
      "table_name" : "CMDK_OBJECT_INTERCEPTOR",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "5364e305-ee56-4ee1-9571-57ac4ec9046e"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : null,
      "old_value" : 4983
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : null,
      "old_value" : 4983
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : null,
      "old_value" : "24/01/2025 12:53:15"
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "dgalvan"
    }, {
      "column_name" : "NM_OBJECT",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "GERAR_ORDEM_REPOSICAO_CONSIG"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 35,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "CMDK_OBJECT_INTERCEPTOR",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "97bf5c83-bde7-4d03-8409-7a59945ac5ad"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 5441,
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 5441,
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "24/01/2025 12:53:15",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "NM_OBJECT",
      "data_type" : "VARCHAR2",
      "new_value" : "GERAR_ORDEM_REPOSICAO_CONSIG",
      "old_value" : null
    }, {
      "column_name" : "IE_INTERCEPTED",
      "data_type" : "VARCHAR2",
      "new_value" : "Y",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 36,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "DELETE",
      "table_name" : "CMDK_OBJECT_INTERCEPTOR",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "42938f36-023b-4be2-855c-0f483d86f017"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : null,
      "old_value" : 4983
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : null,
      "old_value" : 4983
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : null,
      "old_value" : "24/01/2025 12:53:15"
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "dgalvan"
    }, {
      "column_name" : "NM_OBJECT",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "GERAR_ORDEM_REPOSICAO_CONSIG"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 37,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "CMDK_OBJECT_INTERCEPTOR",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "36b3484d-6264-465c-ad65-dc6c373244d4"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 5442,
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 5442,
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "24/01/2025 12:53:15",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "NM_OBJECT",
      "data_type" : "VARCHAR2",
      "new_value" : "GERAR_ORDEM_REPOSICAO_CONSIG",
      "old_value" : null
    }, {
      "column_name" : "IE_INTERCEPTED",
      "data_type" : "VARCHAR2",
      "new_value" : "Y",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 700038,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "ea78b280-6500-4a23-b5ee-53a731f69747"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG",
      "old_value" : null
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "IE_TIPO_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "PROCEDURE",
      "old_value" : null
    }, {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG",
      "old_value" : null
    }, {
      "column_name" : "IE_MEMORIA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "14/01/2025 13:18:23",
      "old_value" : null
    }, {
      "column_name" : "DS_APLICACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "Tasy",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "IE_GERAR_SCRIPT",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : "S"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : null
    }, {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace\nprocedure tcel_obter_vl_mat_ordem_consig(\n    cd_estabelecimento_p        in  material_lote_fornec.cd_estabelecimento%type,\n    cd_fornecedor_consignado_p\tin  nota_fiscal.cd_cgc_emitente%type,\n    cd_pessoa_fisica_fornec_p   in  nota_fiscal.cd_pessoa_fisica%type default null,\n    cd_material_p               in  material.cd_material%type,\n    nr_ordem_compra_p           in  ordem_compra.nr_ordem_compra%type,\n    nr_prescricao_p             in  material_atend_paciente.nr_prescricao%type,\n    nr_atendimento_p            in  material_atend_paciente.nr_atendimento%type,\n    ie_tipo_atendimento_p       in  regra_valor_ordem_consig.ie_valor_consignado%type,\n    nr_seq_agenda_p             in  agenda_paciente.nr_sequencia%type,\n    dt_atualizacao_p            in  nota_fiscal.dt_atualizacao%type,\n    nr_seq_lote_fornec_p        in  material_lote_fornec.nr_sequencia%type,\n    cd_convenio_p               in  material_atend_paciente.cd_convenio%type,\n    cd_categoria_p              in  atendimento_paciente_v.cd_categoria%type,\n    dt_vigencia_p               in  nota_fiscal_item.dt_validade%type,\n    vl_unitario_material_p      out nota_fiscal_item.vl_unitario_item_nf%type\n) is\n\n\nnr_sequencia_w\t\t\t\tregra_valor_ordem_consig.nr_sequencia%type;\ncd_grupo_material_w\t\t\tgrupo_material.cd_grupo_material%type;\ncd_subgrupo_material_w\t\t\tsubgrupo_material.cd_subgrupo_material%type;\ncd_classe_material_w\t\t\tclasse_material.cd_classe_material%type;\nie_valor_consignado_w\t\t\tregra_preco_ordem_consig.ie_valor_consignado%type := 'N';\nvl_unitario_material_w\t\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_preco_tabela_w\t\t\tpreco_material.vl_preco_venda%type;\nqt_conv_compra_estoque_w\t\tmaterial.qt_conv_compra_estoque%type;\nqt_conv_estoque_consumo_w\t\tmaterial.qt_conv_estoque_consumo%type;\ncd_tab_preco_mat_consig_w\t\tparametro_compras.cd_tab_preco_mat_consig%type;\ndt_utl_vigencia_w\t\t\tdate;\ncd_tab_preco_mat_w\t\t\tnumber(10,0);\nie_origem_preco_w\t\t\tnumber(10,0);\nnr_seq_bras_preco_w\t\t\tnumber(10,0);\nnr_seq_mat_bras_w\t\t\tnumber(10,0);\nnr_seq_conv_bras_w\t\t\tnumber(10,0);\nnr_seq_conv_simpro_w\t\t\tnumber(10,0);\nnr_seq_mat_simpro_w\t\t\tnumber(10,0);\nnr_seq_simpro_preco_w\t\t\tnumber(10,0);\nnr_seq_ajuste_mat_w\t\t\tnumber(10,0);\nnr_seq_marca_w\t\t\t\tmarca.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tcirurgia.nr_cirurgia%type;\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\ncd_convenio_w\t\t\t\tconvenio.cd_convenio%type;\nie_preco_sus_oc_w\t\t\tvarchar2(1);\n\ncursor c01 is\nselect\tnr_sequencia\nfrom\tregra_valor_ordem_consig\nwhere\tcd_estabelecimento = cd_estabelecimento_p\nand\tnvl(cd_grupo_material, cd_grupo_material_w)\t\t= cd_grupo_material_w\nand\tnvl(cd_subgrupo_material, cd_subgrupo_material_w)\t= cd_subgrupo_material_w\nand\tnvl(cd_classe_material, cd_classe_material_w)\t\t= cd_classe_material_w\nand\t(nvl(cd_material, cd_material_p) \t\t\t= cd_material_p or cd_material_p = 0)\nand\t((nvl(cd_cnpj, cd_fornecedor_consignado_p)\t\t= cd_fornecedor_consignado_p) or (cd_cnpj is null))\norder by\n\tnvl(cd_material, 0),\n\tnvl(cd_classe_material, 0),\n\tnvl(cd_subgrupo_material, 0),\n\tnvl(cd_grupo_material, 0),\n\tnvl(cd_cnpj, 'xxx');\n\ncursor c02 is\nselect\tie_valor_consignado\nfrom\tregra_preco_ordem_consig\nwhere\tnr_seq_regra = nr_sequencia_w\norder by nr_seq_prioridade;\n\nbegin\n\nnr_seq_agenda_w := nvl(nr_seq_agenda_p,0);\ncd_convenio_w\t:= cd_convenio_p;\n\nselect\ta.cd_grupo_material,\n\ta.cd_subgrupo_material,\n\ta.cd_classe_material\ninto\tcd_grupo_material_w,\n\tcd_subgrupo_material_w,\n\tcd_classe_material_w\nfrom\testrutura_material_v a\nwhere\ta.cd_material = cd_material_p;\n\nselect\tqt_conv_compra_estoque,\n\tqt_conv_estoque_consumo\ninto \tqt_conv_compra_estoque_w,\n\tqt_conv_estoque_consumo_w\nfrom \tmaterial\nwhere \tcd_material = nvl(cd_material_p,0);\n\nselect\tcd_tab_preco_mat_consig\ninto\tcd_tab_preco_mat_consig_w\nfrom\tparametro_compras\nwhere\tcd_estabelecimento = cd_estabelecimento_p;\n\nopen C01;\nloop\nfetch C01 into\n\tnr_sequencia_w;\nexit when C01%notfound;\n\tbegin\n\t/*Busca a sequencia da regra de preco de acordo com as informacoes do material*/\n\tnr_sequencia_w := nr_sequencia_w;\n\tend;\nend loop;\nclose C01;\n\nif\t(nr_sequencia_w > 0) then\n\n\t/*Esse cursor serve para bucar o preco conforme a regra, seguindo a prioridade.\n\tQuando ele encontra o valor, ele sai fora do cursor. Enquanto o valor e zero, ele vai tentando buscar o preco*/\n\topen C02;\n\tloop\n\tfetch C02 into\n\t\tie_valor_consignado_w;\n\texit when C02%notfound or vl_unitario_material_w > 0;\n\t\tbegin\n\t\t\n\t\t/*Acordo Fornecedor*/\n\t\t\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'T') then\n\t\t\t\n\t\t\tselect b.vl_unitario_item\n\t\t\tinto vl_unitario_material_w\n\t\t\tfrom tcel_regra_preco_consig_item a,\n\t\t\t\ttcel_regra_preco_item_valor b\n\t\t\twhere a.cd_estabelecimento = cd_estabelecimento_p\n\t\t\tand a.cd_fornecedor = cd_fornecedor_consignado_p\n\t\t\tand a.cd_convenio = cd_convenio_p\n\t\t\tand a.cd_categoria = cd_categoria_p or nvl(cd_categoria_p,0) = 0\n\t\t\tand a.nr_sequencia = b.nr_seq_regra\n\t\t\tand b.cd_material = cd_material_p;\n\t\t\n\t\tend if;\n\n\t\t/*Tabela de precos*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'T') then\n\n\t\t\tselect\tnvl(max(a.vl_preco_venda),0)\n\t\t\tinto\tvl_preco_tabela_w\n\t\t\tfrom\tpreco_material a\n\t\t\twhere\ta.cd_material\t\t= cd_material_p\n\t\t\tand\ta.cd_estabelecimento\t= cd_estabelecimento_p\n\t\t\tand\ta.cd_cgc_fornecedor\t= cd_fornecedor_consignado_p\n\t\t\tand\ta.cd_tab_preco_mat\t= nvl(cd_tab_preco_mat_consig_w,a.cd_tab_preco_mat)\n\t\t\tand\ta.ie_situacao\t\t= 'A'\n\t\t\tand\ta.dt_inicio_vigencia\t= (\n\t\t\t\tselect\tmax(b.dt_inicio_vigencia)\n\t\t\t\tfrom\tpreco_material b\n\t\t\t\twhere\tb.cd_material\t\t= a.cd_material\n\t\t\t\tand\tb.cd_cgc_fornecedor\t= a.cd_cgc_fornecedor\n\t\t\t\tand\tb.cd_estabelecimento\t= a.cd_estabelecimento\n\t\t\t\tand\tb.ie_situacao\t\t= 'A'\n\t\t\t\tand\tb.cd_tab_preco_mat\t= nvl(cd_tab_preco_mat_consig_w,a.cd_tab_preco_mat));\n\n\t\t\tif\t(vl_preco_tabela_w <> 0) then\n\t\t\t\tvl_unitario_material_w \t:= vl_preco_tabela_w;\n\t\t\tend if;\n\n\t\t\tvl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w * qt_conv_estoque_consumo_w);\n\t\tend if;\n\n\t\t/*Preco convenio*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'P') then\n\n\t\t\tif\t(nvl(nr_seq_lote_fornec_p,0) <> 0) then\n\t\t\t\tselect\tmax(nr_seq_marca)\n\t\t\t\tinto\tnr_seq_marca_w\n\t\t\t\tfrom\tmaterial_lote_fornec\n\t\t\t\twhere\tnr_sequencia = nr_seq_lote_fornec_p;\n\t\t\tend if;\n\n\t\t\tdefine_preco_material(\tcd_estabelecimento_p,\t-- cd_estabelecimento_p\t\tnumber,\n\t\t\t\t\t\tcd_convenio_w,          -- cd_convenio_p          \tnumber,\n\t\t\t\t\t\tcd_categoria_p,         -- cd_categoria_p         \tvarchar2,\n\t\t\t\t\t\tdt_vigencia_p,          -- dt_vigencia_p          \tdate,\n\t\t\t\t\t\tcd_material_p,          -- cd_material_p          \tnumber,\n\t\t\t\t\t\t0,                      -- cd_tipo_acomodacao_p   \tnumber,\n\t\t\t\t\t\t0,                      -- ie_tipo_atendimento_p  \tnumber,\n\t\t\t\t\t\t0,                      -- cd_setor_atendimento_p \tnumber,\n\t\t\t\t\t\tnull,                   -- cd_cgc_fornecedor_p\t\tvarchar2,\n\t\t\t\t\t\t0,                      -- qt_idade_p\t\t\tnumber,\n\t\t\t\t\t\t0,                      -- nr_sequencia_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- cd_plano_p\t\t\tvarchar2,\n\t\t\t\t\t\tnull,                   -- cd_proc_referencia_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_origem_proc_p\t\tnumber,\n\t\t\t\t\t\tnr_seq_marca_w,         -- nr_seq_marca_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_clinica_p\t\t\tnumber,\n\t\t\t\t\t\tnull,                   -- nr_seq_classif_atend_p\tnumber,\n\t\t\t\t\t\tnr_atendimento_p,       -- nr_atendimento_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_vago_4_p\t\t\tvarchar2,\n\t\t\t\t\t\tvl_unitario_material_w, -- vl_material_p      \t out \tnumber,\n\t\t\t\t\t\tdt_utl_vigencia_w,      -- dt_ult_vigencia_p  \t out \tdate,\n\t\t\t\t\t\tcd_tab_preco_mat_w,     -- cd_tab_preco_mat_p \t out \tnumber,\n\t\t\t\t\t\tie_origem_preco_w,      -- ie_origem_preco_p  \t out \tnumber,\n\t\t\t\t\t\tnr_seq_bras_preco_w,    -- nr_seq_bras_preco_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_mat_bras_w,      -- nr_seq_mat_bras_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_conv_bras_w,     -- nr_seq_conv_bras_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_conv_simpro_w,   -- nr_seq_conv_simpro_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_mat_simpro_w,    -- nr_seq_mat_simpro_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_simpro_preco_w,  -- nr_seq_simpro_preco_p out\tnumber,\n\t\t\t\t\t\tnr_seq_ajuste_mat_w);   -- nr_seq_ajuste_mat_p\t out\tnumber\n\n\t\t\tvl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w * qt_conv_estoque_consumo_w);\n\t\tend if;\n\n\n\t\t/*Autorizacao (Valor do fornecedor)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'F') then\n\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\t\t\tselect\tnvl(max(c.vl_unitario_cotado),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a,\n\t\t\t\tmaterial_autor_cir_cot c\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand \tb.nr_sequencia \t= c.nr_sequencia\n\t\t\tand \tc.cd_cgc\t= cd_fornecedor_consignado_p\n\t\t\tand\t((nvl(a.nr_prescricao,0) = nvl(nr_prescricao_p,0)) or (nvl(nr_prescricao_p,0) = 0));\n\t\tend if;\n\n\n\t\t/*Autorizacao (Valor autorizado)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'A') then\n\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\n\t\t\tselect\tnvl(max(b.vl_unitario_material),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand\tb.ie_valor_informado = 'S';\n\t\tend if;\n\n\n\t\t/*Ultima compra*/\n\t\tif\t(nvl(vl_unitario_material_w, 0) = 0) and (ie_valor_consignado_w\t= 'U') then\n\t                select\tnvl(max(dividir((a.vl_total_item_nf - a.vl_desconto - vl_desconto_rateio + vl_frete + a.vl_despesa_acessoria + a.vl_seguro), a.qt_item_estoque)), 0)\n\t                into\tvl_unitario_material_w\n\t                from \tnota_fiscal_item a\n\t                where \ta.cd_material  = cd_material_p\n\t                and \ta.nr_sequencia =\n\t\t\t\t(\n\t\t                        select  max(i.nr_sequencia)\n\t\t                        from\tnota_fiscal_item    i,\n\t\t                                nota_fiscal         n,\n\t\t                                operacao_nota       p\n\t\t                        where\ti.nr_sequencia      =   n.nr_sequencia\n\t\t                        and     i.cd_material       =   cd_material_p\n\t\t                        and     nvl(p.ie_ultima_compra, 'S') = 'S'\n\t\t                        and\tp.cd_operacao_nf    =   n.cd_operacao_nf\n\t\t                        and\tn.ie_situacao       =   '1'\n\t\t                        and\t(\n\t\t                                    (\n                                                \tn.ie_tipo_nota = 'EF'\n\t\t                                        and n.cd_pessoa_fisica = cd_pessoa_fisica_fornec_p\n\t\t                                        and n.cd_cgc_emitente is null\n                                            \t    )\n\t\t                                    or (n.cd_cgc = cd_fornecedor_consignado_p)\n\t\t                                )\n\t                \t);\n\t\n\t                vl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w);\n\t\tend if;\n\n\n\t\t/*OPM com o procedimento SUS*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'O') then\n\n\t\t\tselect\tnvl(sus_obter_preco_proced(cd_estabelecimento_p, sysdate, 1, obter_proced_mat_esp_sus(cd_material_p), 7, 1),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tdual;\n\t\tend if;\n\n\t\t/*Autorizacao de materiais especiais*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w = 'E') then\n\n\t\t\tif\t(cd_convenio_w is null) then\n\t\t\t\tcd_convenio_w := obter_convenio_atendimento(nr_atendimento_p);\n\t\t\tend if;\n\t\t\tobter_preco_conv_mat_fornec(cd_convenio_w, cd_fornecedor_consignado_p, cd_material_p, dt_atualizacao_p, vl_unitario_material_w);\n\t\tend if;\n\n\t\t/*Autorizacao sem prescricao (Valor do fornecedor)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'D') then\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\t\t\tselect\tnvl(max(c.vl_unitario_cotado),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a,\n\t\t\t\tmaterial_autor_cir_cot c\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand \tb.nr_sequencia \t= c.nr_sequencia\n\t\t\tand \tc.cd_cgc\t= cd_fornecedor_consignado_p;\n\t\tend if;\n        \n        /* Contrato */\n        if (nvl(pkg_i18n.get_user_locale, 'pt_BR') = 'es_MX') and(nvl(vl_unitario_material_w, 0) = 0) and\n            (ie_valor_consignado_w = 'C') and (cd_pessoa_fisica_fornec_p is not null) then\n            begin\n               select    nvl(c.vl_saldo_total, c.vl_pagto)\n               into      vl_unitario_material_w\n               from      contrato            a,\n                         contrato_regra_nf   c\n               where     a.nr_sequencia = c.nr_seq_contrato\n               and       a.cd_pessoa_contratada = cd_pessoa_fisica_fornec_p\n               and       c.cd_material = cd_material_p\n               and       nvl(c.dt_inicio_vigencia, sysdate) <= sysdate\n               and       nvl(c.dt_fim_vigencia, sysdate) >= sysdate\n               and       nvl(c.ie_situacao, 'A') = 'A'\n               and       (c.cd_estab_regra = cd_estabelecimento_p or c.cd_estab_regra is null)\n               and       a.dt_inicio <= sysdate\n               and       nvl(dt_fim, sysdate) >= sysdate\n               and       a.ie_situacao = 'A'\n               and       (a.cd_estabelecimento = cd_estabelecimento_p\n                            or exists (select 1 from contrato_estab_adic b\n                                       where  a.nr_sequencia = b.nr_seq_contrato\n                                       and    b.cd_estab_adic = cd_estabelecimento_p))\n               and rownum = 1\n               order by a.nr_sequencia desc;\n            exception\n               when no_data_found or too_many_rows then\n                  vl_unitario_material_w := 0;\n            end;\n        elsif (nvl(vl_unitario_material_w, 0) = 0) and\n               (ie_valor_consignado_w = 'C') then\n            begin\n               select    nvl(c.vl_saldo_total, c.vl_pagto)\n               into      vl_unitario_material_w\n               from      contrato            a,\n                         contrato_regra_nf   c\n               where     a.nr_sequencia = c.nr_seq_contrato\n               and       a.cd_cgc_contratado = cd_fornecedor_consignado_p\n               and       c.cd_material = cd_material_p\n               and       nvl(c.dt_inicio_vigencia, sysdate) <= sysdate\n               and       nvl(c.dt_fim_vigencia, sysdate) >= sysdate\n               and       nvl(c.ie_situacao, 'A') = 'A'\n               and       (c.cd_estab_regra = cd_estabelecimento_p or c.cd_estab_regra is null)\n               and       a.dt_inicio <= sysdate\n               and       nvl(dt_fim, sysdate) >= sysdate\n               and       a.ie_situacao = 'A'\n               and       (a.cd_estabelecimento = cd_estabelecimento_p\n                            or exists (select 1 from contrato_estab_adic b\n                                       where  a.nr_sequencia = b.nr_seq_contrato\n                                       and    b.cd_estab_adic = cd_estabelecimento_p))\n               and rownum = 1\n               order by a.nr_sequencia desc;\n            exception\n               when no_data_found or too_many_rows then\n                  vl_unitario_material_w := 0;\n            end;\n          end if;\n        \n\t\tend;\n\tend loop;\n\tclose C02;\n\nend if;\n\nvl_unitario_material_p := vl_unitario_material_w;\n\nend tcel_obter_vl_mat_ordem_consig;\n/",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "14/01/2025 13:18:23",
      "old_value" : null
    }, {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 10145423,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIPTOGRAFIA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "DS_LAYER",
      "data_type" : "VARCHAR2",
      "new_value" : "CORE.TECHCELL",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 700039,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "b95b724f-a9a4-4966-acb3-844c5f36a9d4"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG",
      "old_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ {
      "column_name" : "IE_MEMORIA",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : null,
      "old_value" : "24/01/2025 12:53:18"
    }, {
      "column_name" : "IE_GERAR_SCRIPT",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : "S"
    }, {
      "column_name" : "IE_CRIPTOGRAFIA",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 700040,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "bde748ef-c2a6-492e-b551-92cfb236b7b1"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG",
      "old_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 700041,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "8e6a1819-fd13-4ec0-81d2-628de382c778"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG",
      "old_value" : null
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "IE_TIPO_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "PROCEDURE",
      "old_value" : null
    }, {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG",
      "old_value" : null
    }, {
      "column_name" : "IE_MEMORIA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "14/01/2025 13:53:03",
      "old_value" : null
    }, {
      "column_name" : "DS_APLICACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "Tasy",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "IE_GERAR_SCRIPT",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : "S"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : null
    }, {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tnr_seq_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber,\n\t\t\tdt_atualizacao_p in date) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect vl_unitario_material\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_seq_prescricao_p;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  dt_atualizacao_p,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "14/01/2025 13:53:03",
      "old_value" : null
    }, {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 10145440,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIPTOGRAFIA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "DS_LAYER",
      "data_type" : "VARCHAR2",
      "new_value" : "CORE.TECHCELL",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500042,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "e8b1a211-a8a8-4125-990a-d1c3cc087006"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGORCO",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NR_SEQUENCIA",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "VL_DEFAULT",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 1,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "QT_DECIMAIS",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NR_SEQUENCIA",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 10,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "26/09/2002 16:37:21",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO_PAI",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "QT_SEQ_INICIO",
      "data_type" : "NUMBER",
      "new_value" : 1,
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGORCO",
      "old_value" : null
    }, {
      "column_name" : "CD_DOMINIO",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "QT_SEQ_INCREMENTO",
      "data_type" : "NUMBER",
      "new_value" : 1,
      "old_value" : null
    }, {
      "column_name" : "DS_VALORES",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "NUMBER",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "14/01/2025 14:29:54",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "QT_CACHE",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 557610,
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_VALORES",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "NR_SEQ_DIC_OBJETO",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "IE_INFORMACAO_SENSIVEL",
      "data_type" : "VARCHAR2",
      "new_value" : "",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500043,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO_CUSTOM",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "13fd5645-33e9-4737-bb7b-dec999e7c13f"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "REGRA_ORDEM_CONSIGNADO",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "IE_APROVAR_OC_REPOSICAO",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "14/01/2025 14:30:00",
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_TABLE_REF",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGORCO",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 1,
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "IE_APROVAR_OC_REPOSICAO",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "VARCHAR2",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 1,
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "REGRA_ORDEM_CONSIGNADO",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 500044,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "TABELA_ATRIBUTO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "0c9ea2d6-326a-4234-ae66-a8520707b9cd"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGORCO",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "IE_APROVAR_OC_REPOSICAO",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "NR_SEQUENCIA_CRIACAO",
      "data_type" : "NUMBER",
      "new_value" : 903,
      "old_value" : null
    }, {
      "column_name" : "IE_OBRIGATORIO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_ALTERAR",
      "data_type" : "VARCHAR2",
      "new_value" : "M",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "IE_APROVAR_OC_REPOSICAO",
      "old_value" : null
    }, {
      "column_name" : "QT_TAMANHO",
      "data_type" : "NUMBER",
      "new_value" : 1,
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "14/01/2025 14:30:02",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESCRICAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_EXCLUSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "NM_TABELA",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_REGORCO",
      "old_value" : null
    }, {
      "column_name" : "DS_VALORES",
      "data_type" : "VARCHAR2",
      "new_value" : "12L",
      "old_value" : null
    }, {
      "column_name" : "IE_TIPO_ATRIBUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "VARCHAR2",
      "old_value" : null
    }, {
      "column_name" : "IE_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_TABSTOP",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "14/01/2025 14:30:02",
      "old_value" : null
    }, {
      "column_name" : "IE_CONVERTE_NEGATIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LOG_UPDATE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_ATUALIZAR_VERSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CRIAR_DESC_FK",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_UNIDADE_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_UNID_MEDIDA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DBL_CLICK_READONLY",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_DEFAULT_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_DESC",
      "data_type" : "NUMBER",
      "new_value" : 557610,
      "old_value" : null
    }, {
      "column_name" : "IE_INFORMACAO_SENSIVEL",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 700045,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "80bfa871-4acc-4826-ab09-2ce80968629c"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG",
      "old_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace\nprocedure tcel_obter_vl_mat_ordem_consig(\n    cd_estabelecimento_p        in  material_lote_fornec.cd_estabelecimento%type,\n    cd_fornecedor_consignado_p\tin  nota_fiscal.cd_cgc_emitente%type,\n    cd_pessoa_fisica_fornec_p   in  nota_fiscal.cd_pessoa_fisica%type default null,\n    cd_material_p               in  material.cd_material%type,\n    nr_ordem_compra_p           in  ordem_compra.nr_ordem_compra%type,\n    nr_prescricao_p             in  material_atend_paciente.nr_prescricao%type,\n    nr_atendimento_p            in  material_atend_paciente.nr_atendimento%type,\n    ie_tipo_atendimento_p       in  regra_valor_ordem_consig.ie_valor_consignado%type,\n    nr_seq_agenda_p             in  agenda_paciente.nr_sequencia%type,\n    dt_atualizacao_p            in  nota_fiscal.dt_atualizacao%type,\n    nr_seq_lote_fornec_p        in  material_lote_fornec.nr_sequencia%type,\n    cd_convenio_p               in  material_atend_paciente.cd_convenio%type,\n    cd_categoria_p              in  atendimento_paciente_v.cd_categoria%type,\n    dt_vigencia_p               in  nota_fiscal_item.dt_validade%type,\n    vl_unitario_material_p      out nota_fiscal_item.vl_unitario_item_nf%type\n) is\n\n\nnr_sequencia_w\t\t\t\tregra_valor_ordem_consig.nr_sequencia%type;\ncd_grupo_material_w\t\t\tgrupo_material.cd_grupo_material%type;\ncd_subgrupo_material_w\t\t\tsubgrupo_material.cd_subgrupo_material%type;\ncd_classe_material_w\t\t\tclasse_material.cd_classe_material%type;\nie_valor_consignado_w\t\t\tregra_preco_ordem_consig.ie_valor_consignado%type := 'N';\nvl_unitario_material_w\t\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_preco_tabela_w\t\t\tpreco_material.vl_preco_venda%type;\nqt_conv_compra_estoque_w\t\tmaterial.qt_conv_compra_estoque%type;\nqt_conv_estoque_consumo_w\t\tmaterial.qt_conv_estoque_consumo%type;\ncd_tab_preco_mat_consig_w\t\tparametro_compras.cd_tab_preco_mat_consig%type;\ndt_utl_vigencia_w\t\t\tdate;\ncd_tab_preco_mat_w\t\t\tnumber(10,0);\nie_origem_preco_w\t\t\tnumber(10,0);\nnr_seq_bras_preco_w\t\t\tnumber(10,0);\nnr_seq_mat_bras_w\t\t\tnumber(10,0);\nnr_seq_conv_bras_w\t\t\tnumber(10,0);\nnr_seq_conv_simpro_w\t\t\tnumber(10,0);\nnr_seq_mat_simpro_w\t\t\tnumber(10,0);\nnr_seq_simpro_preco_w\t\t\tnumber(10,0);\nnr_seq_ajuste_mat_w\t\t\tnumber(10,0);\nnr_seq_marca_w\t\t\t\tmarca.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tcirurgia.nr_cirurgia%type;\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\ncd_convenio_w\t\t\t\tconvenio.cd_convenio%type;\nie_preco_sus_oc_w\t\t\tvarchar2(1);\ncd_procedimento_w\t\t\tnumber(15);\nnr_proc_interno_w procedimento.nr_proc_interno%type;\n\ncursor c01 is\nselect\tnr_sequencia\nfrom\tregra_valor_ordem_consig\nwhere\tcd_estabelecimento = cd_estabelecimento_p\nand\tnvl(cd_grupo_material, cd_grupo_material_w)\t\t= cd_grupo_material_w\nand\tnvl(cd_subgrupo_material, cd_subgrupo_material_w)\t= cd_subgrupo_material_w\nand\tnvl(cd_classe_material, cd_classe_material_w)\t\t= cd_classe_material_w\nand\t(nvl(cd_material, cd_material_p) \t\t\t= cd_material_p or cd_material_p = 0)\nand\t((nvl(cd_cnpj, cd_fornecedor_consignado_p)\t\t= cd_fornecedor_consignado_p) or (cd_cnpj is null))\norder by\n\tnvl(cd_material, 0),\n\tnvl(cd_classe_material, 0),\n\tnvl(cd_subgrupo_material, 0),\n\tnvl(cd_grupo_material, 0),\n\tnvl(cd_cnpj, 'xxx');\n\ncursor c02 is\nselect\tie_valor_consignado\nfrom\tregra_preco_ordem_consig\nwhere\tnr_seq_regra = nr_sequencia_w\norder by nr_seq_prioridade;\n\nbegin\n\nnr_seq_agenda_w := nvl(nr_seq_agenda_p,0);\ncd_convenio_w\t:= cd_convenio_p;\n\nselect\ta.cd_grupo_material,\n\ta.cd_subgrupo_material,\n\ta.cd_classe_material\ninto\tcd_grupo_material_w,\n\tcd_subgrupo_material_w,\n\tcd_classe_material_w\nfrom\testrutura_material_v a\nwhere\ta.cd_material = cd_material_p;\n\nselect\tqt_conv_compra_estoque,\n\tqt_conv_estoque_consumo\ninto \tqt_conv_compra_estoque_w,\n\tqt_conv_estoque_consumo_w\nfrom \tmaterial\nwhere \tcd_material = nvl(cd_material_p,0);\n\nselect\tcd_tab_preco_mat_consig\ninto\tcd_tab_preco_mat_consig_w\nfrom\tparametro_compras\nwhere\tcd_estabelecimento = cd_estabelecimento_p;\n\nopen C01;\nloop\nfetch C01 into\n\tnr_sequencia_w;\nexit when C01%notfound;\n\tbegin\n\t/*Busca a sequencia da regra de preco de acordo com as informacoes do material*/\n\tnr_sequencia_w := nr_sequencia_w;\n\tend;\nend loop;\nclose C01;\n\nif\t(nr_sequencia_w > 0) then\n\n\t/*Esse cursor serve para bucar o preco conforme a regra, seguindo a prioridade.\n\tQuando ele encontra o valor, ele sai fora do cursor. Enquanto o valor e zero, ele vai tentando buscar o preco*/\n\topen C02;\n\tloop\n\tfetch C02 into\n\t\tie_valor_consignado_w;\n\texit when C02%notfound or vl_unitario_material_w > 0;\n\t\tbegin\n\t\t\n\t\t/*Tabela de Oportunidades*/\n\t\t\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'V') then\n\t\t\t\n\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\tinto\tnr_cirurgia_w\n\t\t\tfrom\tordem_compra\n\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\n\t\t\t\tselect\tnvl(max(cd_procedimento_princ),0)\n\t\t\t\tinto\tcd_procedimento_w\n\t\t\t\tfrom\tcirurgia a\n\t\t\t\twhere\ta.nr_cirurgia\t\t= nr_cirurgia_w;\n\t\t\t\t\n\t\t\t\tif\t(cd_procedimento_w > 0) then\n\t\t\t\t\n\t\t\t\t\tselect nvl(max(nr_sequencia),0)\n\t\t\t\t\tinto   nr_proc_interno_w\n\t\t\t\t\tfrom   proc_interno\n\t\t\t\t\twhere  cd_procedimento = cd_procedimento_w;\n\t\t\t\t\t\n\t\t\t\t\tif\t(nr_proc_interno_w > 0) then\n\t\t\t\n\t\t\t\t\t\tselect b.vl_unitario_item\n\t\t\t\t\t\tinto vl_unitario_material_w\n\t\t\t\t\t\tfrom tcel_regra_preco_consig_item a,\n\t\t\t\t\t\t\ttcel_regra_preco_item_valor b\n\t\t\t\t\t\twhere a.cd_estabelecimento = cd_estabelecimento_p\n\t\t\t\t\t\tand a.cd_procedimento = nr_proc_interno_w\n\t\t\t\t\t\tand a.cd_fornecedor = cd_fornecedor_consignado_p\n\t\t\t\t\t\tand a.cd_convenio = cd_convenio_p\n\t\t\t\t\t\tand a.cd_categoria = cd_categoria_p or nvl(cd_categoria_p,0) = 0\n\t\t\t\t\t\tand a.nr_sequencia = b.nr_seq_regra\n\t\t\t\t\t\tand b.cd_material = cd_material_p;\n\n\t\t\t\t\tend if;\n\t\t\t\tend if;\n\t\t\tend if;\t\t\n\t\tend if;\n\n\t\t/*Tabela de precos*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'T') then\n\n\t\t\tselect\tnvl(max(a.vl_preco_venda),0)\n\t\t\tinto\tvl_preco_tabela_w\n\t\t\tfrom\tpreco_material a\n\t\t\twhere\ta.cd_material\t\t= cd_material_p\n\t\t\tand\ta.cd_estabelecimento\t= cd_estabelecimento_p\n\t\t\tand\ta.cd_cgc_fornecedor\t= cd_fornecedor_consignado_p\n\t\t\tand\ta.cd_tab_preco_mat\t= nvl(cd_tab_preco_mat_consig_w,a.cd_tab_preco_mat)\n\t\t\tand\ta.ie_situacao\t\t= 'A'\n\t\t\tand\ta.dt_inicio_vigencia\t= (\n\t\t\t\tselect\tmax(b.dt_inicio_vigencia)\n\t\t\t\tfrom\tpreco_material b\n\t\t\t\twhere\tb.cd_material\t\t= a.cd_material\n\t\t\t\tand\tb.cd_cgc_fornecedor\t= a.cd_cgc_fornecedor\n\t\t\t\tand\tb.cd_estabelecimento\t= a.cd_estabelecimento\n\t\t\t\tand\tb.ie_situacao\t\t= 'A'\n\t\t\t\tand\tb.cd_tab_preco_mat\t= nvl(cd_tab_preco_mat_consig_w,a.cd_tab_preco_mat));\n\n\t\t\tif\t(vl_preco_tabela_w <> 0) then\n\t\t\t\tvl_unitario_material_w \t:= vl_preco_tabela_w;\n\t\t\tend if;\n\n\t\t\tvl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w * qt_conv_estoque_consumo_w);\n\t\tend if;\n\n\t\t/*Preco convenio*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'P') then\n\n\t\t\tif\t(nvl(nr_seq_lote_fornec_p,0) <> 0) then\n\t\t\t\tselect\tmax(nr_seq_marca)\n\t\t\t\tinto\tnr_seq_marca_w\n\t\t\t\tfrom\tmaterial_lote_fornec\n\t\t\t\twhere\tnr_sequencia = nr_seq_lote_fornec_p;\n\t\t\tend if;\n\n\t\t\tdefine_preco_material(\tcd_estabelecimento_p,\t-- cd_estabelecimento_p\t\tnumber,\n\t\t\t\t\t\tcd_convenio_w,          -- cd_convenio_p          \tnumber,\n\t\t\t\t\t\tcd_categoria_p,         -- cd_categoria_p         \tvarchar2,\n\t\t\t\t\t\tdt_vigencia_p,          -- dt_vigencia_p          \tdate,\n\t\t\t\t\t\tcd_material_p,          -- cd_material_p          \tnumber,\n\t\t\t\t\t\t0,                      -- cd_tipo_acomodacao_p   \tnumber,\n\t\t\t\t\t\t0,                      -- ie_tipo_atendimento_p  \tnumber,\n\t\t\t\t\t\t0,                      -- cd_setor_atendimento_p \tnumber,\n\t\t\t\t\t\tnull,                   -- cd_cgc_fornecedor_p\t\tvarchar2,\n\t\t\t\t\t\t0,                      -- qt_idade_p\t\t\tnumber,\n\t\t\t\t\t\t0,                      -- nr_sequencia_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- cd_plano_p\t\t\tvarchar2,\n\t\t\t\t\t\tnull,                   -- cd_proc_referencia_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_origem_proc_p\t\tnumber,\n\t\t\t\t\t\tnr_seq_marca_w,         -- nr_seq_marca_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_clinica_p\t\t\tnumber,\n\t\t\t\t\t\tnull,                   -- nr_seq_classif_atend_p\tnumber,\n\t\t\t\t\t\tnr_atendimento_p,       -- nr_atendimento_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_vago_4_p\t\t\tvarchar2,\n\t\t\t\t\t\tvl_unitario_material_w, -- vl_material_p      \t out \tnumber,\n\t\t\t\t\t\tdt_utl_vigencia_w,      -- dt_ult_vigencia_p  \t out \tdate,\n\t\t\t\t\t\tcd_tab_preco_mat_w,     -- cd_tab_preco_mat_p \t out \tnumber,\n\t\t\t\t\t\tie_origem_preco_w,      -- ie_origem_preco_p  \t out \tnumber,\n\t\t\t\t\t\tnr_seq_bras_preco_w,    -- nr_seq_bras_preco_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_mat_bras_w,      -- nr_seq_mat_bras_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_conv_bras_w,     -- nr_seq_conv_bras_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_conv_simpro_w,   -- nr_seq_conv_simpro_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_mat_simpro_w,    -- nr_seq_mat_simpro_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_simpro_preco_w,  -- nr_seq_simpro_preco_p out\tnumber,\n\t\t\t\t\t\tnr_seq_ajuste_mat_w);   -- nr_seq_ajuste_mat_p\t out\tnumber\n\n\t\t\tvl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w * qt_conv_estoque_consumo_w);\n\t\tend if;\n\n\n\t\t/*Autorizacao (Valor do fornecedor)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'F') then\n\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\t\t\tselect\tnvl(max(c.vl_unitario_cotado),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a,\n\t\t\t\tmaterial_autor_cir_cot c\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand \tb.nr_sequencia \t= c.nr_sequencia\n\t\t\tand \tc.cd_cgc\t= cd_fornecedor_consignado_p\n\t\t\tand\t((nvl(a.nr_prescricao,0) = nvl(nr_prescricao_p,0)) or (nvl(nr_prescricao_p,0) = 0));\n\t\tend if;\n\n\n\t\t/*Autorizacao (Valor autorizado)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'A') then\n\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\n\t\t\tselect\tnvl(max(b.vl_unitario_material),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand\tb.ie_valor_informado = 'S';\n\t\tend if;\n\n\n\t\t/*Ultima compra*/\n\t\tif\t(nvl(vl_unitario_material_w, 0) = 0) and (ie_valor_consignado_w\t= 'U') then\n\t                select\tnvl(max(dividir((a.vl_total_item_nf - a.vl_desconto - vl_desconto_rateio + vl_frete + a.vl_despesa_acessoria + a.vl_seguro), a.qt_item_estoque)), 0)\n\t                into\tvl_unitario_material_w\n\t                from \tnota_fiscal_item a\n\t                where \ta.cd_material  = cd_material_p\n\t                and \ta.nr_sequencia =\n\t\t\t\t(\n\t\t                        select  max(i.nr_sequencia)\n\t\t                        from\tnota_fiscal_item    i,\n\t\t                                nota_fiscal         n,\n\t\t                                operacao_nota       p\n\t\t                        where\ti.nr_sequencia      =   n.nr_sequencia\n\t\t                        and     i.cd_material       =   cd_material_p\n\t\t                        and     nvl(p.ie_ultima_compra, 'S') = 'S'\n\t\t                        and\tp.cd_operacao_nf    =   n.cd_operacao_nf\n\t\t                        and\tn.ie_situacao       =   '1'\n\t\t                        and\t(\n\t\t                                    (\n                                                \tn.ie_tipo_nota = 'EF'\n\t\t                                        and n.cd_pessoa_fisica = cd_pessoa_fisica_fornec_p\n\t\t                                        and n.cd_cgc_emitente is null\n                                            \t    )\n\t\t                                    or (n.cd_cgc = cd_fornecedor_consignado_p)\n\t\t                                )\n\t                \t);\n\t\n\t                vl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w);\n\t\tend if;\n\n\n\t\t/*OPM com o procedimento SUS*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'O') then\n\n\t\t\tselect\tnvl(sus_obter_preco_proced(cd_estabelecimento_p, sysdate, 1, obter_proced_mat_esp_sus(cd_material_p), 7, 1),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tdual;\n\t\tend if;\n\n\t\t/*Autorizacao de materiais especiais*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w = 'E') then\n\n\t\t\tif\t(cd_convenio_w is null) then\n\t\t\t\tcd_convenio_w := obter_convenio_atendimento(nr_atendimento_p);\n\t\t\tend if;\n\t\t\tobter_preco_conv_mat_fornec(cd_convenio_w, cd_fornecedor_consignado_p, cd_material_p, dt_atualizacao_p, vl_unitario_material_w);\n\t\tend if;\n\n\t\t/*Autorizacao sem prescricao (Valor do fornecedor)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'D') then\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\t\t\tselect\tnvl(max(c.vl_unitario_cotado),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a,\n\t\t\t\tmaterial_autor_cir_cot c\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand \tb.nr_sequencia \t= c.nr_sequencia\n\t\t\tand \tc.cd_cgc\t= cd_fornecedor_consignado_p;\n\t\tend if;\n        \n        /* Contrato */\n        if (nvl(pkg_i18n.get_user_locale, 'pt_BR') = 'es_MX') and(nvl(vl_unitario_material_w, 0) = 0) and\n            (ie_valor_consignado_w = 'C') and (cd_pessoa_fisica_fornec_p is not null) then\n            begin\n               select    nvl(c.vl_saldo_total, c.vl_pagto)\n               into      vl_unitario_material_w\n               from      contrato            a,\n                         contrato_regra_nf   c\n               where     a.nr_sequencia = c.nr_seq_contrato\n               and       a.cd_pessoa_contratada = cd_pessoa_fisica_fornec_p\n               and       c.cd_material = cd_material_p\n               and       nvl(c.dt_inicio_vigencia, sysdate) <= sysdate\n               and       nvl(c.dt_fim_vigencia, sysdate) >= sysdate\n               and       nvl(c.ie_situacao, 'A') = 'A'\n               and       (c.cd_estab_regra = cd_estabelecimento_p or c.cd_estab_regra is null)\n               and       a.dt_inicio <= sysdate\n               and       nvl(dt_fim, sysdate) >= sysdate\n               and       a.ie_situacao = 'A'\n               and       (a.cd_estabelecimento = cd_estabelecimento_p\n                            or exists (select 1 from contrato_estab_adic b\n                                       where  a.nr_sequencia = b.nr_seq_contrato\n                                       and    b.cd_estab_adic = cd_estabelecimento_p))\n               and rownum = 1\n               order by a.nr_sequencia desc;\n            exception\n               when no_data_found or too_many_rows then\n                  vl_unitario_material_w := 0;\n            end;\n        elsif (nvl(vl_unitario_material_w, 0) = 0) and\n               (ie_valor_consignado_w = 'C') then\n            begin\n               select    nvl(c.vl_saldo_total, c.vl_pagto)\n               into      vl_unitario_material_w\n               from      contrato            a,\n                         contrato_regra_nf   c\n               where     a.nr_sequencia = c.nr_seq_contrato\n               and       a.cd_cgc_contratado = cd_fornecedor_consignado_p\n               and       c.cd_material = cd_material_p\n               and       nvl(c.dt_inicio_vigencia, sysdate) <= sysdate\n               and       nvl(c.dt_fim_vigencia, sysdate) >= sysdate\n               and       nvl(c.ie_situacao, 'A') = 'A'\n               and       (c.cd_estab_regra = cd_estabelecimento_p or c.cd_estab_regra is null)\n               and       a.dt_inicio <= sysdate\n               and       nvl(dt_fim, sysdate) >= sysdate\n               and       a.ie_situacao = 'A'\n               and       (a.cd_estabelecimento = cd_estabelecimento_p\n                            or exists (select 1 from contrato_estab_adic b\n                                       where  a.nr_sequencia = b.nr_seq_contrato\n                                       and    b.cd_estab_adic = cd_estabelecimento_p))\n               and rownum = 1\n               order by a.nr_sequencia desc;\n            exception\n               when no_data_found or too_many_rows then\n                  vl_unitario_material_w := 0;\n            end;\n          end if;\n        \n\t\tend;\n\tend loop;\n\tclose C02;\n\nend if;\n\nvl_unitario_material_p := vl_unitario_material_w;\n\nend tcel_obter_vl_mat_ordem_consig;\n/",
      "old_value" : "create or replace\nprocedure tcel_obter_vl_mat_ordem_consig(\n    cd_estabelecimento_p        in  material_lote_fornec.cd_estabelecimento%type,\n    cd_fornecedor_consignado_p\tin  nota_fiscal.cd_cgc_emitente%type,\n    cd_pessoa_fisica_fornec_p   in  nota_fiscal.cd_pessoa_fisica%type default null,\n    cd_material_p               in  material.cd_material%type,\n    nr_ordem_compra_p           in  ordem_compra.nr_ordem_compra%type,\n    nr_prescricao_p             in  material_atend_paciente.nr_prescricao%type,\n    nr_atendimento_p            in  material_atend_paciente.nr_atendimento%type,\n    ie_tipo_atendimento_p       in  regra_valor_ordem_consig.ie_valor_consignado%type,\n    nr_seq_agenda_p             in  agenda_paciente.nr_sequencia%type,\n    dt_atualizacao_p            in  nota_fiscal.dt_atualizacao%type,\n    nr_seq_lote_fornec_p        in  material_lote_fornec.nr_sequencia%type,\n    cd_convenio_p               in  material_atend_paciente.cd_convenio%type,\n    cd_categoria_p              in  atendimento_paciente_v.cd_categoria%type,\n    dt_vigencia_p               in  nota_fiscal_item.dt_validade%type,\n    vl_unitario_material_p      out nota_fiscal_item.vl_unitario_item_nf%type\n) is\n\n\nnr_sequencia_w\t\t\t\tregra_valor_ordem_consig.nr_sequencia%type;\ncd_grupo_material_w\t\t\tgrupo_material.cd_grupo_material%type;\ncd_subgrupo_material_w\t\t\tsubgrupo_material.cd_subgrupo_material%type;\ncd_classe_material_w\t\t\tclasse_material.cd_classe_material%type;\nie_valor_consignado_w\t\t\tregra_preco_ordem_consig.ie_valor_consignado%type := 'N';\nvl_unitario_material_w\t\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_preco_tabela_w\t\t\tpreco_material.vl_preco_venda%type;\nqt_conv_compra_estoque_w\t\tmaterial.qt_conv_compra_estoque%type;\nqt_conv_estoque_consumo_w\t\tmaterial.qt_conv_estoque_consumo%type;\ncd_tab_preco_mat_consig_w\t\tparametro_compras.cd_tab_preco_mat_consig%type;\ndt_utl_vigencia_w\t\t\tdate;\ncd_tab_preco_mat_w\t\t\tnumber(10,0);\nie_origem_preco_w\t\t\tnumber(10,0);\nnr_seq_bras_preco_w\t\t\tnumber(10,0);\nnr_seq_mat_bras_w\t\t\tnumber(10,0);\nnr_seq_conv_bras_w\t\t\tnumber(10,0);\nnr_seq_conv_simpro_w\t\t\tnumber(10,0);\nnr_seq_mat_simpro_w\t\t\tnumber(10,0);\nnr_seq_simpro_preco_w\t\t\tnumber(10,0);\nnr_seq_ajuste_mat_w\t\t\tnumber(10,0);\nnr_seq_marca_w\t\t\t\tmarca.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tcirurgia.nr_cirurgia%type;\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\ncd_convenio_w\t\t\t\tconvenio.cd_convenio%type;\nie_preco_sus_oc_w\t\t\tvarchar2(1);\n\ncursor c01 is\nselect\tnr_sequencia\nfrom\tregra_valor_ordem_consig\nwhere\tcd_estabelecimento = cd_estabelecimento_p\nand\tnvl(cd_grupo_material, cd_grupo_material_w)\t\t= cd_grupo_material_w\nand\tnvl(cd_subgrupo_material, cd_subgrupo_material_w)\t= cd_subgrupo_material_w\nand\tnvl(cd_classe_material, cd_classe_material_w)\t\t= cd_classe_material_w\nand\t(nvl(cd_material, cd_material_p) \t\t\t= cd_material_p or cd_material_p = 0)\nand\t((nvl(cd_cnpj, cd_fornecedor_consignado_p)\t\t= cd_fornecedor_consignado_p) or (cd_cnpj is null))\norder by\n\tnvl(cd_material, 0),\n\tnvl(cd_classe_material, 0),\n\tnvl(cd_subgrupo_material, 0),\n\tnvl(cd_grupo_material, 0),\n\tnvl(cd_cnpj, 'xxx');\n\ncursor c02 is\nselect\tie_valor_consignado\nfrom\tregra_preco_ordem_consig\nwhere\tnr_seq_regra = nr_sequencia_w\norder by nr_seq_prioridade;\n\nbegin\n\nnr_seq_agenda_w := nvl(nr_seq_agenda_p,0);\ncd_convenio_w\t:= cd_convenio_p;\n\nselect\ta.cd_grupo_material,\n\ta.cd_subgrupo_material,\n\ta.cd_classe_material\ninto\tcd_grupo_material_w,\n\tcd_subgrupo_material_w,\n\tcd_classe_material_w\nfrom\testrutura_material_v a\nwhere\ta.cd_material = cd_material_p;\n\nselect\tqt_conv_compra_estoque,\n\tqt_conv_estoque_consumo\ninto \tqt_conv_compra_estoque_w,\n\tqt_conv_estoque_consumo_w\nfrom \tmaterial\nwhere \tcd_material = nvl(cd_material_p,0);\n\nselect\tcd_tab_preco_mat_consig\ninto\tcd_tab_preco_mat_consig_w\nfrom\tparametro_compras\nwhere\tcd_estabelecimento = cd_estabelecimento_p;\n\nopen C01;\nloop\nfetch C01 into\n\tnr_sequencia_w;\nexit when C01%notfound;\n\tbegin\n\t/*Busca a sequencia da regra de preco de acordo com as informacoes do material*/\n\tnr_sequencia_w := nr_sequencia_w;\n\tend;\nend loop;\nclose C01;\n\nif\t(nr_sequencia_w > 0) then\n\n\t/*Esse cursor serve para bucar o preco conforme a regra, seguindo a prioridade.\n\tQuando ele encontra o valor, ele sai fora do cursor. Enquanto o valor e zero, ele vai tentando buscar o preco*/\n\topen C02;\n\tloop\n\tfetch C02 into\n\t\tie_valor_consignado_w;\n\texit when C02%notfound or vl_unitario_material_w > 0;\n\t\tbegin\n\t\t\n\t\t/*Acordo Fornecedor*/\n\t\t\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'T') then\n\t\t\t\n\t\t\tselect b.vl_unitario_item\n\t\t\tinto vl_unitario_material_w\n\t\t\tfrom tcel_regra_preco_consig_item a,\n\t\t\t\ttcel_regra_preco_item_valor b\n\t\t\twhere a.cd_estabelecimento = cd_estabelecimento_p\n\t\t\tand a.cd_fornecedor = cd_fornecedor_consignado_p\n\t\t\tand a.cd_convenio = cd_convenio_p\n\t\t\tand a.cd_categoria = cd_categoria_p or nvl(cd_categoria_p,0) = 0\n\t\t\tand a.nr_sequencia = b.nr_seq_regra\n\t\t\tand b.cd_material = cd_material_p;\n\t\t\n\t\tend if;\n\n\t\t/*Tabela de precos*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'T') then\n\n\t\t\tselect\tnvl(max(a.vl_preco_venda),0)\n\t\t\tinto\tvl_preco_tabela_w\n\t\t\tfrom\tpreco_material a\n\t\t\twhere\ta.cd_material\t\t= cd_material_p\n\t\t\tand\ta.cd_estabelecimento\t= cd_estabelecimento_p\n\t\t\tand\ta.cd_cgc_fornecedor\t= cd_fornecedor_consignado_p\n\t\t\tand\ta.cd_tab_preco_mat\t= nvl(cd_tab_preco_mat_consig_w,a.cd_tab_preco_mat)\n\t\t\tand\ta.ie_situacao\t\t= 'A'\n\t\t\tand\ta.dt_inicio_vigencia\t= (\n\t\t\t\tselect\tmax(b.dt_inicio_vigencia)\n\t\t\t\tfrom\tpreco_material b\n\t\t\t\twhere\tb.cd_material\t\t= a.cd_material\n\t\t\t\tand\tb.cd_cgc_fornecedor\t= a.cd_cgc_fornecedor\n\t\t\t\tand\tb.cd_estabelecimento\t= a.cd_estabelecimento\n\t\t\t\tand\tb.ie_situacao\t\t= 'A'\n\t\t\t\tand\tb.cd_tab_preco_mat\t= nvl(cd_tab_preco_mat_consig_w,a.cd_tab_preco_mat));\n\n\t\t\tif\t(vl_preco_tabela_w <> 0) then\n\t\t\t\tvl_unitario_material_w \t:= vl_preco_tabela_w;\n\t\t\tend if;\n\n\t\t\tvl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w * qt_conv_estoque_consumo_w);\n\t\tend if;\n\n\t\t/*Preco convenio*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'P') then\n\n\t\t\tif\t(nvl(nr_seq_lote_fornec_p,0) <> 0) then\n\t\t\t\tselect\tmax(nr_seq_marca)\n\t\t\t\tinto\tnr_seq_marca_w\n\t\t\t\tfrom\tmaterial_lote_fornec\n\t\t\t\twhere\tnr_sequencia = nr_seq_lote_fornec_p;\n\t\t\tend if;\n\n\t\t\tdefine_preco_material(\tcd_estabelecimento_p,\t-- cd_estabelecimento_p\t\tnumber,\n\t\t\t\t\t\tcd_convenio_w,          -- cd_convenio_p          \tnumber,\n\t\t\t\t\t\tcd_categoria_p,         -- cd_categoria_p         \tvarchar2,\n\t\t\t\t\t\tdt_vigencia_p,          -- dt_vigencia_p          \tdate,\n\t\t\t\t\t\tcd_material_p,          -- cd_material_p          \tnumber,\n\t\t\t\t\t\t0,                      -- cd_tipo_acomodacao_p   \tnumber,\n\t\t\t\t\t\t0,                      -- ie_tipo_atendimento_p  \tnumber,\n\t\t\t\t\t\t0,                      -- cd_setor_atendimento_p \tnumber,\n\t\t\t\t\t\tnull,                   -- cd_cgc_fornecedor_p\t\tvarchar2,\n\t\t\t\t\t\t0,                      -- qt_idade_p\t\t\tnumber,\n\t\t\t\t\t\t0,                      -- nr_sequencia_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- cd_plano_p\t\t\tvarchar2,\n\t\t\t\t\t\tnull,                   -- cd_proc_referencia_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_origem_proc_p\t\tnumber,\n\t\t\t\t\t\tnr_seq_marca_w,         -- nr_seq_marca_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_clinica_p\t\t\tnumber,\n\t\t\t\t\t\tnull,                   -- nr_seq_classif_atend_p\tnumber,\n\t\t\t\t\t\tnr_atendimento_p,       -- nr_atendimento_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_vago_4_p\t\t\tvarchar2,\n\t\t\t\t\t\tvl_unitario_material_w, -- vl_material_p      \t out \tnumber,\n\t\t\t\t\t\tdt_utl_vigencia_w,      -- dt_ult_vigencia_p  \t out \tdate,\n\t\t\t\t\t\tcd_tab_preco_mat_w,     -- cd_tab_preco_mat_p \t out \tnumber,\n\t\t\t\t\t\tie_origem_preco_w,      -- ie_origem_preco_p  \t out \tnumber,\n\t\t\t\t\t\tnr_seq_bras_preco_w,    -- nr_seq_bras_preco_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_mat_bras_w,      -- nr_seq_mat_bras_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_conv_bras_w,     -- nr_seq_conv_bras_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_conv_simpro_w,   -- nr_seq_conv_simpro_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_mat_simpro_w,    -- nr_seq_mat_simpro_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_simpro_preco_w,  -- nr_seq_simpro_preco_p out\tnumber,\n\t\t\t\t\t\tnr_seq_ajuste_mat_w);   -- nr_seq_ajuste_mat_p\t out\tnumber\n\n\t\t\tvl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w * qt_conv_estoque_consumo_w);\n\t\tend if;\n\n\n\t\t/*Autorizacao (Valor do fornecedor)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'F') then\n\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\t\t\tselect\tnvl(max(c.vl_unitario_cotado),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a,\n\t\t\t\tmaterial_autor_cir_cot c\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand \tb.nr_sequencia \t= c.nr_sequencia\n\t\t\tand \tc.cd_cgc\t= cd_fornecedor_consignado_p\n\t\t\tand\t((nvl(a.nr_prescricao,0) = nvl(nr_prescricao_p,0)) or (nvl(nr_prescricao_p,0) = 0));\n\t\tend if;\n\n\n\t\t/*Autorizacao (Valor autorizado)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'A') then\n\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\n\t\t\tselect\tnvl(max(b.vl_unitario_material),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand\tb.ie_valor_informado = 'S';\n\t\tend if;\n\n\n\t\t/*Ultima compra*/\n\t\tif\t(nvl(vl_unitario_material_w, 0) = 0) and (ie_valor_consignado_w\t= 'U') then\n\t                select\tnvl(max(dividir((a.vl_total_item_nf - a.vl_desconto - vl_desconto_rateio + vl_frete + a.vl_despesa_acessoria + a.vl_seguro), a.qt_item_estoque)), 0)\n\t                into\tvl_unitario_material_w\n\t                from \tnota_fiscal_item a\n\t                where \ta.cd_material  = cd_material_p\n\t                and \ta.nr_sequencia =\n\t\t\t\t(\n\t\t                        select  max(i.nr_sequencia)\n\t\t                        from\tnota_fiscal_item    i,\n\t\t                                nota_fiscal         n,\n\t\t                                operacao_nota       p\n\t\t                        where\ti.nr_sequencia      =   n.nr_sequencia\n\t\t                        and     i.cd_material       =   cd_material_p\n\t\t                        and     nvl(p.ie_ultima_compra, 'S') = 'S'\n\t\t                        and\tp.cd_operacao_nf    =   n.cd_operacao_nf\n\t\t                        and\tn.ie_situacao       =   '1'\n\t\t                        and\t(\n\t\t                                    (\n                                                \tn.ie_tipo_nota = 'EF'\n\t\t                                        and n.cd_pessoa_fisica = cd_pessoa_fisica_fornec_p\n\t\t                                        and n.cd_cgc_emitente is null\n                                            \t    )\n\t\t                                    or (n.cd_cgc = cd_fornecedor_consignado_p)\n\t\t                                )\n\t                \t);\n\t\n\t                vl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w);\n\t\tend if;\n\n\n\t\t/*OPM com o procedimento SUS*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'O') then\n\n\t\t\tselect\tnvl(sus_obter_preco_proced(cd_estabelecimento_p, sysdate, 1, obter_proced_mat_esp_sus(cd_material_p), 7, 1),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tdual;\n\t\tend if;\n\n\t\t/*Autorizacao de materiais especiais*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w = 'E') then\n\n\t\t\tif\t(cd_convenio_w is null) then\n\t\t\t\tcd_convenio_w := obter_convenio_atendimento(nr_atendimento_p);\n\t\t\tend if;\n\t\t\tobter_preco_conv_mat_fornec(cd_convenio_w, cd_fornecedor_consignado_p, cd_material_p, dt_atualizacao_p, vl_unitario_material_w);\n\t\tend if;\n\n\t\t/*Autorizacao sem prescricao (Valor do fornecedor)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'D') then\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\t\t\tselect\tnvl(max(c.vl_unitario_cotado),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a,\n\t\t\t\tmaterial_autor_cir_cot c\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand \tb.nr_sequencia \t= c.nr_sequencia\n\t\t\tand \tc.cd_cgc\t= cd_fornecedor_consignado_p;\n\t\tend if;\n        \n        /* Contrato */\n        if (nvl(pkg_i18n.get_user_locale, 'pt_BR') = 'es_MX') and(nvl(vl_unitario_material_w, 0) = 0) and\n            (ie_valor_consignado_w = 'C') and (cd_pessoa_fisica_fornec_p is not null) then\n            begin\n               select    nvl(c.vl_saldo_total, c.vl_pagto)\n               into      vl_unitario_material_w\n               from      contrato            a,\n                         contrato_regra_nf   c\n               where     a.nr_sequencia = c.nr_seq_contrato\n               and       a.cd_pessoa_contratada = cd_pessoa_fisica_fornec_p\n               and       c.cd_material = cd_material_p\n               and       nvl(c.dt_inicio_vigencia, sysdate) <= sysdate\n               and       nvl(c.dt_fim_vigencia, sysdate) >= sysdate\n               and       nvl(c.ie_situacao, 'A') = 'A'\n               and       (c.cd_estab_regra = cd_estabelecimento_p or c.cd_estab_regra is null)\n               and       a.dt_inicio <= sysdate\n               and       nvl(dt_fim, sysdate) >= sysdate\n               and       a.ie_situacao = 'A'\n               and       (a.cd_estabelecimento = cd_estabelecimento_p\n                            or exists (select 1 from contrato_estab_adic b\n                                       where  a.nr_sequencia = b.nr_seq_contrato\n                                       and    b.cd_estab_adic = cd_estabelecimento_p))\n               and rownum = 1\n               order by a.nr_sequencia desc;\n            exception\n               when no_data_found or too_many_rows then\n                  vl_unitario_material_w := 0;\n            end;\n        elsif (nvl(vl_unitario_material_w, 0) = 0) and\n               (ie_valor_consignado_w = 'C') then\n            begin\n               select    nvl(c.vl_saldo_total, c.vl_pagto)\n               into      vl_unitario_material_w\n               from      contrato            a,\n                         contrato_regra_nf   c\n               where     a.nr_sequencia = c.nr_seq_contrato\n               and       a.cd_cgc_contratado = cd_fornecedor_consignado_p\n               and       c.cd_material = cd_material_p\n               and       nvl(c.dt_inicio_vigencia, sysdate) <= sysdate\n               and       nvl(c.dt_fim_vigencia, sysdate) >= sysdate\n               and       nvl(c.ie_situacao, 'A') = 'A'\n               and       (c.cd_estab_regra = cd_estabelecimento_p or c.cd_estab_regra is null)\n               and       a.dt_inicio <= sysdate\n               and       nvl(dt_fim, sysdate) >= sysdate\n               and       a.ie_situacao = 'A'\n               and       (a.cd_estabelecimento = cd_estabelecimento_p\n                            or exists (select 1 from contrato_estab_adic b\n                                       where  a.nr_sequencia = b.nr_seq_contrato\n                                       and    b.cd_estab_adic = cd_estabelecimento_p))\n               and rownum = 1\n               order by a.nr_sequencia desc;\n            exception\n               when no_data_found or too_many_rows then\n                  vl_unitario_material_w := 0;\n            end;\n          end if;\n        \n\t\tend;\n\tend loop;\n\tclose C02;\n\nend if;\n\nvl_unitario_material_p := vl_unitario_material_w;\n\nend tcel_obter_vl_mat_ordem_consig;\n/"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 700046,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "a15c2663-289b-49ed-bba8-de604485af7c"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ENVIA_EMAIL_FORNECEDOR_TIE",
      "old_value" : null
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "IE_TIPO_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "PROCEDURE",
      "old_value" : null
    }, {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ENVIA_EMAIL_FORNECEDOR_TIE",
      "old_value" : null
    }, {
      "column_name" : "IE_MEMORIA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "16/01/2025 19:31:16",
      "old_value" : null
    }, {
      "column_name" : "DS_APLICACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "Tasy",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "IE_GERAR_SCRIPT",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : "S"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : null
    }, {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace\nprocedure tcel_envia_email_fornecedor_tie (\n\t\t\tnr_ordem_compra_p\tnumber,\n\t\t\tcd_estabelecimento_p\tnumber,\n\t\t\tcd_fornecedor_p\t\t\tvarchar2,\n\t\t\tnm_usuario_p\t\tvarchar2) is\n\nrecipient_w\t\t\t\tpessoa_juridica.ds_email%type;\n\nJSON_W PHILIPS_JSON := PHILIPS_JSON(); \nJSON_DATA_W              CLOB;\n\nbegin\n\n\tselect\tsubstr(nvl(b.ds_email,a.ds_email),1,2000)\n\tinto\trecipient_w\n\tfrom\tpessoa_juridica_estab b,\n\t\tpessoa_juridica a\n\twhere\ta.cd_cgc = b.cd_cgc(+)\n\tand\tnvl(b.cd_estabelecimento, cd_estabelecimento_p) = cd_estabelecimento_p\n\tand\ta.cd_cgc = cd_fornecedor_p;\n\t\n\tif (recipient_w is not null) then\n\n\t\tJSON_W.PUT('reportCode', 483);\n\t\tJSON_W.PUT('reportType', 'WSUP');\n\t\tJSON_W.PUT('nrOrdemCompra', nr_ordem_compra_p);\n\t\tJSON_W.PUT('fileName', 'Ordem_Compra_' || nr_ordem_compra_p);\n\t\tJSON_W.PUT('recipient', recipient_w);\n\t\tJSON_W.PUT('subject', 'Ordem Compra ' || nr_ordem_compra_p);\n\t\tJSON_W.PUT('content', ' ');\n\t\tJSON_W.PUT('readCOnfirmation', true);\n\n\t\tSYS.DBMS_LOB.CREATETEMPORARY(JSON_DATA_W, TRUE); \n\t\tJSON_W.TO_CLOB(JSON_DATA_W); \n    \n    JSON_DATA_W := BIFROST.SEND_INTEGRATION_CONTENT('opme.export.purchase.order.event', JSON_DATA_W, nm_usuario_p); \n\t\n\tend if;\n\nend tcel_envia_email_fornecedor_tie;\n/",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "16/01/2025 19:31:16",
      "old_value" : null
    }, {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 10145521,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIPTOGRAFIA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "DS_LAYER",
      "data_type" : "VARCHAR2",
      "new_value" : "CORE.TECHCELL",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 700047,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "c84c5eec-3394-4913-b4d6-c93cc31dfa94"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_GERAR_APROV_ORDEM_COMPRA",
      "old_value" : null
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "IE_TIPO_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "PROCEDURE",
      "old_value" : null
    }, {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_GERAR_APROV_ORDEM_COMPRA",
      "old_value" : null
    }, {
      "column_name" : "IE_MEMORIA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "16/01/2025 19:31:56",
      "old_value" : null
    }, {
      "column_name" : "DS_APLICACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "Tasy",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "IE_GERAR_SCRIPT",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : "S"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : null
    }, {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace\nprocedure tcel_gerar_aprov_ordem_compra(\n\t\t\tnr_ordem_compra_p\tnumber,\n\t\t\tcd_perfil_ativo_p\t\tnumber,\n\t\t\tnm_usuario_p\t\tvarchar2) is\n\n\ncd_estabelecimento_w\t\t\tnumber(4);\nnr_item_oci_w\t\t\t\tnumber(05,0);\nnr_items_sem_aprov_w\t\t\tnumber(10);\ncd_pessoa_fisica_w\t\t\tvarchar2(10);\ncd_cgc_fornecedor_w\t\t\tvarchar2(14);\ncd_perfil_w\t\t\t\tperfil.cd_perfil%type;\nds_perfil_w\t\t\t\tperfil.ds_perfil%type;\ndt_ordem_compra_w\t\t\tdate;\n\ncursor c01 is\nselect\ta.nr_item_oci\nfrom\tEstrutura_Material_v e, \n\tordem_compra_item a\nwhere\ta.nr_ordem_compra\t\t= nr_ordem_compra_p\nand\ta.cd_material\t\t= e.cd_material\nand\ta.dt_aprovacao \t\tis null\nand\ta.nr_seq_aprovacao\tis null\norder by\te.cd_grupo_material,\n\te.cd_subgrupo_material,\n\te.cd_classe_material,\n\te.cd_material;\n\nbegin\n\ncd_perfil_w\t\t\t:= cd_perfil_ativo_p;\n\nif\t(nvl(cd_perfil_w,0) = 0) then\n\tselect \tobter_perfil_ativo\n\tinto \tcd_perfil_w \n\tfrom \tdual;\n\t\n\tif\t(cd_perfil_w = 0) then\n\t\tcd_perfil_w := null;\n\tend if;\nend if;\n\nif\t(nvl(cd_perfil_w,0) > 0) then\n\tselect\tmax(ds_perfil)\n\tinto\tds_perfil_w\n\tfrom\tperfil\n\twhere\tcd_perfil = cd_perfil_w;\nend if;\n\nupdate\tordem_compra\nset\tdt_liberacao\t= sysdate,\n\tnm_usuario_lib\t= nm_usuario_p\nwhere\tnr_ordem_compra\t= nr_ordem_compra_p;\n\ninserir_historico_ordem_compra(\n\tnr_ordem_compra_p,\n\t'S',\t\t\n\tWHEB_MENSAGEM_PCK.get_texto(301394),\t\n\tWHEB_MENSAGEM_PCK.get_texto(301393,'CD_PERFIL_W=' || cd_perfil_w || ';' || 'DS_PERFIL_W=' || ds_perfil_w),\n\tnm_usuario_p);\n\nupdate\tordem_compra_item\nset\tqt_original\t= qt_material\nwhere\tnr_ordem_compra\t= nr_ordem_compra_p\nand\tqt_original is null;\n\nupdate\tordem_compra_item\nset\tvl_unit_mat_original = vl_unitario_material\nwhere\tnr_ordem_compra\t= nr_ordem_compra_p\nand\tvl_unit_mat_original is null;\n\nselect\tmax(cd_estabelecimento),\n\tmax(cd_cgc_fornecedor),\n\tmax(cd_pessoa_fisica)\ninto\tcd_estabelecimento_w,\n\tcd_cgc_fornecedor_w,\n\tcd_pessoa_fisica_w\nfrom\tordem_compra\nwhere\tnr_ordem_compra\t= nr_ordem_compra_p;\n\nif\t(cd_cgc_fornecedor_w is not null) then\n\tcd_pessoa_fisica_w\t:= null;\nend if;\n\ncalcular_Liquido_ordem_compra(nr_ordem_compra_p, nm_usuario_p);\ngerar_conta_financ_oc(nr_ordem_compra_p);\n\nopen c01;\nloop\nfetch c01 into\n\tnr_item_oci_w;\nexit when c01%notfound;\n\tbegin\n\n\tupdate\tordem_compra_item\n\tset\tdt_aprovacao\t= sysdate\n\twhere\tnr_ordem_compra\t= nr_ordem_compra_p\n\tand\tnr_item_oci\t= nr_item_oci_w;\n\n\tend;\nend loop;\nclose c01;\n\t\nselect\tcount(*)\ninto\tnr_items_sem_aprov_w\nfrom\tordem_compra_item\nwhere\tdt_aprovacao is null\nand\tnr_ordem_compra = nr_ordem_compra_p;\n\nif\t(nr_items_sem_aprov_w = 0) then\n\t\n\tupdate\tordem_compra\n\tset\tdt_aprovacao\t= sysdate,\n\t\tnm_usuario_aprov\t= nm_usuario_p\n\twhere\tnr_ordem_compra\t= nr_ordem_compra_p;\n\t\t\nend if;\n\nbegin\navisar_liberacao_ordem_compra(nr_ordem_compra_p,cd_estabelecimento_w,nm_usuario_p);\nexception when others then\n\tcd_estabelecimento_w\t:= cd_estabelecimento_w;\nend;\n\nend tcel_gerar_aprov_ordem_compra;\n/",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "16/01/2025 19:31:56",
      "old_value" : null
    }, {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 10145522,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIPTOGRAFIA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "DS_LAYER",
      "data_type" : "VARCHAR2",
      "new_value" : "CORE.TECHCELL",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 700048,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "87c1a5e6-893c-4290-8082-5723bcaa4e05"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_GERAR_APROV_ORDEM_REPO_CONSIG",
      "old_value" : null
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "IE_TIPO_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "PROCEDURE",
      "old_value" : null
    }, {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_GERAR_APROV_ORDEM_REPO_CONSIG",
      "old_value" : null
    }, {
      "column_name" : "IE_MEMORIA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : "16/01/2025 19:48:50",
      "old_value" : null
    }, {
      "column_name" : "DS_APLICACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "Tasy",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "IE_GERAR_SCRIPT",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : "S"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : null
    }, {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace\nprocedure tcel_gerar_aprov_ordem_repo_consig(\n\t\t\tcd_estabelecimento_p\tnumber,\n\t\t\tcd_fornecedor_consignado_p\tvarchar2,\n\t\t\tcd_local_entrega_p\tnumber,\n\t\t\tnr_atendimento_p\tnumber,\n\t\t\tnr_prescricao_p\tnumber,\n\t\t\tcd_material_p\tnumber,\n\t\t\tcd_local_estoque_p\tnumber,\n\t\t\tnm_usuario_p\tvarchar2) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_operacao_estoque_w\t\tnumber(4,0);\ncd_grupo_material_w\t\t\tnumber(03,0);\ncd_subgrupo_w\t\t\t\tnumber(03,0);\ncd_classe_material_w\t\tnumber(05,0);\ncd_convenio_w\t\t\t\tnumber(05,0);\ncd_setor_prescricao_w\t\tnumber(10);\nie_gera_oc_reposicao_w\t\tvarchar2(1);\nie_aprovar_oc_reposicao_w\tvarchar2(1);\nqt_existe_w\t\t\t\t\tnumber(10);\n\ncursor\tc01 is\n\tselect\tnvl(a.ie_gera_oc_reposicao,'N'),\n\t\tnvl(b.ie_aprovar_oc_reposicao,'N')\n\tfrom\tregra_ordem_consignado a,\n\t\ttcel_regorco b\n\twhere\ta.cd_estabelecimento = cd_estabelecimento_p\n\tand\ta.cd_local_estoque = cd_local_estoque_p\n\tand\ta.cd_operacao_estoque = cd_operacao_estoque_w\n\tand\tnvl(a.cd_grupo_material, cd_grupo_material_w) = cd_grupo_material_w\n\tand\tnvl(a.cd_subgrupo_material, cd_subgrupo_w) = cd_subgrupo_w\n\tand\tnvl(a.cd_classe_material, cd_classe_material_w) = cd_classe_material_w\n\tand\tnvl(a.cd_material, cd_material_p) = cd_material_p\n\tand\tnvl(a.cd_fornecedor, cd_fornecedor_consignado_p) = cd_fornecedor_consignado_p\n\tand\tnvl(a.cd_convenio, cd_convenio_w) = cd_convenio_w\n\tand\tnvl(a.cd_setor_prescricao, cd_setor_prescricao_w) = cd_setor_prescricao_w\n\tand a.nr_sequencia = b.nr_sequencia\n\torder by\n\t\tnvl(a.cd_fornecedor, '0'),\n\t\tnvl(a.cd_convenio, 0),\n\t\tnvl(a.cd_setor_prescricao, 0),\n\t\tnvl(a.cd_material, 0),\n\t\tnvl(a.cd_classe_material, 0),\n\t\tnvl(a.cd_subgrupo_material, 0),\n\t\tnvl(a.cd_grupo_material, 0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect\tnvl(cd_operacao_cons_consignado, cd_operacao_cons_paciente)\n\tinto\tcd_operacao_estoque_w\n\tfrom\tparametro_estoque\n\twhere\tcd_estabelecimento = cd_estabelecimento_p;\n\t\n\tif\t(cd_operacao_estoque_w > 0) then\n\t\n\t\tselect\tcd_grupo_material,\n\t\tcd_subgrupo_material,\n\t\tcd_classe_material\n\t\tinto\tcd_grupo_material_w,\n\t\tcd_subgrupo_w,\n\t\tcd_classe_material_w\n\t\tfrom\testrutura_material_v\n\t\twhere \tcd_material = cd_material_p;\n\t\n\t\tcd_convenio_w := nvl(obter_convenio_atendimento(nr_atendimento_p),0);\n\t\n\t\tselect cd_setor_orig\n\t\tinto cd_setor_prescricao_w\n\t\tfrom prescr_medica\n\t\twhere nr_prescricao = nr_prescricao_p;\n\t\n\t\tbegin\n\t\t\topen\tc01;\n\t\t\tloop\n\t\t\tfetch\tc01 into \n\t\t\t\tie_gera_oc_reposicao_w,\n\t\t\t\tie_aprovar_oc_reposicao_w;\n\t\t\texit when c01%notfound;\n\t\t\tend loop;\n\t\t\tclose \tc01;\n\t\tend;\n\t\n\t\tif\t((ie_gera_oc_reposicao_w = 'S') and ((ie_aprovar_oc_reposicao_w = 'S') or ie_aprovar_oc_reposicao_w = 'E')) then\n\t\t\tselect\tcount(*)\n\t\t\tinto\tqt_existe_w\n\t\t\tfrom\tordem_compra\n\t\t\twhere\tnr_ordem_compra\t= nr_ordem_compra_w\n\t\t\tand\tdt_aprovacao is null;\n\t\t\t/*Para verificar se a OC ja nao esta aprovada ou reprovada*/\n\t\t\tif\t(qt_existe_w > 0) then\n\t\t\t\ttcel_gerar_aprov_ordem_compra(nr_ordem_compra_w, null, nm_usuario_p);\n\t\t\t\t\n\t\t\t\tif (ie_aprovar_oc_reposicao_w = 'E') then\n\t\t\t\ttcel_envia_email_fornecedor_tie(nr_ordem_compra_w,cd_estabelecimento_p, cd_fornecedor_consignado_p, nm_usuario_p);\n\t\t\t\t/*Chamar TIE*/\n\t\t\t\tend if;\n\t\t\tend if;\n\t\tend if;\n\tend if;\nend if;\n\t\t\t\nend tcel_gerar_aprov_ordem_repo_consig;\n/",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "16/01/2025 19:48:50",
      "old_value" : null
    }, {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 10145525,
      "old_value" : null
    }, {
      "column_name" : "IE_CRIPTOGRAFIA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "DS_LAYER",
      "data_type" : "VARCHAR2",
      "new_value" : "CORE.TECHCELL",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 700049,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "805ef48e-f65a-40b8-93eb-dcde73aeed39"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_GERAR_APROV_ORDEM_REPO_CONSIG",
      "old_value" : "TCEL_GERAR_APROV_ORDEM_REPO_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ {
      "column_name" : "IE_MEMORIA",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : null,
      "old_value" : "24/01/2025 12:53:18"
    }, {
      "column_name" : "IE_GERAR_SCRIPT",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : "S"
    }, {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace\nprocedure tcel_gerar_aprov_ordem_repo_consig(\n\t\t\tcd_estabelecimento_p\tnumber,\n\t\t\tcd_fornecedor_consignado_p\tvarchar2,\n\t\t\tcd_local_entrega_p\tnumber,\n\t\t\tnr_atendimento_p\tnumber,\n\t\t\tnr_prescricao_p\tnumber,\n\t\t\tcd_material_p\tnumber,\n\t\t\tcd_local_estoque_p\tnumber,\n\t\t\tnm_usuario_p\tvarchar2) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_operacao_estoque_w\t\tnumber(4,0);\ncd_grupo_material_w\t\t\tnumber(03,0);\ncd_subgrupo_w\t\t\t\tnumber(03,0);\ncd_classe_material_w\t\tnumber(05,0);\ncd_convenio_w\t\t\t\tnumber(05,0);\ncd_setor_prescricao_w\t\tnumber(10);\nie_gera_oc_reposicao_w\t\tvarchar2(1);\nie_aprovar_oc_reposicao_w\tvarchar2(1);\nqt_existe_w\t\t\t\t\tnumber(10);\n\ncursor\tc01 is\n\tselect\tnvl(a.ie_gera_oc_reposicao,'N'),\n\t\tnvl(b.ie_aprovar_oc_reposicao,'N')\n\tfrom\tregra_ordem_consignado a,\n\t\ttcel_regorco b\n\twhere\ta.cd_estabelecimento = cd_estabelecimento_p\n\tand\ta.cd_local_estoque = cd_local_estoque_p\n\tand\ta.cd_operacao_estoque = cd_operacao_estoque_w\n\tand\tnvl(a.cd_grupo_material, cd_grupo_material_w) = cd_grupo_material_w\n\tand\tnvl(a.cd_subgrupo_material, cd_subgrupo_w) = cd_subgrupo_w\n\tand\tnvl(a.cd_classe_material, cd_classe_material_w) = cd_classe_material_w\n\tand\tnvl(a.cd_material, cd_material_p) = cd_material_p\n\tand\tnvl(a.cd_fornecedor, cd_fornecedor_consignado_p) = cd_fornecedor_consignado_p\n\tand\tnvl(a.cd_convenio, cd_convenio_w) = cd_convenio_w\n\tand\tnvl(a.cd_setor_prescricao, cd_setor_prescricao_w) = cd_setor_prescricao_w\n\tand a.nr_sequencia = b.nr_sequencia\n\torder by\n\t\tnvl(a.cd_fornecedor, '0'),\n\t\tnvl(a.cd_convenio, 0),\n\t\tnvl(a.cd_setor_prescricao, 0),\n\t\tnvl(a.cd_material, 0),\n\t\tnvl(a.cd_classe_material, 0),\n\t\tnvl(a.cd_subgrupo_material, 0),\n\t\tnvl(a.cd_grupo_material, 0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect\tnvl(cd_operacao_cons_consignado, cd_operacao_cons_paciente)\n\tinto\tcd_operacao_estoque_w\n\tfrom\tparametro_estoque\n\twhere\tcd_estabelecimento = cd_estabelecimento_p;\n\t\n\tif\t(cd_operacao_estoque_w > 0) then\n\t\n\t\tselect\tcd_grupo_material,\n\t\tcd_subgrupo_material,\n\t\tcd_classe_material\n\t\tinto\tcd_grupo_material_w,\n\t\tcd_subgrupo_w,\n\t\tcd_classe_material_w\n\t\tfrom\testrutura_material_v\n\t\twhere \tcd_material = cd_material_p;\n\t\n\t\tcd_convenio_w := nvl(obter_convenio_atendimento(nr_atendimento_p),0);\n\t\n\t\tselect cd_setor_orig\n\t\tinto cd_setor_prescricao_w\n\t\tfrom prescr_medica\n\t\twhere nr_prescricao = nr_prescricao_p;\n\t\n\t\tbegin\n\t\t\topen\tc01;\n\t\t\tloop\n\t\t\tfetch\tc01 into \n\t\t\t\tie_gera_oc_reposicao_w,\n\t\t\t\tie_aprovar_oc_reposicao_w;\n\t\t\texit when c01%notfound;\n\t\t\tend loop;\n\t\t\tclose \tc01;\n\t\tend;\n\t\n\t\tif\t((ie_gera_oc_reposicao_w = 'S') and ((ie_aprovar_oc_reposicao_w = 'S') or ie_aprovar_oc_reposicao_w = 'E')) then\n\t\t\tselect\tcount(*)\n\t\t\tinto\tqt_existe_w\n\t\t\tfrom\tordem_compra\n\t\t\twhere\tnr_ordem_compra\t= nr_ordem_compra_w\n\t\t\tand\tdt_aprovacao is null;\n\t\t\t/*Para verificar se a OC ja nao esta aprovada ou reprovada*/\n\t\t\tif\t(qt_existe_w > 0) then\n\t\t\t\ttcel_gerar_aprov_ordem_compra(nr_ordem_compra_w, null, nm_usuario_p);\n\t\t\t\t\n\t\t\t\tif (ie_aprovar_oc_reposicao_w = 'E') then\n\t\t\t\t   tcel_envia_email_fornecedor_tie(nr_ordem_compra_w,cd_estabelecimento_p, cd_fornecedor_consignado_p, nm_usuario_p);\n\t\t\t\t   /*Chamar TIE*/\n\t\t\t\tend if;\n\t\t\tend if;\n\t\tend if;\n\tend if;\nend if;\n\t\t\t\nend tcel_gerar_aprov_ordem_repo_consig;\n/",
      "old_value" : "create or replace\nprocedure tcel_gerar_aprov_ordem_repo_consig(\n\t\t\tcd_estabelecimento_p\tnumber,\n\t\t\tcd_fornecedor_consignado_p\tvarchar2,\n\t\t\tcd_local_entrega_p\tnumber,\n\t\t\tnr_atendimento_p\tnumber,\n\t\t\tnr_prescricao_p\tnumber,\n\t\t\tcd_material_p\tnumber,\n\t\t\tcd_local_estoque_p\tnumber,\n\t\t\tnm_usuario_p\tvarchar2) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_operacao_estoque_w\t\tnumber(4,0);\ncd_grupo_material_w\t\t\tnumber(03,0);\ncd_subgrupo_w\t\t\t\tnumber(03,0);\ncd_classe_material_w\t\tnumber(05,0);\ncd_convenio_w\t\t\t\tnumber(05,0);\ncd_setor_prescricao_w\t\tnumber(10);\nie_gera_oc_reposicao_w\t\tvarchar2(1);\nie_aprovar_oc_reposicao_w\tvarchar2(1);\nqt_existe_w\t\t\t\t\tnumber(10);\n\ncursor\tc01 is\n\tselect\tnvl(a.ie_gera_oc_reposicao,'N'),\n\t\tnvl(b.ie_aprovar_oc_reposicao,'N')\n\tfrom\tregra_ordem_consignado a,\n\t\ttcel_regorco b\n\twhere\ta.cd_estabelecimento = cd_estabelecimento_p\n\tand\ta.cd_local_estoque = cd_local_estoque_p\n\tand\ta.cd_operacao_estoque = cd_operacao_estoque_w\n\tand\tnvl(a.cd_grupo_material, cd_grupo_material_w) = cd_grupo_material_w\n\tand\tnvl(a.cd_subgrupo_material, cd_subgrupo_w) = cd_subgrupo_w\n\tand\tnvl(a.cd_classe_material, cd_classe_material_w) = cd_classe_material_w\n\tand\tnvl(a.cd_material, cd_material_p) = cd_material_p\n\tand\tnvl(a.cd_fornecedor, cd_fornecedor_consignado_p) = cd_fornecedor_consignado_p\n\tand\tnvl(a.cd_convenio, cd_convenio_w) = cd_convenio_w\n\tand\tnvl(a.cd_setor_prescricao, cd_setor_prescricao_w) = cd_setor_prescricao_w\n\tand a.nr_sequencia = b.nr_sequencia\n\torder by\n\t\tnvl(a.cd_fornecedor, '0'),\n\t\tnvl(a.cd_convenio, 0),\n\t\tnvl(a.cd_setor_prescricao, 0),\n\t\tnvl(a.cd_material, 0),\n\t\tnvl(a.cd_classe_material, 0),\n\t\tnvl(a.cd_subgrupo_material, 0),\n\t\tnvl(a.cd_grupo_material, 0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect\tnvl(cd_operacao_cons_consignado, cd_operacao_cons_paciente)\n\tinto\tcd_operacao_estoque_w\n\tfrom\tparametro_estoque\n\twhere\tcd_estabelecimento = cd_estabelecimento_p;\n\t\n\tif\t(cd_operacao_estoque_w > 0) then\n\t\n\t\tselect\tcd_grupo_material,\n\t\tcd_subgrupo_material,\n\t\tcd_classe_material\n\t\tinto\tcd_grupo_material_w,\n\t\tcd_subgrupo_w,\n\t\tcd_classe_material_w\n\t\tfrom\testrutura_material_v\n\t\twhere \tcd_material = cd_material_p;\n\t\n\t\tcd_convenio_w := nvl(obter_convenio_atendimento(nr_atendimento_p),0);\n\t\n\t\tselect cd_setor_orig\n\t\tinto cd_setor_prescricao_w\n\t\tfrom prescr_medica\n\t\twhere nr_prescricao = nr_prescricao_p;\n\t\n\t\tbegin\n\t\t\topen\tc01;\n\t\t\tloop\n\t\t\tfetch\tc01 into \n\t\t\t\tie_gera_oc_reposicao_w,\n\t\t\t\tie_aprovar_oc_reposicao_w;\n\t\t\texit when c01%notfound;\n\t\t\tend loop;\n\t\t\tclose \tc01;\n\t\tend;\n\t\n\t\tif\t((ie_gera_oc_reposicao_w = 'S') and ((ie_aprovar_oc_reposicao_w = 'S') or ie_aprovar_oc_reposicao_w = 'E')) then\n\t\t\tselect\tcount(*)\n\t\t\tinto\tqt_existe_w\n\t\t\tfrom\tordem_compra\n\t\t\twhere\tnr_ordem_compra\t= nr_ordem_compra_w\n\t\t\tand\tdt_aprovacao is null;\n\t\t\t/*Para verificar se a OC ja nao esta aprovada ou reprovada*/\n\t\t\tif\t(qt_existe_w > 0) then\n\t\t\t\ttcel_gerar_aprov_ordem_compra(nr_ordem_compra_w, null, nm_usuario_p);\n\t\t\t\t\n\t\t\t\tif (ie_aprovar_oc_reposicao_w = 'E') then\n\t\t\t\ttcel_envia_email_fornecedor_tie(nr_ordem_compra_w,cd_estabelecimento_p, cd_fornecedor_consignado_p, nm_usuario_p);\n\t\t\t\t/*Chamar TIE*/\n\t\t\t\tend if;\n\t\t\tend if;\n\t\tend if;\n\tend if;\nend if;\n\t\t\t\nend tcel_gerar_aprov_ordem_repo_consig;\n/"
    }, {
      "column_name" : "IE_CRIPTOGRAFIA",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 700050,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "953e52b5-4d53-46f7-a3f9-c49106d2565e"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG",
      "old_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ {
      "column_name" : "IE_MEMORIA",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : null,
      "old_value" : "24/01/2025 12:53:18"
    }, {
      "column_name" : "IE_GERAR_SCRIPT",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : "S"
    }, {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tnr_seq_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber,\n\t\t\tdt_atualizacao_p in date) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect vl_unitario_material\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_seq_prescricao_p;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  dt_atualizacao_p,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material2_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material2_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/",
      "old_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tnr_seq_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber,\n\t\t\tdt_atualizacao_p in date) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect vl_unitario_material\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_seq_prescricao_p;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  dt_atualizacao_p,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/"
    }, {
      "column_name" : "IE_CRIPTOGRAFIA",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 700051,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "22c2770f-2991-497e-805a-62ee81ff8fbe"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG",
      "old_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace\nprocedure tcel_obter_vl_mat_ordem_consig(\n    cd_estabelecimento_p        in  material_lote_fornec.cd_estabelecimento%type,\n    cd_fornecedor_consignado_p\tin  nota_fiscal.cd_cgc_emitente%type,\n    cd_pessoa_fisica_fornec_p   in  nota_fiscal.cd_pessoa_fisica%type default null,\n    cd_material_p               in  material.cd_material%type,\n    nr_ordem_compra_p           in  ordem_compra.nr_ordem_compra%type,\n    nr_prescricao_p             in  material_atend_paciente.nr_prescricao%type,\n    nr_atendimento_p            in  material_atend_paciente.nr_atendimento%type,\n    ie_tipo_atendimento_p       in  regra_valor_ordem_consig.ie_valor_consignado%type,\n    nr_seq_agenda_p             in  agenda_paciente.nr_sequencia%type,\n    dt_atualizacao_p            in  nota_fiscal.dt_atualizacao%type,\n    nr_seq_lote_fornec_p        in  material_lote_fornec.nr_sequencia%type,\n    cd_convenio_p               in  material_atend_paciente.cd_convenio%type,\n    cd_categoria_p              in  atendimento_paciente_v.cd_categoria%type,\n    dt_vigencia_p               in  nota_fiscal_item.dt_validade%type,\n    vl_unitario_material_p      out nota_fiscal_item.vl_unitario_item_nf%type\n) is\n\n\nnr_sequencia_w\t\t\t\tregra_valor_ordem_consig.nr_sequencia%type;\ncd_grupo_material_w\t\t\tgrupo_material.cd_grupo_material%type;\ncd_subgrupo_material_w\t\t\tsubgrupo_material.cd_subgrupo_material%type;\ncd_classe_material_w\t\t\tclasse_material.cd_classe_material%type;\nie_valor_consignado_w\t\t\tregra_preco_ordem_consig.ie_valor_consignado%type := 'N';\nvl_unitario_material_w\t\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_preco_tabela_w\t\t\tpreco_material.vl_preco_venda%type;\nqt_conv_compra_estoque_w\t\tmaterial.qt_conv_compra_estoque%type;\nqt_conv_estoque_consumo_w\t\tmaterial.qt_conv_estoque_consumo%type;\ncd_tab_preco_mat_consig_w\t\tparametro_compras.cd_tab_preco_mat_consig%type;\ndt_utl_vigencia_w\t\t\tdate;\ncd_tab_preco_mat_w\t\t\tnumber(10,0);\nie_origem_preco_w\t\t\tnumber(10,0);\nnr_seq_bras_preco_w\t\t\tnumber(10,0);\nnr_seq_mat_bras_w\t\t\tnumber(10,0);\nnr_seq_conv_bras_w\t\t\tnumber(10,0);\nnr_seq_conv_simpro_w\t\t\tnumber(10,0);\nnr_seq_mat_simpro_w\t\t\tnumber(10,0);\nnr_seq_simpro_preco_w\t\t\tnumber(10,0);\nnr_seq_ajuste_mat_w\t\t\tnumber(10,0);\nnr_seq_marca_w\t\t\t\tmarca.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tcirurgia.nr_cirurgia%type;\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\ncd_convenio_w\t\t\t\tconvenio.cd_convenio%type;\nie_preco_sus_oc_w\t\t\tvarchar2(1);\ncd_procedimento_w\t\t\tnumber(15);\nnr_proc_interno_w procedimento.nr_proc_interno%type;\n\ncursor c01 is\nselect\tnr_sequencia\nfrom\tregra_valor_ordem_consig\nwhere\tcd_estabelecimento = cd_estabelecimento_p\nand\tnvl(cd_grupo_material, cd_grupo_material_w)\t\t= cd_grupo_material_w\nand\tnvl(cd_subgrupo_material, cd_subgrupo_material_w)\t= cd_subgrupo_material_w\nand\tnvl(cd_classe_material, cd_classe_material_w)\t\t= cd_classe_material_w\nand\t(nvl(cd_material, cd_material_p) \t\t\t= cd_material_p or cd_material_p = 0)\nand\t((nvl(cd_cnpj, cd_fornecedor_consignado_p)\t\t= cd_fornecedor_consignado_p) or (cd_cnpj is null))\norder by\n\tnvl(cd_material, 0),\n\tnvl(cd_classe_material, 0),\n\tnvl(cd_subgrupo_material, 0),\n\tnvl(cd_grupo_material, 0),\n\tnvl(cd_cnpj, 'xxx');\n\ncursor c02 is\nselect\tie_valor_consignado\nfrom\tregra_preco_ordem_consig\nwhere\tnr_seq_regra = nr_sequencia_w\norder by nr_seq_prioridade;\n\nbegin\n\nnr_seq_agenda_w := nvl(nr_seq_agenda_p,0);\ncd_convenio_w\t:= cd_convenio_p;\n\nselect\ta.cd_grupo_material,\n\ta.cd_subgrupo_material,\n\ta.cd_classe_material\ninto\tcd_grupo_material_w,\n\tcd_subgrupo_material_w,\n\tcd_classe_material_w\nfrom\testrutura_material_v a\nwhere\ta.cd_material = cd_material_p;\n\nselect\tqt_conv_compra_estoque,\n\tqt_conv_estoque_consumo\ninto \tqt_conv_compra_estoque_w,\n\tqt_conv_estoque_consumo_w\nfrom \tmaterial\nwhere \tcd_material = nvl(cd_material_p,0);\n\nselect\tcd_tab_preco_mat_consig\ninto\tcd_tab_preco_mat_consig_w\nfrom\tparametro_compras\nwhere\tcd_estabelecimento = cd_estabelecimento_p;\n\nopen C01;\nloop\nfetch C01 into\n\tnr_sequencia_w;\nexit when C01%notfound;\n\tbegin\n\t/*Busca a sequencia da regra de preco de acordo com as informacoes do material*/\n\tnr_sequencia_w := nr_sequencia_w;\n\tend;\nend loop;\nclose C01;\n\nif\t(nr_sequencia_w > 0) then\n\n\t/*Esse cursor serve para bucar o preco conforme a regra, seguindo a prioridade.\n\tQuando ele encontra o valor, ele sai fora do cursor. Enquanto o valor e zero, ele vai tentando buscar o preco*/\n\topen C02;\n\tloop\n\tfetch C02 into\n\t\tie_valor_consignado_w;\n\texit when C02%notfound or vl_unitario_material_w > 0;\n\t\tbegin\n\t\t\n\t\t/*Tabela de Oportunidades*/\n\t\t\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'V') then\n\t\t\t\n\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\tinto\tnr_cirurgia_w\n\t\t\tfrom\tordem_compra\n\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\n\t\t\t\tselect\tnvl(max(cd_procedimento_princ),0)\n\t\t\t\tinto\tcd_procedimento_w\n\t\t\t\tfrom\tcirurgia a\n\t\t\t\twhere\ta.nr_cirurgia\t\t= nr_cirurgia_w;\n\t\t\t\t\n\t\t\t\tif\t(cd_procedimento_w > 0) then\n\t\t\t\t\n\t\t\t\t\tselect nvl(max(nr_sequencia),0)\n\t\t\t\t\tinto   nr_proc_interno_w\n\t\t\t\t\tfrom   proc_interno\n\t\t\t\t\twhere  cd_procedimento = cd_procedimento_w;\n\t\t\t\t\t\n\t\t\t\t\tif\t(nr_proc_interno_w > 0) then\n\t\t\t\n\t\t\t\t\t\tselect nvl(max(b.vl_unitario_item), 0)\n\t\t\t\t\t\tinto vl_unitario_material_w\n\t\t\t\t\t\tfrom tcel_regra_preco_consig_item a,\n\t\t\t\t\t\t\ttcel_regra_preco_item_valor b\n\t\t\t\t\t\twhere a.cd_estabelecimento = cd_estabelecimento_p\n\t\t\t\t\t\tand a.cd_procedimento = nr_proc_interno_w\n\t\t\t\t\t\tand a.cd_fornecedor = cd_fornecedor_consignado_p\n\t\t\t\t\t\tand a.cd_convenio = cd_convenio_p\n\t\t\t\t\t\tand (a.cd_categoria = cd_categoria_p or nvl(a.cd_categoria,0) = 0 or nvl(cd_categoria_p,0) = 0)\n\t\t\t\t\t\tand a.ie_situacao = 'A'\n\t\t\t\t\t\tand a.nr_sequencia = b.nr_seq_regra\n\t\t\t\t\t\tand b.cd_material = cd_material_p;\n\n\t\t\t\t\tend if;\n\t\t\t\tend if;\n\t\t\tend if;\t\t\n\t\tend if;\n\n\t\t/*Tabela de precos*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'T') then\n\n\t\t\tselect\tnvl(max(a.vl_preco_venda),0)\n\t\t\tinto\tvl_preco_tabela_w\n\t\t\tfrom\tpreco_material a\n\t\t\twhere\ta.cd_material\t\t= cd_material_p\n\t\t\tand\ta.cd_estabelecimento\t= cd_estabelecimento_p\n\t\t\tand\ta.cd_cgc_fornecedor\t= cd_fornecedor_consignado_p\n\t\t\tand\ta.cd_tab_preco_mat\t= nvl(cd_tab_preco_mat_consig_w,a.cd_tab_preco_mat)\n\t\t\tand\ta.ie_situacao\t\t= 'A'\n\t\t\tand\ta.dt_inicio_vigencia\t= (\n\t\t\t\tselect\tmax(b.dt_inicio_vigencia)\n\t\t\t\tfrom\tpreco_material b\n\t\t\t\twhere\tb.cd_material\t\t= a.cd_material\n\t\t\t\tand\tb.cd_cgc_fornecedor\t= a.cd_cgc_fornecedor\n\t\t\t\tand\tb.cd_estabelecimento\t= a.cd_estabelecimento\n\t\t\t\tand\tb.ie_situacao\t\t= 'A'\n\t\t\t\tand\tb.cd_tab_preco_mat\t= nvl(cd_tab_preco_mat_consig_w,a.cd_tab_preco_mat));\n\n\t\t\tif\t(vl_preco_tabela_w <> 0) then\n\t\t\t\tvl_unitario_material_w \t:= vl_preco_tabela_w;\n\t\t\tend if;\n\n\t\t\tvl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w * qt_conv_estoque_consumo_w);\n\t\tend if;\n\n\t\t/*Preco convenio*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'P') then\n\n\t\t\tif\t(nvl(nr_seq_lote_fornec_p,0) <> 0) then\n\t\t\t\tselect\tmax(nr_seq_marca)\n\t\t\t\tinto\tnr_seq_marca_w\n\t\t\t\tfrom\tmaterial_lote_fornec\n\t\t\t\twhere\tnr_sequencia = nr_seq_lote_fornec_p;\n\t\t\tend if;\n\n\t\t\tdefine_preco_material(\tcd_estabelecimento_p,\t-- cd_estabelecimento_p\t\tnumber,\n\t\t\t\t\t\tcd_convenio_w,          -- cd_convenio_p          \tnumber,\n\t\t\t\t\t\tcd_categoria_p,         -- cd_categoria_p         \tvarchar2,\n\t\t\t\t\t\tdt_vigencia_p,          -- dt_vigencia_p          \tdate,\n\t\t\t\t\t\tcd_material_p,          -- cd_material_p          \tnumber,\n\t\t\t\t\t\t0,                      -- cd_tipo_acomodacao_p   \tnumber,\n\t\t\t\t\t\t0,                      -- ie_tipo_atendimento_p  \tnumber,\n\t\t\t\t\t\t0,                      -- cd_setor_atendimento_p \tnumber,\n\t\t\t\t\t\tnull,                   -- cd_cgc_fornecedor_p\t\tvarchar2,\n\t\t\t\t\t\t0,                      -- qt_idade_p\t\t\tnumber,\n\t\t\t\t\t\t0,                      -- nr_sequencia_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- cd_plano_p\t\t\tvarchar2,\n\t\t\t\t\t\tnull,                   -- cd_proc_referencia_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_origem_proc_p\t\tnumber,\n\t\t\t\t\t\tnr_seq_marca_w,         -- nr_seq_marca_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_clinica_p\t\t\tnumber,\n\t\t\t\t\t\tnull,                   -- nr_seq_classif_atend_p\tnumber,\n\t\t\t\t\t\tnr_atendimento_p,       -- nr_atendimento_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_vago_4_p\t\t\tvarchar2,\n\t\t\t\t\t\tvl_unitario_material_w, -- vl_material_p      \t out \tnumber,\n\t\t\t\t\t\tdt_utl_vigencia_w,      -- dt_ult_vigencia_p  \t out \tdate,\n\t\t\t\t\t\tcd_tab_preco_mat_w,     -- cd_tab_preco_mat_p \t out \tnumber,\n\t\t\t\t\t\tie_origem_preco_w,      -- ie_origem_preco_p  \t out \tnumber,\n\t\t\t\t\t\tnr_seq_bras_preco_w,    -- nr_seq_bras_preco_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_mat_bras_w,      -- nr_seq_mat_bras_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_conv_bras_w,     -- nr_seq_conv_bras_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_conv_simpro_w,   -- nr_seq_conv_simpro_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_mat_simpro_w,    -- nr_seq_mat_simpro_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_simpro_preco_w,  -- nr_seq_simpro_preco_p out\tnumber,\n\t\t\t\t\t\tnr_seq_ajuste_mat_w);   -- nr_seq_ajuste_mat_p\t out\tnumber\n\n\t\t\tvl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w * qt_conv_estoque_consumo_w);\n\t\tend if;\n\n\n\t\t/*Autorizacao (Valor do fornecedor)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'F') then\n\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\t\t\tselect\tnvl(max(c.vl_unitario_cotado),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a,\n\t\t\t\tmaterial_autor_cir_cot c\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand \tb.nr_sequencia \t= c.nr_sequencia\n\t\t\tand \tc.cd_cgc\t= cd_fornecedor_consignado_p\n\t\t\tand\t((nvl(a.nr_prescricao,0) = nvl(nr_prescricao_p,0)) or (nvl(nr_prescricao_p,0) = 0));\n\t\tend if;\n\n\n\t\t/*Autorizacao (Valor autorizado)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'A') then\n\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\n\t\t\tselect\tnvl(max(b.vl_unitario_material),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand\tb.ie_valor_informado = 'S';\n\t\tend if;\n\n\n\t\t/*Ultima compra*/\n\t\tif\t(nvl(vl_unitario_material_w, 0) = 0) and (ie_valor_consignado_w\t= 'U') then\n\t                select\tnvl(max(dividir((a.vl_total_item_nf - a.vl_desconto - vl_desconto_rateio + vl_frete + a.vl_despesa_acessoria + a.vl_seguro), a.qt_item_estoque)), 0)\n\t                into\tvl_unitario_material_w\n\t                from \tnota_fiscal_item a\n\t                where \ta.cd_material  = cd_material_p\n\t                and \ta.nr_sequencia =\n\t\t\t\t(\n\t\t                        select  max(i.nr_sequencia)\n\t\t                        from\tnota_fiscal_item    i,\n\t\t                                nota_fiscal         n,\n\t\t                                operacao_nota       p\n\t\t                        where\ti.nr_sequencia      =   n.nr_sequencia\n\t\t                        and     i.cd_material       =   cd_material_p\n\t\t                        and     nvl(p.ie_ultima_compra, 'S') = 'S'\n\t\t                        and\tp.cd_operacao_nf    =   n.cd_operacao_nf\n\t\t                        and\tn.ie_situacao       =   '1'\n\t\t                        and\t(\n\t\t                                    (\n                                                \tn.ie_tipo_nota = 'EF'\n\t\t                                        and n.cd_pessoa_fisica = cd_pessoa_fisica_fornec_p\n\t\t                                        and n.cd_cgc_emitente is null\n                                            \t    )\n\t\t                                    or (n.cd_cgc = cd_fornecedor_consignado_p)\n\t\t                                )\n\t                \t);\n\t\n\t                vl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w);\n\t\tend if;\n\n\n\t\t/*OPM com o procedimento SUS*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'O') then\n\n\t\t\tselect\tnvl(sus_obter_preco_proced(cd_estabelecimento_p, sysdate, 1, obter_proced_mat_esp_sus(cd_material_p), 7, 1),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tdual;\n\t\tend if;\n\n\t\t/*Autorizacao de materiais especiais*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w = 'E') then\n\n\t\t\tif\t(cd_convenio_w is null) then\n\t\t\t\tcd_convenio_w := obter_convenio_atendimento(nr_atendimento_p);\n\t\t\tend if;\n\t\t\tobter_preco_conv_mat_fornec(cd_convenio_w, cd_fornecedor_consignado_p, cd_material_p, dt_atualizacao_p, vl_unitario_material_w);\n\t\tend if;\n\n\t\t/*Autorizacao sem prescricao (Valor do fornecedor)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'D') then\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\t\t\tselect\tnvl(max(c.vl_unitario_cotado),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a,\n\t\t\t\tmaterial_autor_cir_cot c\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand \tb.nr_sequencia \t= c.nr_sequencia\n\t\t\tand \tc.cd_cgc\t= cd_fornecedor_consignado_p;\n\t\tend if;\n        \n        /* Contrato */\n        if (nvl(pkg_i18n.get_user_locale, 'pt_BR') = 'es_MX') and(nvl(vl_unitario_material_w, 0) = 0) and\n            (ie_valor_consignado_w = 'C') and (cd_pessoa_fisica_fornec_p is not null) then\n            begin\n               select    nvl(c.vl_saldo_total, c.vl_pagto)\n               into      vl_unitario_material_w\n               from      contrato            a,\n                         contrato_regra_nf   c\n               where     a.nr_sequencia = c.nr_seq_contrato\n               and       a.cd_pessoa_contratada = cd_pessoa_fisica_fornec_p\n               and       c.cd_material = cd_material_p\n               and       nvl(c.dt_inicio_vigencia, sysdate) <= sysdate\n               and       nvl(c.dt_fim_vigencia, sysdate) >= sysdate\n               and       nvl(c.ie_situacao, 'A') = 'A'\n               and       (c.cd_estab_regra = cd_estabelecimento_p or c.cd_estab_regra is null)\n               and       a.dt_inicio <= sysdate\n               and       nvl(dt_fim, sysdate) >= sysdate\n               and       a.ie_situacao = 'A'\n               and       (a.cd_estabelecimento = cd_estabelecimento_p\n                            or exists (select 1 from contrato_estab_adic b\n                                       where  a.nr_sequencia = b.nr_seq_contrato\n                                       and    b.cd_estab_adic = cd_estabelecimento_p))\n               and rownum = 1\n               order by a.nr_sequencia desc;\n            exception\n               when no_data_found or too_many_rows then\n                  vl_unitario_material_w := 0;\n            end;\n        elsif (nvl(vl_unitario_material_w, 0) = 0) and\n               (ie_valor_consignado_w = 'C') then\n            begin\n               select    nvl(c.vl_saldo_total, c.vl_pagto)\n               into      vl_unitario_material_w\n               from      contrato            a,\n                         contrato_regra_nf   c\n               where     a.nr_sequencia = c.nr_seq_contrato\n               and       a.cd_cgc_contratado = cd_fornecedor_consignado_p\n               and       c.cd_material = cd_material_p\n               and       nvl(c.dt_inicio_vigencia, sysdate) <= sysdate\n               and       nvl(c.dt_fim_vigencia, sysdate) >= sysdate\n               and       nvl(c.ie_situacao, 'A') = 'A'\n               and       (c.cd_estab_regra = cd_estabelecimento_p or c.cd_estab_regra is null)\n               and       a.dt_inicio <= sysdate\n               and       nvl(dt_fim, sysdate) >= sysdate\n               and       a.ie_situacao = 'A'\n               and       (a.cd_estabelecimento = cd_estabelecimento_p\n                            or exists (select 1 from contrato_estab_adic b\n                                       where  a.nr_sequencia = b.nr_seq_contrato\n                                       and    b.cd_estab_adic = cd_estabelecimento_p))\n               and rownum = 1\n               order by a.nr_sequencia desc;\n            exception\n               when no_data_found or too_many_rows then\n                  vl_unitario_material_w := 0;\n            end;\n          end if;\n        \n\t\tend;\n\tend loop;\n\tclose C02;\n\nend if;\n\nvl_unitario_material_p := vl_unitario_material_w;\n\nend tcel_obter_vl_mat_ordem_consig;\n/",
      "old_value" : "create or replace\nprocedure tcel_obter_vl_mat_ordem_consig(\n    cd_estabelecimento_p        in  material_lote_fornec.cd_estabelecimento%type,\n    cd_fornecedor_consignado_p\tin  nota_fiscal.cd_cgc_emitente%type,\n    cd_pessoa_fisica_fornec_p   in  nota_fiscal.cd_pessoa_fisica%type default null,\n    cd_material_p               in  material.cd_material%type,\n    nr_ordem_compra_p           in  ordem_compra.nr_ordem_compra%type,\n    nr_prescricao_p             in  material_atend_paciente.nr_prescricao%type,\n    nr_atendimento_p            in  material_atend_paciente.nr_atendimento%type,\n    ie_tipo_atendimento_p       in  regra_valor_ordem_consig.ie_valor_consignado%type,\n    nr_seq_agenda_p             in  agenda_paciente.nr_sequencia%type,\n    dt_atualizacao_p            in  nota_fiscal.dt_atualizacao%type,\n    nr_seq_lote_fornec_p        in  material_lote_fornec.nr_sequencia%type,\n    cd_convenio_p               in  material_atend_paciente.cd_convenio%type,\n    cd_categoria_p              in  atendimento_paciente_v.cd_categoria%type,\n    dt_vigencia_p               in  nota_fiscal_item.dt_validade%type,\n    vl_unitario_material_p      out nota_fiscal_item.vl_unitario_item_nf%type\n) is\n\n\nnr_sequencia_w\t\t\t\tregra_valor_ordem_consig.nr_sequencia%type;\ncd_grupo_material_w\t\t\tgrupo_material.cd_grupo_material%type;\ncd_subgrupo_material_w\t\t\tsubgrupo_material.cd_subgrupo_material%type;\ncd_classe_material_w\t\t\tclasse_material.cd_classe_material%type;\nie_valor_consignado_w\t\t\tregra_preco_ordem_consig.ie_valor_consignado%type := 'N';\nvl_unitario_material_w\t\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_preco_tabela_w\t\t\tpreco_material.vl_preco_venda%type;\nqt_conv_compra_estoque_w\t\tmaterial.qt_conv_compra_estoque%type;\nqt_conv_estoque_consumo_w\t\tmaterial.qt_conv_estoque_consumo%type;\ncd_tab_preco_mat_consig_w\t\tparametro_compras.cd_tab_preco_mat_consig%type;\ndt_utl_vigencia_w\t\t\tdate;\ncd_tab_preco_mat_w\t\t\tnumber(10,0);\nie_origem_preco_w\t\t\tnumber(10,0);\nnr_seq_bras_preco_w\t\t\tnumber(10,0);\nnr_seq_mat_bras_w\t\t\tnumber(10,0);\nnr_seq_conv_bras_w\t\t\tnumber(10,0);\nnr_seq_conv_simpro_w\t\t\tnumber(10,0);\nnr_seq_mat_simpro_w\t\t\tnumber(10,0);\nnr_seq_simpro_preco_w\t\t\tnumber(10,0);\nnr_seq_ajuste_mat_w\t\t\tnumber(10,0);\nnr_seq_marca_w\t\t\t\tmarca.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tcirurgia.nr_cirurgia%type;\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\ncd_convenio_w\t\t\t\tconvenio.cd_convenio%type;\nie_preco_sus_oc_w\t\t\tvarchar2(1);\ncd_procedimento_w\t\t\tnumber(15);\nnr_proc_interno_w procedimento.nr_proc_interno%type;\n\ncursor c01 is\nselect\tnr_sequencia\nfrom\tregra_valor_ordem_consig\nwhere\tcd_estabelecimento = cd_estabelecimento_p\nand\tnvl(cd_grupo_material, cd_grupo_material_w)\t\t= cd_grupo_material_w\nand\tnvl(cd_subgrupo_material, cd_subgrupo_material_w)\t= cd_subgrupo_material_w\nand\tnvl(cd_classe_material, cd_classe_material_w)\t\t= cd_classe_material_w\nand\t(nvl(cd_material, cd_material_p) \t\t\t= cd_material_p or cd_material_p = 0)\nand\t((nvl(cd_cnpj, cd_fornecedor_consignado_p)\t\t= cd_fornecedor_consignado_p) or (cd_cnpj is null))\norder by\n\tnvl(cd_material, 0),\n\tnvl(cd_classe_material, 0),\n\tnvl(cd_subgrupo_material, 0),\n\tnvl(cd_grupo_material, 0),\n\tnvl(cd_cnpj, 'xxx');\n\ncursor c02 is\nselect\tie_valor_consignado\nfrom\tregra_preco_ordem_consig\nwhere\tnr_seq_regra = nr_sequencia_w\norder by nr_seq_prioridade;\n\nbegin\n\nnr_seq_agenda_w := nvl(nr_seq_agenda_p,0);\ncd_convenio_w\t:= cd_convenio_p;\n\nselect\ta.cd_grupo_material,\n\ta.cd_subgrupo_material,\n\ta.cd_classe_material\ninto\tcd_grupo_material_w,\n\tcd_subgrupo_material_w,\n\tcd_classe_material_w\nfrom\testrutura_material_v a\nwhere\ta.cd_material = cd_material_p;\n\nselect\tqt_conv_compra_estoque,\n\tqt_conv_estoque_consumo\ninto \tqt_conv_compra_estoque_w,\n\tqt_conv_estoque_consumo_w\nfrom \tmaterial\nwhere \tcd_material = nvl(cd_material_p,0);\n\nselect\tcd_tab_preco_mat_consig\ninto\tcd_tab_preco_mat_consig_w\nfrom\tparametro_compras\nwhere\tcd_estabelecimento = cd_estabelecimento_p;\n\nopen C01;\nloop\nfetch C01 into\n\tnr_sequencia_w;\nexit when C01%notfound;\n\tbegin\n\t/*Busca a sequencia da regra de preco de acordo com as informacoes do material*/\n\tnr_sequencia_w := nr_sequencia_w;\n\tend;\nend loop;\nclose C01;\n\nif\t(nr_sequencia_w > 0) then\n\n\t/*Esse cursor serve para bucar o preco conforme a regra, seguindo a prioridade.\n\tQuando ele encontra o valor, ele sai fora do cursor. Enquanto o valor e zero, ele vai tentando buscar o preco*/\n\topen C02;\n\tloop\n\tfetch C02 into\n\t\tie_valor_consignado_w;\n\texit when C02%notfound or vl_unitario_material_w > 0;\n\t\tbegin\n\t\t\n\t\t/*Tabela de Oportunidades*/\n\t\t\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'V') then\n\t\t\t\n\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\tinto\tnr_cirurgia_w\n\t\t\tfrom\tordem_compra\n\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\n\t\t\t\tselect\tnvl(max(cd_procedimento_princ),0)\n\t\t\t\tinto\tcd_procedimento_w\n\t\t\t\tfrom\tcirurgia a\n\t\t\t\twhere\ta.nr_cirurgia\t\t= nr_cirurgia_w;\n\t\t\t\t\n\t\t\t\tif\t(cd_procedimento_w > 0) then\n\t\t\t\t\n\t\t\t\t\tselect nvl(max(nr_sequencia),0)\n\t\t\t\t\tinto   nr_proc_interno_w\n\t\t\t\t\tfrom   proc_interno\n\t\t\t\t\twhere  cd_procedimento = cd_procedimento_w;\n\t\t\t\t\t\n\t\t\t\t\tif\t(nr_proc_interno_w > 0) then\n\t\t\t\n\t\t\t\t\t\tselect b.vl_unitario_item\n\t\t\t\t\t\tinto vl_unitario_material_w\n\t\t\t\t\t\tfrom tcel_regra_preco_consig_item a,\n\t\t\t\t\t\t\ttcel_regra_preco_item_valor b\n\t\t\t\t\t\twhere a.cd_estabelecimento = cd_estabelecimento_p\n\t\t\t\t\t\tand a.cd_procedimento = nr_proc_interno_w\n\t\t\t\t\t\tand a.cd_fornecedor = cd_fornecedor_consignado_p\n\t\t\t\t\t\tand a.cd_convenio = cd_convenio_p\n\t\t\t\t\t\tand a.cd_categoria = cd_categoria_p or nvl(cd_categoria_p,0) = 0\n\t\t\t\t\t\tand a.nr_sequencia = b.nr_seq_regra\n\t\t\t\t\t\tand b.cd_material = cd_material_p;\n\n\t\t\t\t\tend if;\n\t\t\t\tend if;\n\t\t\tend if;\t\t\n\t\tend if;\n\n\t\t/*Tabela de precos*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'T') then\n\n\t\t\tselect\tnvl(max(a.vl_preco_venda),0)\n\t\t\tinto\tvl_preco_tabela_w\n\t\t\tfrom\tpreco_material a\n\t\t\twhere\ta.cd_material\t\t= cd_material_p\n\t\t\tand\ta.cd_estabelecimento\t= cd_estabelecimento_p\n\t\t\tand\ta.cd_cgc_fornecedor\t= cd_fornecedor_consignado_p\n\t\t\tand\ta.cd_tab_preco_mat\t= nvl(cd_tab_preco_mat_consig_w,a.cd_tab_preco_mat)\n\t\t\tand\ta.ie_situacao\t\t= 'A'\n\t\t\tand\ta.dt_inicio_vigencia\t= (\n\t\t\t\tselect\tmax(b.dt_inicio_vigencia)\n\t\t\t\tfrom\tpreco_material b\n\t\t\t\twhere\tb.cd_material\t\t= a.cd_material\n\t\t\t\tand\tb.cd_cgc_fornecedor\t= a.cd_cgc_fornecedor\n\t\t\t\tand\tb.cd_estabelecimento\t= a.cd_estabelecimento\n\t\t\t\tand\tb.ie_situacao\t\t= 'A'\n\t\t\t\tand\tb.cd_tab_preco_mat\t= nvl(cd_tab_preco_mat_consig_w,a.cd_tab_preco_mat));\n\n\t\t\tif\t(vl_preco_tabela_w <> 0) then\n\t\t\t\tvl_unitario_material_w \t:= vl_preco_tabela_w;\n\t\t\tend if;\n\n\t\t\tvl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w * qt_conv_estoque_consumo_w);\n\t\tend if;\n\n\t\t/*Preco convenio*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'P') then\n\n\t\t\tif\t(nvl(nr_seq_lote_fornec_p,0) <> 0) then\n\t\t\t\tselect\tmax(nr_seq_marca)\n\t\t\t\tinto\tnr_seq_marca_w\n\t\t\t\tfrom\tmaterial_lote_fornec\n\t\t\t\twhere\tnr_sequencia = nr_seq_lote_fornec_p;\n\t\t\tend if;\n\n\t\t\tdefine_preco_material(\tcd_estabelecimento_p,\t-- cd_estabelecimento_p\t\tnumber,\n\t\t\t\t\t\tcd_convenio_w,          -- cd_convenio_p          \tnumber,\n\t\t\t\t\t\tcd_categoria_p,         -- cd_categoria_p         \tvarchar2,\n\t\t\t\t\t\tdt_vigencia_p,          -- dt_vigencia_p          \tdate,\n\t\t\t\t\t\tcd_material_p,          -- cd_material_p          \tnumber,\n\t\t\t\t\t\t0,                      -- cd_tipo_acomodacao_p   \tnumber,\n\t\t\t\t\t\t0,                      -- ie_tipo_atendimento_p  \tnumber,\n\t\t\t\t\t\t0,                      -- cd_setor_atendimento_p \tnumber,\n\t\t\t\t\t\tnull,                   -- cd_cgc_fornecedor_p\t\tvarchar2,\n\t\t\t\t\t\t0,                      -- qt_idade_p\t\t\tnumber,\n\t\t\t\t\t\t0,                      -- nr_sequencia_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- cd_plano_p\t\t\tvarchar2,\n\t\t\t\t\t\tnull,                   -- cd_proc_referencia_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_origem_proc_p\t\tnumber,\n\t\t\t\t\t\tnr_seq_marca_w,         -- nr_seq_marca_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_clinica_p\t\t\tnumber,\n\t\t\t\t\t\tnull,                   -- nr_seq_classif_atend_p\tnumber,\n\t\t\t\t\t\tnr_atendimento_p,       -- nr_atendimento_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_vago_4_p\t\t\tvarchar2,\n\t\t\t\t\t\tvl_unitario_material_w, -- vl_material_p      \t out \tnumber,\n\t\t\t\t\t\tdt_utl_vigencia_w,      -- dt_ult_vigencia_p  \t out \tdate,\n\t\t\t\t\t\tcd_tab_preco_mat_w,     -- cd_tab_preco_mat_p \t out \tnumber,\n\t\t\t\t\t\tie_origem_preco_w,      -- ie_origem_preco_p  \t out \tnumber,\n\t\t\t\t\t\tnr_seq_bras_preco_w,    -- nr_seq_bras_preco_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_mat_bras_w,      -- nr_seq_mat_bras_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_conv_bras_w,     -- nr_seq_conv_bras_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_conv_simpro_w,   -- nr_seq_conv_simpro_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_mat_simpro_w,    -- nr_seq_mat_simpro_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_simpro_preco_w,  -- nr_seq_simpro_preco_p out\tnumber,\n\t\t\t\t\t\tnr_seq_ajuste_mat_w);   -- nr_seq_ajuste_mat_p\t out\tnumber\n\n\t\t\tvl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w * qt_conv_estoque_consumo_w);\n\t\tend if;\n\n\n\t\t/*Autorizacao (Valor do fornecedor)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'F') then\n\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\t\t\tselect\tnvl(max(c.vl_unitario_cotado),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a,\n\t\t\t\tmaterial_autor_cir_cot c\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand \tb.nr_sequencia \t= c.nr_sequencia\n\t\t\tand \tc.cd_cgc\t= cd_fornecedor_consignado_p\n\t\t\tand\t((nvl(a.nr_prescricao,0) = nvl(nr_prescricao_p,0)) or (nvl(nr_prescricao_p,0) = 0));\n\t\tend if;\n\n\n\t\t/*Autorizacao (Valor autorizado)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'A') then\n\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\n\t\t\tselect\tnvl(max(b.vl_unitario_material),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand\tb.ie_valor_informado = 'S';\n\t\tend if;\n\n\n\t\t/*Ultima compra*/\n\t\tif\t(nvl(vl_unitario_material_w, 0) = 0) and (ie_valor_consignado_w\t= 'U') then\n\t                select\tnvl(max(dividir((a.vl_total_item_nf - a.vl_desconto - vl_desconto_rateio + vl_frete + a.vl_despesa_acessoria + a.vl_seguro), a.qt_item_estoque)), 0)\n\t                into\tvl_unitario_material_w\n\t                from \tnota_fiscal_item a\n\t                where \ta.cd_material  = cd_material_p\n\t                and \ta.nr_sequencia =\n\t\t\t\t(\n\t\t                        select  max(i.nr_sequencia)\n\t\t                        from\tnota_fiscal_item    i,\n\t\t                                nota_fiscal         n,\n\t\t                                operacao_nota       p\n\t\t                        where\ti.nr_sequencia      =   n.nr_sequencia\n\t\t                        and     i.cd_material       =   cd_material_p\n\t\t                        and     nvl(p.ie_ultima_compra, 'S') = 'S'\n\t\t                        and\tp.cd_operacao_nf    =   n.cd_operacao_nf\n\t\t                        and\tn.ie_situacao       =   '1'\n\t\t                        and\t(\n\t\t                                    (\n                                                \tn.ie_tipo_nota = 'EF'\n\t\t                                        and n.cd_pessoa_fisica = cd_pessoa_fisica_fornec_p\n\t\t                                        and n.cd_cgc_emitente is null\n                                            \t    )\n\t\t                                    or (n.cd_cgc = cd_fornecedor_consignado_p)\n\t\t                                )\n\t                \t);\n\t\n\t                vl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w);\n\t\tend if;\n\n\n\t\t/*OPM com o procedimento SUS*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'O') then\n\n\t\t\tselect\tnvl(sus_obter_preco_proced(cd_estabelecimento_p, sysdate, 1, obter_proced_mat_esp_sus(cd_material_p), 7, 1),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tdual;\n\t\tend if;\n\n\t\t/*Autorizacao de materiais especiais*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w = 'E') then\n\n\t\t\tif\t(cd_convenio_w is null) then\n\t\t\t\tcd_convenio_w := obter_convenio_atendimento(nr_atendimento_p);\n\t\t\tend if;\n\t\t\tobter_preco_conv_mat_fornec(cd_convenio_w, cd_fornecedor_consignado_p, cd_material_p, dt_atualizacao_p, vl_unitario_material_w);\n\t\tend if;\n\n\t\t/*Autorizacao sem prescricao (Valor do fornecedor)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'D') then\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\t\t\tselect\tnvl(max(c.vl_unitario_cotado),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a,\n\t\t\t\tmaterial_autor_cir_cot c\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand \tb.nr_sequencia \t= c.nr_sequencia\n\t\t\tand \tc.cd_cgc\t= cd_fornecedor_consignado_p;\n\t\tend if;\n        \n        /* Contrato */\n        if (nvl(pkg_i18n.get_user_locale, 'pt_BR') = 'es_MX') and(nvl(vl_unitario_material_w, 0) = 0) and\n            (ie_valor_consignado_w = 'C') and (cd_pessoa_fisica_fornec_p is not null) then\n            begin\n               select    nvl(c.vl_saldo_total, c.vl_pagto)\n               into      vl_unitario_material_w\n               from      contrato            a,\n                         contrato_regra_nf   c\n               where     a.nr_sequencia = c.nr_seq_contrato\n               and       a.cd_pessoa_contratada = cd_pessoa_fisica_fornec_p\n               and       c.cd_material = cd_material_p\n               and       nvl(c.dt_inicio_vigencia, sysdate) <= sysdate\n               and       nvl(c.dt_fim_vigencia, sysdate) >= sysdate\n               and       nvl(c.ie_situacao, 'A') = 'A'\n               and       (c.cd_estab_regra = cd_estabelecimento_p or c.cd_estab_regra is null)\n               and       a.dt_inicio <= sysdate\n               and       nvl(dt_fim, sysdate) >= sysdate\n               and       a.ie_situacao = 'A'\n               and       (a.cd_estabelecimento = cd_estabelecimento_p\n                            or exists (select 1 from contrato_estab_adic b\n                                       where  a.nr_sequencia = b.nr_seq_contrato\n                                       and    b.cd_estab_adic = cd_estabelecimento_p))\n               and rownum = 1\n               order by a.nr_sequencia desc;\n            exception\n               when no_data_found or too_many_rows then\n                  vl_unitario_material_w := 0;\n            end;\n        elsif (nvl(vl_unitario_material_w, 0) = 0) and\n               (ie_valor_consignado_w = 'C') then\n            begin\n               select    nvl(c.vl_saldo_total, c.vl_pagto)\n               into      vl_unitario_material_w\n               from      contrato            a,\n                         contrato_regra_nf   c\n               where     a.nr_sequencia = c.nr_seq_contrato\n               and       a.cd_cgc_contratado = cd_fornecedor_consignado_p\n               and       c.cd_material = cd_material_p\n               and       nvl(c.dt_inicio_vigencia, sysdate) <= sysdate\n               and       nvl(c.dt_fim_vigencia, sysdate) >= sysdate\n               and       nvl(c.ie_situacao, 'A') = 'A'\n               and       (c.cd_estab_regra = cd_estabelecimento_p or c.cd_estab_regra is null)\n               and       a.dt_inicio <= sysdate\n               and       nvl(dt_fim, sysdate) >= sysdate\n               and       a.ie_situacao = 'A'\n               and       (a.cd_estabelecimento = cd_estabelecimento_p\n                            or exists (select 1 from contrato_estab_adic b\n                                       where  a.nr_sequencia = b.nr_seq_contrato\n                                       and    b.cd_estab_adic = cd_estabelecimento_p))\n               and rownum = 1\n               order by a.nr_sequencia desc;\n            exception\n               when no_data_found or too_many_rows then\n                  vl_unitario_material_w := 0;\n            end;\n          end if;\n        \n\t\tend;\n\tend loop;\n\tclose C02;\n\nend if;\n\nvl_unitario_material_p := vl_unitario_material_w;\n\nend tcel_obter_vl_mat_ordem_consig;\n/"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 700052,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "0add7633-7038-481a-8ce4-c1828066bd36"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG",
      "old_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tnr_seq_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber,\n\t\t\tdt_atualizacao_p in date) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect vl_unitario_material\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_seq_prescricao_p;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  dt_atualizacao_p,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) and \n\t\t     (nvl(vl_unitario_material2_w,0) > 0) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material2_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material2_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/",
      "old_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tnr_seq_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber,\n\t\t\tdt_atualizacao_p in date) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect vl_unitario_material\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_seq_prescricao_p;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  dt_atualizacao_p,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material2_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material2_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 700053,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "0f4dedb4-2860-428a-9bb7-36dbaf03f8be"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG",
      "old_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tnr_seq_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect vl_unitario_material\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_seq_prescricao_p;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  sysdate,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material2_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material2_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/",
      "old_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tnr_seq_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber,\n\t\t\tdt_atualizacao_p in date) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect vl_unitario_material\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_seq_prescricao_p;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  dt_atualizacao_p,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) and \n\t\t     (nvl(vl_unitario_material2_w,0) > 0) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material2_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material2_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 700054,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "9e70eb35-3766-4904-9340-f2f00569bbef"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG",
      "old_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tnr_seq_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect vl_unitario_material\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_seq_prescricao_p;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  sysdate,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material2_w,0) > 0) and (nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material2_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material2_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/",
      "old_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tnr_seq_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect vl_unitario_material\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_seq_prescricao_p;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  sysdate,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material2_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material2_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/"
    } ]
  }, {
    "event_info" : {
      "date" : "24/01/2025 12:53:18",
      "sequence" : 700055,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "10412929-40aa-4a76-8538-543afccfc85e"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG",
      "old_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tnr_seq_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect vl_unitario_material\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_seq_prescricao_p;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  sysdate,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material2_w,0) > 0) and (nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material2_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material2_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p\n                and nr_item_oci = nr_seq_prescricao_p;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/",
      "old_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tnr_seq_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect vl_unitario_material\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_seq_prescricao_p;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  sysdate,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material2_w,0) > 0) and (nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material2_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material2_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/"
    } ]
  }, {
    "event_info" : {
      "date" : "04/02/2025 14:47:29",
      "sequence" : 50,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "90df2ab3-c099-415c-b2cc-f271b1fc3729"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133127,
      "old_value" : 1133127
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "04/02/2025 14:47:29",
      "sequence" : 1350,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "4b83abef-962b-4d89-9bd7-517a1a9f7d63"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133168,
      "old_value" : 1133168
    } ],
    "column_values" : [ ]
  },    {
    "event_info" : {
      "date" : "04/02/2025 14:47:29",
      "sequence" : 1450,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "2b3e748f-91ff-4b00-8fde-03214d8c0945"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133303,
      "old_value" : 1133303
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "04/02/2025 14:47:29",
      "sequence" : 1600,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "7747b2cf-5d00-4363-b715-843035900606"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133315,
      "old_value" : 1133315
    } ],
    "column_values" : [ ]
  },  {
    "event_info" : {
      "date" : "04/02/2025 14:47:29",
      "sequence" : 700040,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "5f187c80-2224-49aa-8540-5058b1d856fc"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG",
      "old_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ ]
  },  {
    "event_info" : {
      "date" : "04/02/2025 14:47:29",
      "sequence" : 700056,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "4f5bc216-efad-4a24-a9b1-a2d9587a1d87"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ENVIA_EMAIL_FORNECEDOR_TIE",
      "old_value" : "TCEL_ENVIA_EMAIL_FORNECEDOR_TIE"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ {
      "column_name" : "IE_MEMORIA",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    }, {
      "column_name" : "DT_CRIACAO",
      "data_type" : "DATE",
      "new_value" : null,
      "old_value" : "04/02/2025 14:47:29"
    }, {
      "column_name" : "IE_GERAR_SCRIPT",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : "S"
    }, {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace\nprocedure tcel_envia_email_fornecedor_tie (\n\t\t\tnr_ordem_compra_p\tnumber,\n\t\t\tcd_estabelecimento_p\tnumber,\n\t\t\tcd_fornecedor_p\t\t\tvarchar2,\n\t\t\tnm_usuario_p\t\tvarchar2) is\n\nrecipient_w\t\t\t\tpessoa_juridica.ds_email%type;\n\nJSON_W PHILIPS_JSON := PHILIPS_JSON(); \nJSON_DATA_W              CLOB;\n\nbegin\n\n\tselect\tsubstr(nvl(b.ds_email,a.ds_email),1,2000)\n\tinto\trecipient_w\n\tfrom\tpessoa_juridica_estab b,\n\t\tpessoa_juridica a\n\twhere\ta.cd_cgc = b.cd_cgc(+)\n\tand\tnvl(b.cd_estabelecimento, cd_estabelecimento_p) = cd_estabelecimento_p\n\tand\ta.cd_cgc = cd_fornecedor_p;\n\t\n\tif (recipient_w is not null) then\n\n\t\tJSON_W.PUT('code', 483);\n\t\tJSON_W.PUT('type', 'WSUP');\n\t\tJSON_W.PUT('title', 'Ordem_Compra ' || nr_ordem_compra_p);\n\t\tJSON_W.PUT('subject', 'Ordem Compra ' || nr_ordem_compra_p);\n\t\tJSON_W.PUT('content', 'Dados referentes a Ordem Compra ' || nr_ordem_compra_p);\t\t\n\t\tJSON_W.PUT('parameters', '{\"NR_ORDEM_COMPRA\": \"' || nr_ordem_compra_p || '\"}');\n\t\tJSON_W.PUT('recipientEmails', '[\"' || recipient_w || '\"]');\n\t\tJSON_W.PUT('readCOnfirmation', 'true');\n\n\t\tSYS.DBMS_LOB.CREATETEMPORARY(JSON_DATA_W, TRUE); \n\t\tJSON_W.TO_CLOB(JSON_DATA_W); \n    \n    JSON_DATA_W := BIFROST.SEND_INTEGRATION_CONTENT('opme.export.purchase.order.event', JSON_DATA_W, nm_usuario_p); \n\t\n\tend if;\n\nend tcel_envia_email_fornecedor_tie;\n/",
      "old_value" : "create or replace\nprocedure tcel_envia_email_fornecedor_tie (\n\t\t\tnr_ordem_compra_p\tnumber,\n\t\t\tcd_estabelecimento_p\tnumber,\n\t\t\tcd_fornecedor_p\t\t\tvarchar2,\n\t\t\tnm_usuario_p\t\tvarchar2) is\n\nrecipient_w\t\t\t\tpessoa_juridica.ds_email%type;\n\nJSON_W PHILIPS_JSON := PHILIPS_JSON(); \nJSON_DATA_W              CLOB;\n\nbegin\n\n\tselect\tsubstr(nvl(b.ds_email,a.ds_email),1,2000)\n\tinto\trecipient_w\n\tfrom\tpessoa_juridica_estab b,\n\t\tpessoa_juridica a\n\twhere\ta.cd_cgc = b.cd_cgc(+)\n\tand\tnvl(b.cd_estabelecimento, cd_estabelecimento_p) = cd_estabelecimento_p\n\tand\ta.cd_cgc = cd_fornecedor_p;\n\t\n\tif (recipient_w is not null) then\n\n\t\tJSON_W.PUT('reportCode', 483);\n\t\tJSON_W.PUT('reportType', 'WSUP');\n\t\tJSON_W.PUT('nrOrdemCompra', nr_ordem_compra_p);\n\t\tJSON_W.PUT('fileName', 'Ordem_Compra_' || nr_ordem_compra_p);\n\t\tJSON_W.PUT('recipient', recipient_w);\n\t\tJSON_W.PUT('subject', 'Ordem Compra ' || nr_ordem_compra_p);\n\t\tJSON_W.PUT('content', ' ');\n\t\tJSON_W.PUT('readCOnfirmation', true);\n\n\t\tSYS.DBMS_LOB.CREATETEMPORARY(JSON_DATA_W, TRUE); \n\t\tJSON_W.TO_CLOB(JSON_DATA_W); \n    \n    JSON_DATA_W := BIFROST.SEND_INTEGRATION_CONTENT('opme.export.purchase.order.event', JSON_DATA_W, nm_usuario_p); \n\t\n\tend if;\n\nend tcel_envia_email_fornecedor_tie;\n/"
    }, {
      "column_name" : "IE_CRIPTOGRAFIA",
      "data_type" : "VARCHAR2",
      "new_value" : null,
      "old_value" : "N"
    } ]
  }, {
    "event_info" : {
      "date" : "04/02/2025 14:47:29",
      "sequence" : 700057,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "e44f4cd8-f64a-4ecd-a86f-d2f705b09cda"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG",
      "old_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tnr_seq_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nnr_item_oci_w\t\t\t\tordem_compra_item.nr_item_oci%type;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(nr_ordem_compra,0)\ninto\tnr_ordem_compra_w\nfrom ordem_compra\nwhere cd_cgc_fornecedor = cd_fornecedor_consignado_p\nand nr_prescricao = nr_prescricao_p\nand nr_atendimento = nr_atendimento_p\nand\tie_tipo_ordem = 'W'\nand\tdt_baixa\tis null\nand\tdt_emissao\tis null\nand dt_liberacao is null\nand dt_aprovacao is null;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect nvl(max(nr_item_oci),0)\n\tinto nr_item_oci_w\n    from ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p;\n\t\n\tselect nvl(vl_unitario_material,0)\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_item_oci_w;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  sysdate,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material2_w,0) > 0) and (nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material2_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material2_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p\n\t\tand nr_item_oci = nr_item_oci_w;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/",
      "old_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tnr_seq_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect vl_unitario_material\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_seq_prescricao_p;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  sysdate,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material2_w,0) > 0) and (nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material2_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material2_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p\n                and nr_item_oci = nr_seq_prescricao_p;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/"
    } ]
  }, {
    "event_info" : {
      "date" : "04/02/2025 14:47:29",
      "sequence" : 700058,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "3fa81405-3882-47d6-bfe8-064f980b74d8"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG",
      "old_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nnr_item_oci_w\t\t\t\tordem_compra_item.nr_item_oci%type;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(nr_ordem_compra,0)\ninto\tnr_ordem_compra_w\nfrom ordem_compra\nwhere cd_cgc_fornecedor = cd_fornecedor_consignado_p\nand nr_prescricao = nr_prescricao_p\nand nr_atendimento = nr_atendimento_p\nand\tie_tipo_ordem = 'W'\nand\tdt_baixa\tis null\nand\tdt_emissao\tis null\nand dt_liberacao is null\nand dt_aprovacao is null;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect nvl(max(nr_item_oci),0)\n\tinto nr_item_oci_w\n    from ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p;\n\t\n\tselect nvl(vl_unitario_material,0)\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_item_oci_w;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  sysdate,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material2_w,0) > 0) and (nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material2_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material2_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p\n\t\tand nr_item_oci = nr_item_oci_w;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/",
      "old_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tnr_seq_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nnr_item_oci_w\t\t\t\tordem_compra_item.nr_item_oci%type;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(nr_ordem_compra,0)\ninto\tnr_ordem_compra_w\nfrom ordem_compra\nwhere cd_cgc_fornecedor = cd_fornecedor_consignado_p\nand nr_prescricao = nr_prescricao_p\nand nr_atendimento = nr_atendimento_p\nand\tie_tipo_ordem = 'W'\nand\tdt_baixa\tis null\nand\tdt_emissao\tis null\nand dt_liberacao is null\nand dt_aprovacao is null;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect nvl(max(nr_item_oci),0)\n\tinto nr_item_oci_w\n    from ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p;\n\t\n\tselect nvl(vl_unitario_material,0)\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_item_oci_w;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  sysdate,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material2_w,0) > 0) and (nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material2_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material2_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p\n\t\tand nr_item_oci = nr_item_oci_w;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/"
    } ]
  }, {
    "event_info" : {
      "date" : "04/02/2025 14:47:29",
      "sequence" : 700059,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "15d96be6-2808-421a-a780-1b39445b0d33"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG",
      "old_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace\nprocedure tcel_obter_vl_mat_ordem_consig(\n    cd_estabelecimento_p        in  material_lote_fornec.cd_estabelecimento%type,\n    cd_fornecedor_consignado_p\tin  nota_fiscal.cd_cgc_emitente%type,\n    cd_pessoa_fisica_fornec_p   in  nota_fiscal.cd_pessoa_fisica%type default null,\n    cd_material_p               in  material.cd_material%type,\n    nr_ordem_compra_p           in  ordem_compra.nr_ordem_compra%type,\n    nr_prescricao_p             in  material_atend_paciente.nr_prescricao%type,\n    nr_atendimento_p            in  material_atend_paciente.nr_atendimento%type,\n    ie_tipo_atendimento_p       in  regra_valor_ordem_consig.ie_valor_consignado%type,\n    nr_seq_agenda_p             in  agenda_paciente.nr_sequencia%type,\n    dt_atualizacao_p            in  nota_fiscal.dt_atualizacao%type,\n    nr_seq_lote_fornec_p        in  material_lote_fornec.nr_sequencia%type,\n    cd_convenio_p               in  material_atend_paciente.cd_convenio%type,\n    cd_categoria_p              in  atendimento_paciente_v.cd_categoria%type,\n    dt_vigencia_p               in  nota_fiscal_item.dt_validade%type,\n    vl_unitario_material_p      out nota_fiscal_item.vl_unitario_item_nf%type\n) is\n\n\nnr_sequencia_w\t\t\t\tregra_valor_ordem_consig.nr_sequencia%type;\ncd_grupo_material_w\t\t\tgrupo_material.cd_grupo_material%type;\ncd_subgrupo_material_w\t\t\tsubgrupo_material.cd_subgrupo_material%type;\ncd_classe_material_w\t\t\tclasse_material.cd_classe_material%type;\nie_valor_consignado_w\t\t\tregra_preco_ordem_consig.ie_valor_consignado%type := 'N';\nvl_unitario_material_w\t\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_preco_tabela_w\t\t\tpreco_material.vl_preco_venda%type;\nqt_conv_compra_estoque_w\t\tmaterial.qt_conv_compra_estoque%type;\nqt_conv_estoque_consumo_w\t\tmaterial.qt_conv_estoque_consumo%type;\ncd_tab_preco_mat_consig_w\t\tparametro_compras.cd_tab_preco_mat_consig%type;\ndt_utl_vigencia_w\t\t\tdate;\ncd_tab_preco_mat_w\t\t\tnumber(10,0);\nie_origem_preco_w\t\t\tnumber(10,0);\nnr_seq_bras_preco_w\t\t\tnumber(10,0);\nnr_seq_mat_bras_w\t\t\tnumber(10,0);\nnr_seq_conv_bras_w\t\t\tnumber(10,0);\nnr_seq_conv_simpro_w\t\t\tnumber(10,0);\nnr_seq_mat_simpro_w\t\t\tnumber(10,0);\nnr_seq_simpro_preco_w\t\t\tnumber(10,0);\nnr_seq_ajuste_mat_w\t\t\tnumber(10,0);\nnr_seq_marca_w\t\t\t\tmarca.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tcirurgia.nr_cirurgia%type;\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\ncd_convenio_w\t\t\t\tconvenio.cd_convenio%type;\nie_preco_sus_oc_w\t\t\tvarchar2(1);\ncd_procedimento_w\t\t\tnumber(15);\nnr_proc_interno_w procedimento.nr_proc_interno%type;\n\ncursor c01 is\nselect\tnr_sequencia\nfrom\tregra_valor_ordem_consig\nwhere\tcd_estabelecimento = cd_estabelecimento_p\nand\tnvl(cd_grupo_material, cd_grupo_material_w)\t\t= cd_grupo_material_w\nand\tnvl(cd_subgrupo_material, cd_subgrupo_material_w)\t= cd_subgrupo_material_w\nand\tnvl(cd_classe_material, cd_classe_material_w)\t\t= cd_classe_material_w\nand\t(nvl(cd_material, cd_material_p) \t\t\t= cd_material_p or cd_material_p = 0)\nand\t((nvl(cd_cnpj, cd_fornecedor_consignado_p)\t\t= cd_fornecedor_consignado_p) or (cd_cnpj is null))\norder by\n\tnvl(cd_material, 0),\n\tnvl(cd_classe_material, 0),\n\tnvl(cd_subgrupo_material, 0),\n\tnvl(cd_grupo_material, 0),\n\tnvl(cd_cnpj, 'xxx');\n\ncursor c02 is\nselect\tie_valor_consignado\nfrom\tregra_preco_ordem_consig\nwhere\tnr_seq_regra = nr_sequencia_w\norder by nr_seq_prioridade;\n\nbegin\n\nnr_seq_agenda_w := nvl(nr_seq_agenda_p,0);\ncd_convenio_w\t:= cd_convenio_p;\n\nselect\ta.cd_grupo_material,\n\ta.cd_subgrupo_material,\n\ta.cd_classe_material\ninto\tcd_grupo_material_w,\n\tcd_subgrupo_material_w,\n\tcd_classe_material_w\nfrom\testrutura_material_v a\nwhere\ta.cd_material = cd_material_p;\n\nselect\tqt_conv_compra_estoque,\n\tqt_conv_estoque_consumo\ninto \tqt_conv_compra_estoque_w,\n\tqt_conv_estoque_consumo_w\nfrom \tmaterial\nwhere \tcd_material = nvl(cd_material_p,0);\n\nselect\tcd_tab_preco_mat_consig\ninto\tcd_tab_preco_mat_consig_w\nfrom\tparametro_compras\nwhere\tcd_estabelecimento = cd_estabelecimento_p;\n\nopen C01;\nloop\nfetch C01 into\n\tnr_sequencia_w;\nexit when C01%notfound;\n\tbegin\n\t/*Busca a sequencia da regra de preco de acordo com as informacoes do material*/\n\tnr_sequencia_w := nr_sequencia_w;\n\tend;\nend loop;\nclose C01;\n\nif\t(nr_sequencia_w > 0) then\n\n\t/*Esse cursor serve para bucar o preco conforme a regra, seguindo a prioridade.\n\tQuando ele encontra o valor, ele sai fora do cursor. Enquanto o valor e zero, ele vai tentando buscar o preco*/\n\topen C02;\n\tloop\n\tfetch C02 into\n\t\tie_valor_consignado_w;\n\texit when C02%notfound or vl_unitario_material_w > 0;\n\t\tbegin\n\t\t\n\t\t/*Tabela de Oportunidades*/\n\t\t\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'V') then\n\t\t\t\n\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\tinto\tnr_cirurgia_w\n\t\t\tfrom\tordem_compra\n\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\n\t\t\t\tselect\tnvl(max(cd_procedimento_princ),0)\n\t\t\t\tinto\tcd_procedimento_w\n\t\t\t\tfrom\tcirurgia a\n\t\t\t\twhere\ta.nr_cirurgia\t\t= nr_cirurgia_w;\n\t\t\t\t\n\t\t\t\tif\t(cd_procedimento_w > 0) then\n\t\t\t\t\n\t\t\t\t\tselect nvl(max(nr_sequencia),0)\n\t\t\t\t\tinto   nr_proc_interno_w\n\t\t\t\t\tfrom   proc_interno\n\t\t\t\t\twhere  cd_procedimento = cd_procedimento_w;\n\t\t\t\t\t\n\t\t\t\t\tif\t(nr_proc_interno_w > 0) then\n\t\t\t\n\t\t\t\t\t\tselect nvl(max(b.vl_unitario_item), 0)\n\t\t\t\t\t\tinto vl_unitario_material_w\n\t\t\t\t\t\tfrom tcel_regra_preco_consig_item a,\n\t\t\t\t\t\t\ttcel_regra_preco_item_valor b\n\t\t\t\t\t\twhere a.cd_estabelecimento = cd_estabelecimento_p\n\t\t\t\t\t\tand a.cd_procedimento = nr_proc_interno_w\n\t\t\t\t\t\tand a.cd_fornecedor = cd_fornecedor_consignado_p\n\t\t\t\t\t\tand a.cd_convenio = cd_convenio_p\n\t\t\t\t\t\tand (a.cd_categoria = cd_categoria_p or nvl(a.cd_categoria,0) = 0 or nvl(cd_categoria_p,0) = 0)\n\t\t\t\t\t\tand a.ie_situacao = 'A'\n\t\t\t\t\t\tand a.nr_sequencia = b.nr_seq_regra\n\t\t\t\t\t\tand b.cd_material = cd_material_p;\n\n\t\t\t\t\tend if;\n\t\t\t\tend if;\n\t\t\tend if;\t\t\n\t\tend if;\n\n\t\t/*Tabela de precos*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'T') then\n\n\t\t\tselect\tnvl(max(a.vl_preco_venda),0)\n\t\t\tinto\tvl_preco_tabela_w\n\t\t\tfrom\tpreco_material a\n\t\t\twhere\ta.cd_material\t\t= cd_material_p\n\t\t\tand\ta.cd_estabelecimento\t= cd_estabelecimento_p\n\t\t\tand\ta.cd_cgc_fornecedor\t= cd_fornecedor_consignado_p\n\t\t\tand\ta.cd_tab_preco_mat\t= nvl(cd_tab_preco_mat_consig_w,a.cd_tab_preco_mat)\n\t\t\tand\ta.ie_situacao\t\t= 'A'\n\t\t\tand\ta.dt_inicio_vigencia\t= (\n\t\t\t\tselect\tmax(b.dt_inicio_vigencia)\n\t\t\t\tfrom\tpreco_material b\n\t\t\t\twhere\tb.cd_material\t\t= a.cd_material\n\t\t\t\tand\tb.cd_cgc_fornecedor\t= a.cd_cgc_fornecedor\n\t\t\t\tand\tb.cd_estabelecimento\t= a.cd_estabelecimento\n\t\t\t\tand\tb.ie_situacao\t\t= 'A'\n\t\t\t\tand\tb.cd_tab_preco_mat\t= nvl(cd_tab_preco_mat_consig_w,a.cd_tab_preco_mat));\n\n\t\t\tif\t(vl_preco_tabela_w <> 0) then\n\t\t\t\tvl_unitario_material_w \t:= vl_preco_tabela_w;\n\t\t\tend if;\n\n\t\t\tvl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w * qt_conv_estoque_consumo_w);\n\t\tend if;\n\n\t\t/*Preco convenio*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'P') then\n\n\t\t\tif\t(nvl(nr_seq_lote_fornec_p,0) <> 0) then\n\t\t\t\tselect\tmax(nr_seq_marca)\n\t\t\t\tinto\tnr_seq_marca_w\n\t\t\t\tfrom\tmaterial_lote_fornec\n\t\t\t\twhere\tnr_sequencia = nr_seq_lote_fornec_p;\n\t\t\tend if;\n\n\t\t\tdefine_preco_material(\tcd_estabelecimento_p,\t-- cd_estabelecimento_p\t\tnumber,\n\t\t\t\t\t\tcd_convenio_w,          -- cd_convenio_p          \tnumber,\n\t\t\t\t\t\tcd_categoria_p,         -- cd_categoria_p         \tvarchar2,\n\t\t\t\t\t\tdt_vigencia_p,          -- dt_vigencia_p          \tdate,\n\t\t\t\t\t\tcd_material_p,          -- cd_material_p          \tnumber,\n\t\t\t\t\t\t0,                      -- cd_tipo_acomodacao_p   \tnumber,\n\t\t\t\t\t\t0,                      -- ie_tipo_atendimento_p  \tnumber,\n\t\t\t\t\t\t0,                      -- cd_setor_atendimento_p \tnumber,\n\t\t\t\t\t\tnull,                   -- cd_cgc_fornecedor_p\t\tvarchar2,\n\t\t\t\t\t\t0,                      -- qt_idade_p\t\t\tnumber,\n\t\t\t\t\t\t0,                      -- nr_sequencia_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- cd_plano_p\t\t\tvarchar2,\n\t\t\t\t\t\tnull,                   -- cd_proc_referencia_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_origem_proc_p\t\tnumber,\n\t\t\t\t\t\tnr_seq_marca_w,         -- nr_seq_marca_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_clinica_p\t\t\tnumber,\n\t\t\t\t\t\tnull,                   -- nr_seq_classif_atend_p\tnumber,\n\t\t\t\t\t\tnr_atendimento_p,       -- nr_atendimento_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_vago_4_p\t\t\tvarchar2,\n\t\t\t\t\t\tvl_unitario_material_w, -- vl_material_p      \t out \tnumber,\n\t\t\t\t\t\tdt_utl_vigencia_w,      -- dt_ult_vigencia_p  \t out \tdate,\n\t\t\t\t\t\tcd_tab_preco_mat_w,     -- cd_tab_preco_mat_p \t out \tnumber,\n\t\t\t\t\t\tie_origem_preco_w,      -- ie_origem_preco_p  \t out \tnumber,\n\t\t\t\t\t\tnr_seq_bras_preco_w,    -- nr_seq_bras_preco_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_mat_bras_w,      -- nr_seq_mat_bras_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_conv_bras_w,     -- nr_seq_conv_bras_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_conv_simpro_w,   -- nr_seq_conv_simpro_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_mat_simpro_w,    -- nr_seq_mat_simpro_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_simpro_preco_w,  -- nr_seq_simpro_preco_p out\tnumber,\n\t\t\t\t\t\tnr_seq_ajuste_mat_w);   -- nr_seq_ajuste_mat_p\t out\tnumber\n\n\t\t\tvl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w * qt_conv_estoque_consumo_w);\n\t\tend if;\n\n\n\t\t/*Autorizacao (Valor do fornecedor)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'F') then\n\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\t\t\tselect\tnvl(max(c.vl_unitario_cotado),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a,\n\t\t\t\tmaterial_autor_cir_cot c\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand \tb.nr_sequencia \t= c.nr_sequencia\n\t\t\tand \tc.cd_cgc\t= cd_fornecedor_consignado_p\n\t\t\tand\t((nvl(a.nr_prescricao,0) = nvl(nr_prescricao_p,0)) or (nvl(nr_prescricao_p,0) = 0));\n\t\tend if;\n\n\n\t\t/*Autorizacao (Valor autorizado)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'A') then\n\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\n\t\t\tselect\tnvl(max(b.vl_unitario_material),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand\tb.ie_valor_informado = 'S';\n\t\tend if;\n\n\n\t\t/*Ultima compra*/\n\t\tif\t(nvl(vl_unitario_material_w, 0) = 0) and (ie_valor_consignado_w\t= 'U') then\n\t                select\tnvl(max(dividir((a.vl_total_item_nf - a.vl_desconto - vl_desconto_rateio + vl_frete + a.vl_despesa_acessoria + a.vl_seguro), a.qt_item_estoque)), 0)\n\t                into\tvl_unitario_material_w\n\t                from \tnota_fiscal_item a\n\t                where \ta.cd_material  = cd_material_p\n\t                and \ta.nr_sequencia =\n\t\t\t\t(\n\t\t                        select  max(i.nr_sequencia)\n\t\t                        from\tnota_fiscal_item    i,\n\t\t                                nota_fiscal         n,\n\t\t                                operacao_nota       p\n\t\t                        where\ti.nr_sequencia      =   n.nr_sequencia\n\t\t                        and     i.cd_material       =   cd_material_p\n\t\t                        and     nvl(p.ie_ultima_compra, 'S') = 'S'\n\t\t                        and\tp.cd_operacao_nf    =   n.cd_operacao_nf\n\t\t                        and\tn.ie_situacao       =   '1'\n\t\t                        and\t(\n\t\t                                    (\n                                                \tn.ie_tipo_nota = 'EF'\n\t\t                                        and n.cd_pessoa_fisica = cd_pessoa_fisica_fornec_p\n\t\t                                        and n.cd_cgc_emitente is null\n                                            \t    )\n\t\t                                    or (n.cd_cgc = cd_fornecedor_consignado_p)\n\t\t                                )\n\t                \t);\n\t\n\t                vl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w);\n\t\tend if;\n\n\n\t\t/*OPM com o procedimento SUS*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'O') then\n\n\t\t\tselect\tnvl(sus_obter_preco_proced(cd_estabelecimento_p, sysdate, 1, obter_proced_mat_esp_sus(cd_material_p), 7, 1),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tdual;\n\t\tend if;\n\n\t\t/*Autorizacao de materiais especiais*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w = 'E') then\n\n\t\t\tif\t(cd_convenio_w is null) then\n\t\t\t\tcd_convenio_w := obter_convenio_atendimento(nr_atendimento_p);\n\t\t\tend if;\n\t\t\tobter_preco_conv_mat_fornec(cd_convenio_w, cd_fornecedor_consignado_p, cd_material_p, dt_atualizacao_p, vl_unitario_material_w);\n\t\tend if;\n\n\t\t/*Autorizacao sem prescricao (Valor do fornecedor)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'D') then\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\t\t\tselect\tnvl(max(c.vl_unitario_cotado),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a,\n\t\t\t\tmaterial_autor_cir_cot c\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand \tb.nr_sequencia \t= c.nr_sequencia\n\t\t\tand \tc.cd_cgc\t= cd_fornecedor_consignado_p;\n\t\tend if;\n        \n        /* Contrato */\n        if (nvl(pkg_i18n.get_user_locale, 'pt_BR') = 'es_MX') and(nvl(vl_unitario_material_w, 0) = 0) and\n            (ie_valor_consignado_w = 'C') and (cd_pessoa_fisica_fornec_p is not null) then\n            begin\n               select    nvl(c.vl_saldo_total, c.vl_pagto)\n               into      vl_unitario_material_w\n               from      contrato            a,\n                         contrato_regra_nf   c\n               where     a.nr_sequencia = c.nr_seq_contrato\n               and       a.cd_pessoa_contratada = cd_pessoa_fisica_fornec_p\n               and       c.cd_material = cd_material_p\n               and       nvl(c.dt_inicio_vigencia, sysdate) <= sysdate\n               and       nvl(c.dt_fim_vigencia, sysdate) >= sysdate\n               and       nvl(c.ie_situacao, 'A') = 'A'\n               and       (c.cd_estab_regra = cd_estabelecimento_p or c.cd_estab_regra is null)\n               and       a.dt_inicio <= sysdate\n               and       nvl(dt_fim, sysdate) >= sysdate\n               and       a.ie_situacao = 'A'\n               and       (a.cd_estabelecimento = cd_estabelecimento_p\n                            or exists (select 1 from contrato_estab_adic b\n                                       where  a.nr_sequencia = b.nr_seq_contrato\n                                       and    b.cd_estab_adic = cd_estabelecimento_p))\n               and rownum = 1\n               order by a.nr_sequencia desc;\n            exception\n               when no_data_found or too_many_rows then\n                  vl_unitario_material_w := 0;\n            end;\n        elsif (nvl(vl_unitario_material_w, 0) = 0) and\n               (ie_valor_consignado_w = 'C') then\n            begin\n               select    nvl(c.vl_saldo_total, c.vl_pagto)\n               into      vl_unitario_material_w\n               from      contrato            a,\n                         contrato_regra_nf   c\n               where     a.nr_sequencia = c.nr_seq_contrato\n               and       a.cd_cgc_contratado = cd_fornecedor_consignado_p\n               and       c.cd_material = cd_material_p\n               and       nvl(c.dt_inicio_vigencia, sysdate) <= sysdate\n               and       nvl(c.dt_fim_vigencia, sysdate) >= sysdate\n               and       nvl(c.ie_situacao, 'A') = 'A'\n               and       (c.cd_estab_regra = cd_estabelecimento_p or c.cd_estab_regra is null)\n               and       a.dt_inicio <= sysdate\n               and       nvl(dt_fim, sysdate) >= sysdate\n               and       a.ie_situacao = 'A'\n               and       (a.cd_estabelecimento = cd_estabelecimento_p\n                            or exists (select 1 from contrato_estab_adic b\n                                       where  a.nr_sequencia = b.nr_seq_contrato\n                                       and    b.cd_estab_adic = cd_estabelecimento_p))\n               and rownum = 1\n               order by a.nr_sequencia desc;\n            exception\n               when no_data_found or too_many_rows then\n                  vl_unitario_material_w := 0;\n            end;\n          end if;\n\t\tend;\n\tend loop;\n\tclose C02;\n\nend if;\n\nvl_unitario_material_p := vl_unitario_material_w;\n\nend tcel_obter_vl_mat_ordem_consig;\n/",
      "old_value" : "create or replace\nprocedure tcel_obter_vl_mat_ordem_consig(\n    cd_estabelecimento_p        in  material_lote_fornec.cd_estabelecimento%type,\n    cd_fornecedor_consignado_p\tin  nota_fiscal.cd_cgc_emitente%type,\n    cd_pessoa_fisica_fornec_p   in  nota_fiscal.cd_pessoa_fisica%type default null,\n    cd_material_p               in  material.cd_material%type,\n    nr_ordem_compra_p           in  ordem_compra.nr_ordem_compra%type,\n    nr_prescricao_p             in  material_atend_paciente.nr_prescricao%type,\n    nr_atendimento_p            in  material_atend_paciente.nr_atendimento%type,\n    ie_tipo_atendimento_p       in  regra_valor_ordem_consig.ie_valor_consignado%type,\n    nr_seq_agenda_p             in  agenda_paciente.nr_sequencia%type,\n    dt_atualizacao_p            in  nota_fiscal.dt_atualizacao%type,\n    nr_seq_lote_fornec_p        in  material_lote_fornec.nr_sequencia%type,\n    cd_convenio_p               in  material_atend_paciente.cd_convenio%type,\n    cd_categoria_p              in  atendimento_paciente_v.cd_categoria%type,\n    dt_vigencia_p               in  nota_fiscal_item.dt_validade%type,\n    vl_unitario_material_p      out nota_fiscal_item.vl_unitario_item_nf%type\n) is\n\n\nnr_sequencia_w\t\t\t\tregra_valor_ordem_consig.nr_sequencia%type;\ncd_grupo_material_w\t\t\tgrupo_material.cd_grupo_material%type;\ncd_subgrupo_material_w\t\t\tsubgrupo_material.cd_subgrupo_material%type;\ncd_classe_material_w\t\t\tclasse_material.cd_classe_material%type;\nie_valor_consignado_w\t\t\tregra_preco_ordem_consig.ie_valor_consignado%type := 'N';\nvl_unitario_material_w\t\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_preco_tabela_w\t\t\tpreco_material.vl_preco_venda%type;\nqt_conv_compra_estoque_w\t\tmaterial.qt_conv_compra_estoque%type;\nqt_conv_estoque_consumo_w\t\tmaterial.qt_conv_estoque_consumo%type;\ncd_tab_preco_mat_consig_w\t\tparametro_compras.cd_tab_preco_mat_consig%type;\ndt_utl_vigencia_w\t\t\tdate;\ncd_tab_preco_mat_w\t\t\tnumber(10,0);\nie_origem_preco_w\t\t\tnumber(10,0);\nnr_seq_bras_preco_w\t\t\tnumber(10,0);\nnr_seq_mat_bras_w\t\t\tnumber(10,0);\nnr_seq_conv_bras_w\t\t\tnumber(10,0);\nnr_seq_conv_simpro_w\t\t\tnumber(10,0);\nnr_seq_mat_simpro_w\t\t\tnumber(10,0);\nnr_seq_simpro_preco_w\t\t\tnumber(10,0);\nnr_seq_ajuste_mat_w\t\t\tnumber(10,0);\nnr_seq_marca_w\t\t\t\tmarca.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tcirurgia.nr_cirurgia%type;\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\ncd_convenio_w\t\t\t\tconvenio.cd_convenio%type;\nie_preco_sus_oc_w\t\t\tvarchar2(1);\ncd_procedimento_w\t\t\tnumber(15);\nnr_proc_interno_w procedimento.nr_proc_interno%type;\n\ncursor c01 is\nselect\tnr_sequencia\nfrom\tregra_valor_ordem_consig\nwhere\tcd_estabelecimento = cd_estabelecimento_p\nand\tnvl(cd_grupo_material, cd_grupo_material_w)\t\t= cd_grupo_material_w\nand\tnvl(cd_subgrupo_material, cd_subgrupo_material_w)\t= cd_subgrupo_material_w\nand\tnvl(cd_classe_material, cd_classe_material_w)\t\t= cd_classe_material_w\nand\t(nvl(cd_material, cd_material_p) \t\t\t= cd_material_p or cd_material_p = 0)\nand\t((nvl(cd_cnpj, cd_fornecedor_consignado_p)\t\t= cd_fornecedor_consignado_p) or (cd_cnpj is null))\norder by\n\tnvl(cd_material, 0),\n\tnvl(cd_classe_material, 0),\n\tnvl(cd_subgrupo_material, 0),\n\tnvl(cd_grupo_material, 0),\n\tnvl(cd_cnpj, 'xxx');\n\ncursor c02 is\nselect\tie_valor_consignado\nfrom\tregra_preco_ordem_consig\nwhere\tnr_seq_regra = nr_sequencia_w\norder by nr_seq_prioridade;\n\nbegin\n\nnr_seq_agenda_w := nvl(nr_seq_agenda_p,0);\ncd_convenio_w\t:= cd_convenio_p;\n\nselect\ta.cd_grupo_material,\n\ta.cd_subgrupo_material,\n\ta.cd_classe_material\ninto\tcd_grupo_material_w,\n\tcd_subgrupo_material_w,\n\tcd_classe_material_w\nfrom\testrutura_material_v a\nwhere\ta.cd_material = cd_material_p;\n\nselect\tqt_conv_compra_estoque,\n\tqt_conv_estoque_consumo\ninto \tqt_conv_compra_estoque_w,\n\tqt_conv_estoque_consumo_w\nfrom \tmaterial\nwhere \tcd_material = nvl(cd_material_p,0);\n\nselect\tcd_tab_preco_mat_consig\ninto\tcd_tab_preco_mat_consig_w\nfrom\tparametro_compras\nwhere\tcd_estabelecimento = cd_estabelecimento_p;\n\nopen C01;\nloop\nfetch C01 into\n\tnr_sequencia_w;\nexit when C01%notfound;\n\tbegin\n\t/*Busca a sequencia da regra de preco de acordo com as informacoes do material*/\n\tnr_sequencia_w := nr_sequencia_w;\n\tend;\nend loop;\nclose C01;\n\nif\t(nr_sequencia_w > 0) then\n\n\t/*Esse cursor serve para bucar o preco conforme a regra, seguindo a prioridade.\n\tQuando ele encontra o valor, ele sai fora do cursor. Enquanto o valor e zero, ele vai tentando buscar o preco*/\n\topen C02;\n\tloop\n\tfetch C02 into\n\t\tie_valor_consignado_w;\n\texit when C02%notfound or vl_unitario_material_w > 0;\n\t\tbegin\n\t\t\n\t\t/*Tabela de Oportunidades*/\n\t\t\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'V') then\n\t\t\t\n\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\tinto\tnr_cirurgia_w\n\t\t\tfrom\tordem_compra\n\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\n\t\t\t\tselect\tnvl(max(cd_procedimento_princ),0)\n\t\t\t\tinto\tcd_procedimento_w\n\t\t\t\tfrom\tcirurgia a\n\t\t\t\twhere\ta.nr_cirurgia\t\t= nr_cirurgia_w;\n\t\t\t\t\n\t\t\t\tif\t(cd_procedimento_w > 0) then\n\t\t\t\t\n\t\t\t\t\tselect nvl(max(nr_sequencia),0)\n\t\t\t\t\tinto   nr_proc_interno_w\n\t\t\t\t\tfrom   proc_interno\n\t\t\t\t\twhere  cd_procedimento = cd_procedimento_w;\n\t\t\t\t\t\n\t\t\t\t\tif\t(nr_proc_interno_w > 0) then\n\t\t\t\n\t\t\t\t\t\tselect nvl(max(b.vl_unitario_item), 0)\n\t\t\t\t\t\tinto vl_unitario_material_w\n\t\t\t\t\t\tfrom tcel_regra_preco_consig_item a,\n\t\t\t\t\t\t\ttcel_regra_preco_item_valor b\n\t\t\t\t\t\twhere a.cd_estabelecimento = cd_estabelecimento_p\n\t\t\t\t\t\tand a.cd_procedimento = nr_proc_interno_w\n\t\t\t\t\t\tand a.cd_fornecedor = cd_fornecedor_consignado_p\n\t\t\t\t\t\tand a.cd_convenio = cd_convenio_p\n\t\t\t\t\t\tand (a.cd_categoria = cd_categoria_p or nvl(a.cd_categoria,0) = 0 or nvl(cd_categoria_p,0) = 0)\n\t\t\t\t\t\tand a.ie_situacao = 'A'\n\t\t\t\t\t\tand a.nr_sequencia = b.nr_seq_regra\n\t\t\t\t\t\tand b.cd_material = cd_material_p;\n\n\t\t\t\t\tend if;\n\t\t\t\tend if;\n\t\t\tend if;\t\t\n\t\tend if;\n\n\t\t/*Tabela de precos*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'T') then\n\n\t\t\tselect\tnvl(max(a.vl_preco_venda),0)\n\t\t\tinto\tvl_preco_tabela_w\n\t\t\tfrom\tpreco_material a\n\t\t\twhere\ta.cd_material\t\t= cd_material_p\n\t\t\tand\ta.cd_estabelecimento\t= cd_estabelecimento_p\n\t\t\tand\ta.cd_cgc_fornecedor\t= cd_fornecedor_consignado_p\n\t\t\tand\ta.cd_tab_preco_mat\t= nvl(cd_tab_preco_mat_consig_w,a.cd_tab_preco_mat)\n\t\t\tand\ta.ie_situacao\t\t= 'A'\n\t\t\tand\ta.dt_inicio_vigencia\t= (\n\t\t\t\tselect\tmax(b.dt_inicio_vigencia)\n\t\t\t\tfrom\tpreco_material b\n\t\t\t\twhere\tb.cd_material\t\t= a.cd_material\n\t\t\t\tand\tb.cd_cgc_fornecedor\t= a.cd_cgc_fornecedor\n\t\t\t\tand\tb.cd_estabelecimento\t= a.cd_estabelecimento\n\t\t\t\tand\tb.ie_situacao\t\t= 'A'\n\t\t\t\tand\tb.cd_tab_preco_mat\t= nvl(cd_tab_preco_mat_consig_w,a.cd_tab_preco_mat));\n\n\t\t\tif\t(vl_preco_tabela_w <> 0) then\n\t\t\t\tvl_unitario_material_w \t:= vl_preco_tabela_w;\n\t\t\tend if;\n\n\t\t\tvl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w * qt_conv_estoque_consumo_w);\n\t\tend if;\n\n\t\t/*Preco convenio*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'P') then\n\n\t\t\tif\t(nvl(nr_seq_lote_fornec_p,0) <> 0) then\n\t\t\t\tselect\tmax(nr_seq_marca)\n\t\t\t\tinto\tnr_seq_marca_w\n\t\t\t\tfrom\tmaterial_lote_fornec\n\t\t\t\twhere\tnr_sequencia = nr_seq_lote_fornec_p;\n\t\t\tend if;\n\n\t\t\tdefine_preco_material(\tcd_estabelecimento_p,\t-- cd_estabelecimento_p\t\tnumber,\n\t\t\t\t\t\tcd_convenio_w,          -- cd_convenio_p          \tnumber,\n\t\t\t\t\t\tcd_categoria_p,         -- cd_categoria_p         \tvarchar2,\n\t\t\t\t\t\tdt_vigencia_p,          -- dt_vigencia_p          \tdate,\n\t\t\t\t\t\tcd_material_p,          -- cd_material_p          \tnumber,\n\t\t\t\t\t\t0,                      -- cd_tipo_acomodacao_p   \tnumber,\n\t\t\t\t\t\t0,                      -- ie_tipo_atendimento_p  \tnumber,\n\t\t\t\t\t\t0,                      -- cd_setor_atendimento_p \tnumber,\n\t\t\t\t\t\tnull,                   -- cd_cgc_fornecedor_p\t\tvarchar2,\n\t\t\t\t\t\t0,                      -- qt_idade_p\t\t\tnumber,\n\t\t\t\t\t\t0,                      -- nr_sequencia_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- cd_plano_p\t\t\tvarchar2,\n\t\t\t\t\t\tnull,                   -- cd_proc_referencia_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_origem_proc_p\t\tnumber,\n\t\t\t\t\t\tnr_seq_marca_w,         -- nr_seq_marca_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_clinica_p\t\t\tnumber,\n\t\t\t\t\t\tnull,                   -- nr_seq_classif_atend_p\tnumber,\n\t\t\t\t\t\tnr_atendimento_p,       -- nr_atendimento_p\t\tnumber,\n\t\t\t\t\t\tnull,                   -- ie_vago_4_p\t\t\tvarchar2,\n\t\t\t\t\t\tvl_unitario_material_w, -- vl_material_p      \t out \tnumber,\n\t\t\t\t\t\tdt_utl_vigencia_w,      -- dt_ult_vigencia_p  \t out \tdate,\n\t\t\t\t\t\tcd_tab_preco_mat_w,     -- cd_tab_preco_mat_p \t out \tnumber,\n\t\t\t\t\t\tie_origem_preco_w,      -- ie_origem_preco_p  \t out \tnumber,\n\t\t\t\t\t\tnr_seq_bras_preco_w,    -- nr_seq_bras_preco_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_mat_bras_w,      -- nr_seq_mat_bras_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_conv_bras_w,     -- nr_seq_conv_bras_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_conv_simpro_w,   -- nr_seq_conv_simpro_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_mat_simpro_w,    -- nr_seq_mat_simpro_p\t out\tnumber,\n\t\t\t\t\t\tnr_seq_simpro_preco_w,  -- nr_seq_simpro_preco_p out\tnumber,\n\t\t\t\t\t\tnr_seq_ajuste_mat_w);   -- nr_seq_ajuste_mat_p\t out\tnumber\n\n\t\t\tvl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w * qt_conv_estoque_consumo_w);\n\t\tend if;\n\n\n\t\t/*Autorizacao (Valor do fornecedor)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'F') then\n\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\t\t\tselect\tnvl(max(c.vl_unitario_cotado),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a,\n\t\t\t\tmaterial_autor_cir_cot c\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand \tb.nr_sequencia \t= c.nr_sequencia\n\t\t\tand \tc.cd_cgc\t= cd_fornecedor_consignado_p\n\t\t\tand\t((nvl(a.nr_prescricao,0) = nvl(nr_prescricao_p,0)) or (nvl(nr_prescricao_p,0) = 0));\n\t\tend if;\n\n\n\t\t/*Autorizacao (Valor autorizado)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'A') then\n\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\n\t\t\tselect\tnvl(max(b.vl_unitario_material),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand\tb.ie_valor_informado = 'S';\n\t\tend if;\n\n\n\t\t/*Ultima compra*/\n\t\tif\t(nvl(vl_unitario_material_w, 0) = 0) and (ie_valor_consignado_w\t= 'U') then\n\t                select\tnvl(max(dividir((a.vl_total_item_nf - a.vl_desconto - vl_desconto_rateio + vl_frete + a.vl_despesa_acessoria + a.vl_seguro), a.qt_item_estoque)), 0)\n\t                into\tvl_unitario_material_w\n\t                from \tnota_fiscal_item a\n\t                where \ta.cd_material  = cd_material_p\n\t                and \ta.nr_sequencia =\n\t\t\t\t(\n\t\t                        select  max(i.nr_sequencia)\n\t\t                        from\tnota_fiscal_item    i,\n\t\t                                nota_fiscal         n,\n\t\t                                operacao_nota       p\n\t\t                        where\ti.nr_sequencia      =   n.nr_sequencia\n\t\t                        and     i.cd_material       =   cd_material_p\n\t\t                        and     nvl(p.ie_ultima_compra, 'S') = 'S'\n\t\t                        and\tp.cd_operacao_nf    =   n.cd_operacao_nf\n\t\t                        and\tn.ie_situacao       =   '1'\n\t\t                        and\t(\n\t\t                                    (\n                                                \tn.ie_tipo_nota = 'EF'\n\t\t                                        and n.cd_pessoa_fisica = cd_pessoa_fisica_fornec_p\n\t\t                                        and n.cd_cgc_emitente is null\n                                            \t    )\n\t\t                                    or (n.cd_cgc = cd_fornecedor_consignado_p)\n\t\t                                )\n\t                \t);\n\t\n\t                vl_unitario_material_w\t:= (vl_unitario_material_w * qt_conv_compra_estoque_w);\n\t\tend if;\n\n\n\t\t/*OPM com o procedimento SUS*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'O') then\n\n\t\t\tselect\tnvl(sus_obter_preco_proced(cd_estabelecimento_p, sysdate, 1, obter_proced_mat_esp_sus(cd_material_p), 7, 1),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tdual;\n\t\tend if;\n\n\t\t/*Autorizacao de materiais especiais*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w = 'E') then\n\n\t\t\tif\t(cd_convenio_w is null) then\n\t\t\t\tcd_convenio_w := obter_convenio_atendimento(nr_atendimento_p);\n\t\t\tend if;\n\t\t\tobter_preco_conv_mat_fornec(cd_convenio_w, cd_fornecedor_consignado_p, cd_material_p, dt_atualizacao_p, vl_unitario_material_w);\n\t\tend if;\n\n\t\t/*Autorizacao sem prescricao (Valor do fornecedor)*/\n\t\tif\t(nvl(vl_unitario_material_w,0) = 0) and\n\t\t\t(ie_valor_consignado_w\t= 'D') then\n\t\t\tif\t(nvl(nr_seq_agenda_w,0) = 0) then\n\n\t\t\t\tselect\tnvl(max(nr_cirurgia),0)\n\t\t\t\tinto\tnr_cirurgia_w\n\t\t\t\tfrom\tordem_compra\n\t\t\t\twhere\tnr_ordem_compra = nr_ordem_compra_p;\n\n\t\t\t\tif\t(nr_cirurgia_w > 0) then\n\t\t\t\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\t\t\t\tinto\tnr_seq_agenda_w\n\t\t\t\t\tfrom\tagenda_paciente a,\n\t\t\t\t\t\tcirurgia b\n\t\t\t\t\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\t\t\t\t\tand\tb.nr_cirurgia\t= nr_cirurgia_w;\n\t\t\t\tend if;\n\t\t\tend if;\n\n\t\t\tselect\tnvl(max(c.vl_unitario_cotado),0)\n\t\t\tinto\tvl_unitario_material_w\n\t\t\tfrom\tmaterial_autor_cirurgia b,\n\t\t\t\tautorizacao_cirurgia a,\n\t\t\t\tmaterial_autor_cir_cot c\n\t\t\twhere\ta.nr_sequencia\t= b.nr_seq_autorizacao\n\t\t\tand\tb.cd_material\t= cd_material_p\n\t\t\tand\ta.nr_seq_agenda\t= nr_seq_agenda_w\n\t\t\tand \tb.nr_sequencia \t= c.nr_sequencia\n\t\t\tand \tc.cd_cgc\t= cd_fornecedor_consignado_p;\n\t\tend if;\n        \n        /* Contrato */\n        if (nvl(pkg_i18n.get_user_locale, 'pt_BR') = 'es_MX') and(nvl(vl_unitario_material_w, 0) = 0) and\n            (ie_valor_consignado_w = 'C') and (cd_pessoa_fisica_fornec_p is not null) then\n            begin\n               select    nvl(c.vl_saldo_total, c.vl_pagto)\n               into      vl_unitario_material_w\n               from      contrato            a,\n                         contrato_regra_nf   c\n               where     a.nr_sequencia = c.nr_seq_contrato\n               and       a.cd_pessoa_contratada = cd_pessoa_fisica_fornec_p\n               and       c.cd_material = cd_material_p\n               and       nvl(c.dt_inicio_vigencia, sysdate) <= sysdate\n               and       nvl(c.dt_fim_vigencia, sysdate) >= sysdate\n               and       nvl(c.ie_situacao, 'A') = 'A'\n               and       (c.cd_estab_regra = cd_estabelecimento_p or c.cd_estab_regra is null)\n               and       a.dt_inicio <= sysdate\n               and       nvl(dt_fim, sysdate) >= sysdate\n               and       a.ie_situacao = 'A'\n               and       (a.cd_estabelecimento = cd_estabelecimento_p\n                            or exists (select 1 from contrato_estab_adic b\n                                       where  a.nr_sequencia = b.nr_seq_contrato\n                                       and    b.cd_estab_adic = cd_estabelecimento_p))\n               and rownum = 1\n               order by a.nr_sequencia desc;\n            exception\n               when no_data_found or too_many_rows then\n                  vl_unitario_material_w := 0;\n            end;\n        elsif (nvl(vl_unitario_material_w, 0) = 0) and\n               (ie_valor_consignado_w = 'C') then\n            begin\n               select    nvl(c.vl_saldo_total, c.vl_pagto)\n               into      vl_unitario_material_w\n               from      contrato            a,\n                         contrato_regra_nf   c\n               where     a.nr_sequencia = c.nr_seq_contrato\n               and       a.cd_cgc_contratado = cd_fornecedor_consignado_p\n               and       c.cd_material = cd_material_p\n               and       nvl(c.dt_inicio_vigencia, sysdate) <= sysdate\n               and       nvl(c.dt_fim_vigencia, sysdate) >= sysdate\n               and       nvl(c.ie_situacao, 'A') = 'A'\n               and       (c.cd_estab_regra = cd_estabelecimento_p or c.cd_estab_regra is null)\n               and       a.dt_inicio <= sysdate\n               and       nvl(dt_fim, sysdate) >= sysdate\n               and       a.ie_situacao = 'A'\n               and       (a.cd_estabelecimento = cd_estabelecimento_p\n                            or exists (select 1 from contrato_estab_adic b\n                                       where  a.nr_sequencia = b.nr_seq_contrato\n                                       and    b.cd_estab_adic = cd_estabelecimento_p))\n               and rownum = 1\n               order by a.nr_sequencia desc;\n            exception\n               when no_data_found or too_many_rows then\n                  vl_unitario_material_w := 0;\n            end;\n          end if;\n        \n\t\tend;\n\tend loop;\n\tclose C02;\n\nend if;\n\nvl_unitario_material_p := vl_unitario_material_w;\n\nend tcel_obter_vl_mat_ordem_consig;\n/"
    } ]
  }, {
    "event_info" : {
      "date" : "04/02/2025 14:47:29",
      "sequence" : 700060,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "417446d6-4d53-4642-916f-c819693f3c18"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ENVIA_EMAIL_FORNECEDOR_TIE",
      "old_value" : "TCEL_ENVIA_EMAIL_FORNECEDOR_TIE"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace\nprocedure tcel_envia_email_fornecedor_tie (\n\t\t\tnr_ordem_compra_p\tnumber,\n\t\t\tcd_estabelecimento_p\tnumber,\n\t\t\tcd_fornecedor_p\t\t\tvarchar2,\n\t\t\tnm_usuario_p\t\tvarchar2) is\n\nrecipient_w\t\t\t\tpessoa_juridica.ds_email%type;\nJSON_W PHILIPS_JSON := PHILIPS_JSON(); \nJSON_DATA_W              CLOB;\njson_array_w philips_json_list := philips_json_list();\njson_parameters_w philips_json := philips_json();\n\nbegin\n\n\tselect\tsubstr(nvl(b.ds_email,a.ds_email),1,2000)\n\tinto\trecipient_w\n\tfrom\tpessoa_juridica_estab b,\n\t\tpessoa_juridica a\n\twhere\ta.cd_cgc = b.cd_cgc(+)\n\tand\tnvl(b.cd_estabelecimento, cd_estabelecimento_p) = cd_estabelecimento_p\n\tand\ta.cd_cgc = cd_fornecedor_p;\n\t\n\tif (recipient_w is not null) then\n\n\t\tJSON_W.PUT('code', 483);\n\t\tJSON_W.PUT('type', 'WSUP');\n\t\tJSON_W.PUT('title', 'Ordem_Compra ' || nr_ordem_compra_p);\n\t\tJSON_W.PUT('subject', 'Ordem Compra ' || nr_ordem_compra_p);\n\t\tJSON_W.PUT('content', 'Dados referentes a Ordem Compra ' || nr_ordem_compra_p);\t\t\n\t\t\n        json_parameters_w.put('NR_ORDEM_COMPRA', nr_ordem_compra_p);      \n        JSON_W.PUT('parameters', json_parameters_w);\n        \n        json_array_w.append(recipient_w);\n        JSON_W.put('recipientEmails', json_array_w);\n        \n        JSON_W.PUT('readCOnfirmation', 'true');\n\n\t\tSYS.DBMS_LOB.CREATETEMPORARY(JSON_DATA_W, TRUE); \n\t\tJSON_W.TO_CLOB(JSON_DATA_W); \n\t\t\n        JSON_DATA_W := BIFROST.SEND_INTEGRATION_CONTENT('opme.export.purchase.order.event', JSON_DATA_W, nm_usuario_p); \n\n\tend if;\n\nend tcel_envia_email_fornecedor_tie;\n/",
      "old_value" : "create or replace\nprocedure tcel_envia_email_fornecedor_tie (\n\t\t\tnr_ordem_compra_p\tnumber,\n\t\t\tcd_estabelecimento_p\tnumber,\n\t\t\tcd_fornecedor_p\t\t\tvarchar2,\n\t\t\tnm_usuario_p\t\tvarchar2) is\n\nrecipient_w\t\t\t\tpessoa_juridica.ds_email%type;\n\nJSON_W PHILIPS_JSON := PHILIPS_JSON(); \nJSON_DATA_W              CLOB;\n\nbegin\n\n\tselect\tsubstr(nvl(b.ds_email,a.ds_email),1,2000)\n\tinto\trecipient_w\n\tfrom\tpessoa_juridica_estab b,\n\t\tpessoa_juridica a\n\twhere\ta.cd_cgc = b.cd_cgc(+)\n\tand\tnvl(b.cd_estabelecimento, cd_estabelecimento_p) = cd_estabelecimento_p\n\tand\ta.cd_cgc = cd_fornecedor_p;\n\t\n\tif (recipient_w is not null) then\n\n\t\tJSON_W.PUT('code', 483);\n\t\tJSON_W.PUT('type', 'WSUP');\n\t\tJSON_W.PUT('title', 'Ordem_Compra ' || nr_ordem_compra_p);\n\t\tJSON_W.PUT('subject', 'Ordem Compra ' || nr_ordem_compra_p);\n\t\tJSON_W.PUT('content', 'Dados referentes a Ordem Compra ' || nr_ordem_compra_p);\t\t\n\t\tJSON_W.PUT('parameters', '{\"NR_ORDEM_COMPRA\": \"' || nr_ordem_compra_p || '\"}');\n\t\tJSON_W.PUT('recipientEmails', '[\"' || recipient_w || '\"]');\n\t\tJSON_W.PUT('readCOnfirmation', 'true');\n\n\t\tSYS.DBMS_LOB.CREATETEMPORARY(JSON_DATA_W, TRUE); \n\t\tJSON_W.TO_CLOB(JSON_DATA_W); \n    \n    JSON_DATA_W := BIFROST.SEND_INTEGRATION_CONTENT('opme.export.purchase.order.event', JSON_DATA_W, nm_usuario_p); \n\t\n\tend if;\n\nend tcel_envia_email_fornecedor_tie;\n/"
    } ]
  }, {
    "event_info" : {
      "date" : "04/02/2025 14:47:29",
      "sequence" : 700061,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "e211ddca-02e3-4bda-87ee-1748dc8ca7c4"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ENVIA_EMAIL_FORNECEDOR_TIE",
      "old_value" : "TCEL_ENVIA_EMAIL_FORNECEDOR_TIE"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "04/02/2025 14:47:29",
      "sequence" : 700062,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "1d881afd-3f1f-44cf-b888-310a0503b97b"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ENVIA_EMAIL_FORNECEDOR_TIE",
      "old_value" : "TCEL_ENVIA_EMAIL_FORNECEDOR_TIE"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "04/02/2025 14:47:29",
      "sequence" : 700063,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "6a4bac96-0cec-4d46-9bc8-b0ab35e64083"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "5c993530e16e",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG",
      "old_value" : "TCEL_ATUALIZA_VALOR_MAT_ORDEM_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ {
      "column_name" : "DS_SCRIPT_CRIACAO",
      "data_type" : "LONG",
      "new_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nnr_item_oci_w\t\t\t\tordem_compra_item.nr_item_oci%type;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(obter_ordem_atend_consignado(cd_estabelecimento_p, cd_fornecedor_consignado_p, cd_local_entrega_p, 0, nr_atendimento_p, nr_prescricao_p,'W'),0)\ninto\tnr_ordem_compra_w\nfrom\tdual;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect nvl(max(nr_item_oci),0)\n\tinto nr_item_oci_w\n    from ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p;\n\t\n\tselect nvl(vl_unitario_material,0)\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_item_oci_w;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  sysdate,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material2_w,0) > 0) and (nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material2_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material2_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p\n\t\tand nr_item_oci = nr_item_oci_w;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\t\tgerar_ordem_compra_venc(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/",
      "old_value" : "create or replace procedure tcel_atualiza_valor_mat_ordem_consig(\n\t\t\tcd_estabelecimento_p in number,\n\t\t\tcd_fornecedor_consignado_p in varchar2,\n\t\t\tcd_local_entrega_p in number,\n\t\t\tnr_atendimento_p in number,\n\t\t\tnr_prescricao_p in number,\n\t\t\tcd_material_p in number,\n\t\t\tqt_compra_p in number,\n\t\t\tnm_usuario_p in varchar2,\n\t\t\tnr_seq_lote_fornec_p in\tnumber) is\n\nnr_ordem_compra_w\t\t\tnumber(10);\ncd_convenio_w\t\t\t\tnumber(05,0); \ncd_categoria_w\t\t\t\tvarchar2(10);\nvl_unitario_material_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nvl_unitario_material2_w\t\tordem_compra_item.vl_unitario_material%type\t:= 0;\nnr_item_oci_w\t\t\t\tordem_compra_item.nr_item_oci%type;\ncd_pessoa_fisica_fornec_w \tnota_fiscal.cd_pessoa_fisica%type;\nnr_sequencia_nf_w\t\t\tmaterial_lote_fornec.nr_sequencia_nf%type;\nie_tipo_atendimento_w\t\tnumber(2);\nie_preco_sus_oc_w\t\t\tvarchar2(1);\nnr_seq_agenda_w\t\t\t\tagenda_paciente.nr_sequencia%type;\nnr_cirurgia_w\t\t\t\tnumber(10,0);\n\nbegin\n\nselect\tnvl(nr_ordem_compra,0)\ninto\tnr_ordem_compra_w\nfrom ordem_compra\nwhere cd_cgc_fornecedor = cd_fornecedor_consignado_p\nand nr_prescricao = nr_prescricao_p\nand nr_atendimento = nr_atendimento_p\nand\tie_tipo_ordem = 'W'\nand\tdt_baixa\tis null\nand\tdt_emissao\tis null\nand dt_liberacao is null\nand dt_aprovacao is null;\n\nif\t(nr_ordem_compra_w > 0) then\n\n\tselect nvl(max(nr_item_oci),0)\n\tinto nr_item_oci_w\n    from ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p;\n\t\n\tselect nvl(vl_unitario_material,0)\n\tinto vl_unitario_material_w\n\tfrom ordem_compra_item\n\twhere nr_ordem_compra = nr_ordem_compra_w\n\tand cd_material = cd_material_p\n\tand nr_item_oci = nr_item_oci_w;\n\t\t\t\n\tselect\tcd_convenio,\n\t\tcd_categoria\n\tinto\tcd_convenio_w,\n\t\tcd_categoria_w\n\tfrom\tatendimento_paciente_v\n\twhere\tnr_atendimento\t= nr_atendimento_p;\n\t\n\tselect  max(matlf.nr_sequencia_nf)\n    into    nr_sequencia_nf_w\n    from    material_lote_fornec    matlf\n    where   matlf.nr_sequencia  =   nr_seq_lote_fornec_p;\n\n    select\tmax(nf.cd_pessoa_fisica)\n    into\tcd_pessoa_fisica_fornec_w\n    from    nota_fiscal            nf\n    where   nf.nr_sequencia    =   nr_sequencia_nf_w;\n\t\n\tselect\tnvl(ie_preco_sus_oc,'N')\n\tinto\tie_preco_sus_oc_w\n\tfrom  \tparametro_compras\n\twhere \tcd_estabelecimento = cd_estabelecimento_p;\n\n\tif\t(ie_preco_sus_oc_w = 'S') and\n\t\t(nr_atendimento_p > 0) then\n\n\t\tselect\tObter_Dados_Atendimento(nr_atendimento_p, 'TC')\n\t\tinto\tie_tipo_atendimento_w\n\t\tfrom\tdual;\n\tend if;\n\t\n\tselect\t\tmax(a.nr_cirurgia)\n\tinto\t\tnr_cirurgia_w\n\tfrom\t\tprescr_medica a\n\twhere \t\ta.nr_prescricao = nr_prescricao_p\n    group by\ta.nr_prescricao;\n\t\n\tselect\tnvl(max(a.nr_sequencia),0)\n\tinto\tnr_seq_agenda_w\n\tfrom\tagenda_paciente a,\n\t\tcirurgia b\n\twhere\ta.nr_cirurgia\t= b.nr_cirurgia\n\tand\t\tb.nr_prescricao\t= nr_prescricao_p;\n\n\tif\t(nr_seq_agenda_w = 0) then\n\t\tselect\tnvl(max(a.nr_sequencia),0)\n\t\tinto\tnr_seq_agenda_w\n\t\tfrom\tagenda_paciente a,\n\t\t\tcirurgia b\n\t\twhere \ta.nr_cirurgia\t= b.nr_cirurgia\n\t\tand\t\tb.nr_cirurgia = nr_cirurgia_w;\n\tend if;\n\t\n\ttcel_obter_vl_mat_ordem_consig(\n\t\tcd_estabelecimento_p        =>  cd_estabelecimento_p,\n\t\tcd_fornecedor_consignado_p  =>  cd_fornecedor_consignado_p,\n\t\tcd_pessoa_fisica_fornec_p   =>  cd_pessoa_fisica_fornec_w,\n\t\tcd_material_p               =>  cd_material_p,\n\t\tnr_ordem_compra_p           =>  nr_ordem_compra_w,\n\t\tnr_prescricao_p             =>  nr_prescricao_p,\n\t\tnr_atendimento_p            =>  nr_atendimento_p,\n\t\tie_tipo_atendimento_p       =>  ie_tipo_atendimento_w,\n\t\tnr_seq_agenda_p             =>  nr_seq_agenda_w,\n\t\tdt_atualizacao_p            =>  sysdate,\n\t\tnr_seq_lote_fornec_p        =>  nr_seq_lote_fornec_p,\n\t\tcd_convenio_p               =>  cd_convenio_w,\n\t\tcd_categoria_p              =>  cd_categoria_w,\n\t\tdt_vigencia_p               =>  sysdate,\n\t\tvl_unitario_material_p      =>  vl_unitario_material2_w\n\t);\n\t\t\n\tif\t(nvl(vl_unitario_material2_w,0) > 0) and (nvl(vl_unitario_material_w,0) != nvl(vl_unitario_material2_w,0)) then\n\t\n\t\tupdate\tordem_compra_item\n\t\tset\tvl_unitario_material = vl_unitario_material2_w,\n\t\t\tnm_usuario = nm_usuario_p,\n\t\t\tdt_atualizacao = sysdate,\n\t\t\tvl_total_item = round((qt_compra_p * vl_unitario_material2_w),4)\n\t\twhere\tnr_ordem_compra = nr_ordem_compra_w\n\t\tand cd_material = cd_material_p\n\t\tand nr_item_oci = nr_item_oci_w;\n\t\t\t\n\t\tCalcular_Liquido_Ordem_Compra(nr_ordem_compra_w, nm_usuario_p);\n\tend if;\nend if;\n\nend tcel_atualiza_valor_mat_ordem_consig;\n/"
    } ]
  } , {
    "event_info" : {
      "date" : "12/02/2025 19:29:53",
      "sequence" : 900065,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "FUNCAO",
      "tag_name" : "CMDK",
      "tasy_user" : "",
      "guid" : "10bc85cf-8f9e-4489-9cb9-15078537c6a9"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "6b1e4b627e20",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_FUNCAO",
      "data_type" : "NUMBER",
      "new_value" : 99784,
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "PR_FUNCAO_MODULO",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    }, {
      "column_name" : "DS_ACTION",
      "data_type" : "VARCHAR2",
      "new_value" : "/tcelf6",
      "old_value" : null
    }, {
      "column_name" : "CD_FUNCAO",
      "data_type" : "NUMBER",
      "new_value" : 99784,
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "IE_REGRA_FUNCIONAMENTO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "NR_SEQ_MOD_IMPL",
      "data_type" : "NUMBER",
      "new_value" : "283",
      "old_value" : null
    }, {
      "column_name" : "DS_APLICACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "Tasy",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "20/01/2025 14:29:38",
      "old_value" : null
    }, {
      "column_name" : "IE_LIB_CLIENTE",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO_WEB",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "04/10/2024 16:57:32",
      "old_value" : null
    }, {
      "column_name" : "IE_MAXIMIZAR",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO_SWING",
      "data_type" : "VARCHAR2",
      "new_value" : "I",
      "old_value" : null
    }, {
      "column_name" : "IE_DIC_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_BLOQUEADA",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_RELEVANTE_SBIS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_CLASSIF_PRODUTO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "IE_CONFIRMA_FECHAR",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_SITUACAO_IOS",
      "data_type" : "VARCHAR2",
      "new_value" : "I",
      "old_value" : null
    }, {
      "column_name" : "IE_VERSAO_USO",
      "data_type" : "VARCHAR2",
      "new_value" : "H",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_FUNCAO",
      "data_type" : "NUMBER",
      "new_value" : 1133168,
      "old_value" : null
    }, {
      "column_name" : "IE_FORMA_APRESENTACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "T",
      "old_value" : null
    }, {
      "column_name" : "IE_UTILITARIO_HTML",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_STATUS_HTML",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "IE_UTILIZA_MACRO",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "IE_LAZY_LOAD",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
      "column_name" : "DS_ROTA",
      "data_type" : "VARCHAR2",
      "new_value" : "/tcelf6",
      "old_value" : null
    }, {
      "column_name" : "IE_SCHEMATIC_ARQUIVO",
      "data_type" : "VARCHAR2",
      "new_value" : "S",
      "old_value" : null
    }, {
      "column_name" : "IE_EXCLUSIVA_PHILIPS",
      "data_type" : "VARCHAR2",
      "new_value" : "N",
      "old_value" : null
    }, {
        "column_name": "NR_SEQ_MODULO",
        "data_type": "NUMBER",
        "new_value": "80",
        "old_value": null
    },{
      "column_name" : "NR_SEQ_GRUPO_DES",
      "data_type" : "NUMBER",
      "new_value" : 0,
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "12/02/2025 19:29:53",
      "sequence" : 3300,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "d2a6927b-f9bc-481c-9c9e-824dc04644a3"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "6b1e4b627e20",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1134290,
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "DS_GLOSSARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "Regra Ordem Consignado - Estendida",
      "old_value" : null
    }, {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1134290,
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "12/02/2025 19:28:19",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "12/02/2025 19:28:19",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "12/02/2025 19:29:53",
      "sequence" : 3301,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "DIC_EXPRESSAO_CUSTOM",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "14d2509a-945e-4060-8e2e-3bde0d9ceae9"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "6b1e4b627e20",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16782,
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "DS_LAYER",
      "data_type" : "VARCHAR2",
      "new_value" : "CORE.TECHCELL",
      "old_value" : null
    },{
      "column_name":"CD_EXPRESSAO",
      "data_type":"NUMBER",
      "new_value":1134290,
      "old_value":null
    }, {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "DS_LOCALE",
      "data_type" : "VARCHAR2",
      "new_value" : "en_US",
      "old_value" : null
    }, {
      "column_name" : "DS_IDIOMA",
      "data_type" : "VARCHAR2",
      "new_value" : "en",
      "old_value" : null
    }, {
      "column_name" : "DS_EXPRESSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "Regra Ordem Consignado - Estendida",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO_NREC",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16782,
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "12/02/2025 19:28:21",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "12/02/2025 19:28:21",
      "old_value" : null
    } ]
  }, {
    "event_info" : {
      "date" : "12/02/2025 19:29:53",
      "sequence" : 3350,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "e2e3bc8f-fc4a-4730-9880-84900ef0b8c5"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "6b1e4b627e20",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1134290,
      "old_value" : 1134290
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "12/02/2025 19:29:53",
      "sequence" : 3351,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO_CUSTOM",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "5e4360b5-ed84-44b2-9ba2-6d12ce1df87e"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "6b1e4b627e20",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16782,
      "old_value" : 16782
    } ],
    "column_values" : [ {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : "A"
    }, {
      "column_name" : "DS_LOCALE",
      "data_type" : "VARCHAR2",
      "new_value" : "pt_BR",
      "old_value" : "en_US"
    }, {
      "column_name" : "DS_IDIOMA",
      "data_type" : "VARCHAR2",
      "new_value" : "pt",
      "old_value" : "en"
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "12/02/2025 19:28:52",
      "old_value" : "12/02/2025 19:28:21"
    } ]
  } , {
    "event_info" : {
      "date" : "05/02/2025 14:17:43",
      "sequence" : 50,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "05a4e9ea-08e6-40a4-9a9a-5dc02fa01760"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "6b1e4b627e20",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133127,
      "old_value" : 1133127
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "05/02/2025 14:17:43",
      "sequence" : 1350,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "5f335cff-2be9-425b-baff-c2074e28571e"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "6b1e4b627e20",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133168,
      "old_value" : 1133168
    } ],
    "column_values" : [ ]
  },   {
    "event_info" : {
      "date" : "05/02/2025 14:17:43",
      "sequence" : 1450,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "febd4c0b-f4d4-4875-954f-faa5cade66ba"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "6b1e4b627e20",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133303,
      "old_value" : 1133303
    } ],
    "column_values" : [ ]
  },  {
    "event_info" : {
      "date" : "05/02/2025 14:17:43",
      "sequence" : 1600,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "532710d6-19b7-4c6e-a1fa-d9ea79e550d4"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "6b1e4b627e20",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133315,
      "old_value" : 1133315
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "05/02/2025 14:17:43",
      "sequence" : 700040,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "d38a483c-6227-4d97-9e2b-e075dacdea13"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "6b1e4b627e20",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG",
      "old_value" : "TCEL_OBTER_VL_MAT_ORDEM_CONSIG"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "05/02/2025 14:17:43",
      "sequence" : 700061,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "994483b3-d334-4705-8b81-b3bf8135bc27"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "6b1e4b627e20",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ENVIA_EMAIL_FORNECEDOR_TIE",
      "old_value" : "TCEL_ENVIA_EMAIL_FORNECEDOR_TIE"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "05/02/2025 14:17:43",
      "sequence" : 700062,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "OBJETO_SISTEMA",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "fb9ca9de-9c54-4a78-8816-fdb25b6f033d"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "6b1e4b627e20",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NM_OBJETO",
      "data_type" : "VARCHAR2",
      "new_value" : "TCEL_ENVIA_EMAIL_FORNECEDOR_TIE",
      "old_value" : "TCEL_ENVIA_EMAIL_FORNECEDOR_TIE"
    }, {
      "column_name" : "IE_BANCO",
      "data_type" : "VARCHAR2",
      "new_value" : "Oracle",
      "old_value" : "Oracle"
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "05/02/2025 14:17:43",
      "sequence" : 3200,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "d036ecb4-d1e3-43ca-a33e-3837a305db57"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "6b1e4b627e20",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_EXPRESSAO",
      "data_type" : "NUMBER",
      "new_value" : 1133315,
      "old_value" : 1133315
    } ],
    "column_values" : [ ]
  }, {
    "event_info" : {
      "date" : "05/02/2025 14:17:43",
      "sequence" : 3201,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "UPDATE",
      "table_name" : "DIC_EXPRESSAO_CUSTOM",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "d3e71c10-06b8-4ac6-8b2a-cd63abe5c930"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "6b1e4b627e20",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "NR_SEQUENCIA",
      "data_type" : "NUMBER",
      "new_value" : 16587,
      "old_value" : 16587
    } ],
    "column_values" : [ {
      "column_name" : "DS_EXPRESSAO",
      "data_type" : "VARCHAR2",
      "new_value" : "Tabela de oportunidades\n ",
      "old_value" : "Tabela de oportunidade\n "
    }, {
      "column_name" : "DT_ATUALIZACAO_NREC",
      "data_type" : "DATE",
      "new_value" : "05/02/2025 14:17:09",
      "old_value" : "10/01/2025 17:26:31"
    } ]
  },
  {
    "event_info" : {
      "date" : "10/01/2025 14:29:00",
      "sequence" : 500000,
      "date_format" : "dd/mm/rrrr hh24:mi:ss",
      "dml_operation" : "INSERT",
      "table_name" : "VALOR_DOMINIO",
      "tag_name" : "CMDK",
      "tasy_user" : "dgalvan",
      "guid" : "6c1d382d-a6ed-4121-8bad-f0097fb5ffe6"
    },
    "server_info" : {
      "charset" : "AMERICAN_AMERICA.AL32UTF8",
      "database_version" : "19.0",
      "instance_name" : "phcdb4"
    },
    "session_info" : {
      "machine" : "6b1e4b627e20",
      "os_user" : "root",
      "tasy_user" : "dgalvan"
    },
    "primary_key_values" : [ {
      "column_name" : "CD_DOMINIO",
      "data_type" : "NUMBER",
      "new_value" : 8173,
      "old_value" : null
    }, {
      "column_name" : "VL_DOMINIO",
      "data_type" : "VARCHAR2",
      "new_value" : "V",
      "old_value" : null
    } ],
    "column_values" : [ {
      "column_name" : "IE_SITUACAO",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "CD_DOMINIO",
      "data_type" : "NUMBER",
      "new_value" : 8173,
      "old_value" : null
    }, {
      "column_name" : "VL_DOMINIO",
      "data_type" : "VARCHAR2",
      "new_value" : "V",
      "old_value" : null
    }, {
      "column_name" : "DS_VALOR_DOMINIO",
      "data_type" : "VARCHAR2",
      "new_value" : "Tabela de oportunidade",
      "old_value" : null
    }, {
      "column_name" : "DT_ATUALIZACAO",
      "data_type" : "DATE",
      "new_value" : "10/01/2025 14:29:00",
      "old_value" : null
    }, {
      "column_name" : "NM_USUARIO",
      "data_type" : "VARCHAR2",
      "new_value" : "dgalvan",
      "old_value" : null
    }, {
      "column_name" : "CD_EXP_VALOR_DOMINIO",
      "data_type" : "NUMBER",
      "new_value" : 1133315,
      "old_value" : null
    }, {
      "column_name" : "IE_DELPHI",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "IE_JAVA",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "IE_HTML5",
      "data_type" : "VARCHAR2",
      "new_value" : "A",
      "old_value" : null
    }, {
      "column_name" : "DS_LAYER",
      "data_type" : "VARCHAR2",
      "new_value" : "CORE.TECHCELL",
      "old_value" : null
    } ]
  }]
}
